function t(){const t=r();a();const n=t.canvas;if(!n)return;f=.5*n.width,h=.5*n.height;const o=t.elasticCenterRingCount??10;o>0&&((t,n)=>{if(!t.canvas)return;const o=.5*(t.R_MIN+t.R_MAX)*(t.elasticCenterSpacingMultiplier||2.8),a=[];n>0&&a.push({x:0,y:0,layer:0,index:0});for(let r=1;n>r;r++){const t=r*o,n=Math.max(6,Math.floor(2*t*Math.PI/o));for(let o=0;n>o;o++){const s=o/n*Math.PI*2;a.push({x:Math.cos(s)*t,y:Math.sin(s)*t,layer:r,index:a.length})}}for(let r=0;Math.min(8,a.length)>r;r++){const n=a[r],o=c(t,s.ELASTIC_CENTER),{color:M,distributionIndex:l}=e(),u=new i(f+n.x,h+n.y,o,M);u.distributionIndex=l,u.isElasticCenter=!0,u.t=n.x,u.o=n.y,u.i=Math.sqrt(n.x*n.x+n.y*n.y),u.m=t.MASS_BASELINE_KG*(t.elasticCenterMassMultiplier||2),u.vx=0,u.vy=0,u.omega=0,t.balls.push(u)}for(let r=8;a.length>r;r++){const n=a[r],o=c(t,s.ELASTIC_CENTER),{color:M,distributionIndex:l}=e(),u=new i(f+n.x,h+n.y,o,M);u.distributionIndex=l,u.isElasticCenter=!0,u.t=n.x,u.o=n.y,u.i=Math.sqrt(n.x*n.x+n.y*n.y),u.m=t.MASS_BASELINE_KG*(t.elasticCenterMassMultiplier||2),u.vx=0,u.vy=0,u.omega=0,t.balls.push(u)}})(t,o)}function n(t,n){const o=r();if(o.currentMode!==s.ELASTIC_CENTER)return;if(!t.isElasticCenter)return;const a=(o.elasticCenterElasticStrength??2e3)*o.DPR,e=f+t.t-t.x,c=h+t.o-t.y,i=Math.max(.1,Math.sqrt(e*e+c*c)),M=a*i*n,l=c/i;if(t.vx+=e/i*M,t.vy+=l*M,o.mouseInCanvas){const a=(o.elasticCenterMouseRepelStrength??12e3)*o.DPR,r=(o.elasticCenterMouseRadius??200)*o.DPR,s=t.x-o.mouseX,e=t.y-o.mouseY,c=Math.sqrt(s*s+e*e);if(r>c&&c>.1){const o=1-c/r,i=a*o*o*n,f=e/c;t.vx+=s/c*i,t.vy+=f*i}}const u=o.elasticCenterDamping??.94;t.vx*=u,t.vy*=u}function o(){const t=r();if(t.currentMode!==s.ELASTIC_CENTER)return;const n=t.canvas;n&&(f=.5*n.width,h=.5*n.height)}import{am as a,g as r,ao as s,aO as e,aQ as c}from"./shared.js";import{B as i}from"./Ball.js";let f=0,h=0;export{n as applyElasticCenterForces,t as initializeElasticCenter,o as updateElasticCenter};