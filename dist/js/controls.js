function e(e){return!1!==I[e]}function a(e){return{id:e,label:"Warmup Frames",stateKey:e,type:"range",min:0,max:240,step:1,default:10,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),reinitMode:!0,hint:"Pre-runs physics before first render to avoid visible settling on mode start."}}function t(e,a){try{if("function"==typeof e?.format)return e.format(a)}catch(t){}return(a??"")+""}function n(){const e=[];for(const a of Object.values(L))for(const t of a.controls)e.push({...t,section:a.title});return e}function r(a){if("divider"===a.type)return`<div class="control-divider"><span class="control-divider-label">${a.label||""}</span></div>`;if(!e(a.id))return"";const n=a.id+"Slider",r=a.id+"Val",l=a.id+"Picker",o=a.hint?` title="${i=a.hint,((i??"")+"").replaceAll("&","&amp;").replaceAll('"',"&quot;").replaceAll("'","&#39;").replaceAll("<","&lt;").replaceAll(">","&gt;")}"`:"";var i;const s=a.isHero?"control-row control-row--hero":"control-row";if("colorDistribution"===a.type){const e=(Array.isArray(a.labels)?a.labels:[]).map((e,a)=>{const t=((e||"")+"").trim();return`\n        <div class="color-dist-row" data-color-dist-row="${a}">\n          <div class="color-dist-row-label">${t}</div>\n          <div class="color-dist-row-controls">\n            <span class="color-dist-swatch" id="${"colorDistSwatch"+a}" aria-hidden="true"></span>\n            <select id="${"colorDistColor"+a}" class="control-select color-dist-select" aria-label="${t} color"></select>\n            <input type="range" id="${"colorDistWeight"+a}" min="0" max="100" step="1" value="0" aria-label="${t} weight">\n            <span class="color-dist-weight" id="${"colorDistWeightVal"+a}">0%</span>\n          </div>\n        </div>`}).join("");return`\n      <div class="${s}" data-control-id="${a.id}">\n        <div class="control-row-header">\n          <span class="control-label">${a.label}</span>\n          <span class="control-value" id="colorDistTotalVal">100%</span>\n        </div>\n        <div class="color-dist-grid" id="colorDistGrid">\n          ${e}\n        </div>\n        <div class="color-dist-actions">\n          <button type="button" class="secondary" id="colorDistResetBtn" aria-label="Reset color distribution to defaults">Reset Defaults</button>\n        </div>\n      </div>\n      ${a.hint?`<p class="control-hint">${a.hint}</p>`:""}`}if("color"===a.type)return`\n      <label class="${s}" data-control-id="${a.id}">\n        <div class="control-row-header">\n          <span class="control-label"${o}>${a.label}</span>\n          <span class="control-value" id="${r}">${a.default}</span>\n        </div>\n        <input type="color" id="${l}" value="${a.default}" aria-label="${a.label}" />\n      </label>\n      ${a.hint?`<p class="control-hint">${a.hint}</p>`:""}`;if("select"===a.type){const e=(Array.isArray(a.options)?a.options:[]).map(e=>{const t=e.value+"";return`<option value="${t}" ${a.default+""===t?"selected":""}>${(e.label??e.value)+""}</option>`}).join(""),l=a.hint?`<p class="control-hint">${a.hint}</p>`:"";return`\n      <label class="${s}" data-control-id="${a.id}">\n        <div class="control-row-header">\n          <span class="control-label"${o}>${a.label}</span>\n          <span class="control-value" id="${r}">${t(a,a.default)}</span>\n        </div>\n        <select id="${n}" class="control-select" aria-label="${a.label}">\n          ${e}\n        </select>\n      </label>\n      ${l}`}if("checkbox"===a.type||"toggle"===a.type)return`\n      <label class="${s}" data-control-id="${a.id}">\n        <div class="control-row-header">\n          <span class="control-label"${o}>${a.label}</span>\n          <span class="control-value" id="${r}">${a.default?"On":"Off"}</span>\n        </div>\n        <input type="checkbox" id="${n}" ${a.default?"checked":""} aria-label="${a.label}">\n      </label>\n      ${a.hint?`<p class="control-hint">${a.hint}</p>`:""}`;const p=a.hint?`<p class="control-hint">${a.hint}</p>`:"";return`\n      <label class="${s}" data-control-id="${a.id}">\n        <div class="control-row-header">\n          <span class="control-label"${o}>${a.label}</span>\n          <span class="control-value" id="${r}">${t(a,a.default)}</span>\n        </div>\n        <input type="range" id="${n}" min="${a.min}" max="${a.max}" step="${a.step}" value="${a.default}">\n      </label>\n      ${p}`}function l(a,t){const n=t.controls.filter(a=>e(a.id));if(0===n.length)return"";let l=null,o="";for(const e of n)e.group&&e.group!==l?(null!==l&&(o+="</div>"),o+=`<div class="section-title" style="margin-top: 12px;">${e.group}</div><div class="group ${e.groupLayout||""}">`,l=e.group):e.group||null===l||(o+="</div>",l=null),o+=r(e);null!==l&&(o+="</div>");const i=t.defaultOpen?"open":"",s=`\n    <summary class="panel-section-header">\n      ${t.icon?`<span class="section-icon">${t.icon}</span>`:""}\n      <span class="section-label">${t.title}</span>\n    </summary>`,p=`<div class="panel-section-content">${o}</div>`;return t.mode?`\n      <div id="${t.mode}Controls" class="mode-controls">\n        <details class="panel-section-accordion" ${i}>\n          ${s}\n          ${p}\n        </details>\n      </div>`:`\n    <details class="panel-section-accordion" ${i}>\n      ${s}\n      ${p}\n    </details>`}function o({open:e=!0}={}){return`\n    <details class="panel-section-accordion" ${e?"open":""}>\n      <summary class="panel-section-header">\n        <span class="section-icon">üé®</span>\n        <span class="section-label">Theme</span>\n      </summary>\n      <div class="panel-section-content">\n        <div class="theme-segment-control" role="group" aria-label="Theme selector">\n          <button id="themeAuto" class="theme-segment-btn" aria-label="Auto theme">Auto</button>\n          <button id="themeLight" class="theme-segment-btn active" aria-label="Light theme">Light</button>\n          <button id="themeDark" class="theme-segment-btn" aria-label="Dark theme">Dark</button>\n        </div>\n        <div id="themeStatus" class="panel-status">‚òÄÔ∏è Light Mode</div>\n      </div>\n    </details>`}function i({open:e=!1}={}){return`\n    <details class="panel-section-accordion" ${e?"open":""}>\n      <summary class="panel-section-header">\n        <span class="section-icon">üåà</span>\n        <span class="section-label">Palette</span>\n      </summary>\n      <div class="panel-section-content">\n        <label class="control-row">\n          <div class="control-row-header">\n            <span class="control-label">Color Template</span>\n            <span class="control-value"></span>\n          </div>\n          <select id="colorSelect"></select>\n        </label>\n        <label class="control-row">\n          <div class="control-row-header">\n            <span class="control-label">Rotate on Reload</span>\n            <span class="control-value"></span>\n          </div>\n          <input id="paletteRotateOnReload" type="checkbox" />\n        </label>\n      </div>\n    </details>`}function s(){let e="",a=null;for(const t of k){if(!L[t])continue;const n=D[t]||null;n&&n!==a?(null!==a&&(e+="</div>"),e+=`\n        <div class="panel-category-group">\n          <div class="panel-category-label">${n}</div>`,a=n):n||null===a||(e+="</div>",a=null),e+=l(0,L[t])}return null!==a&&(e+="</div>"),e}function p(){let e=`\n    <div role="status" aria-live="polite" aria-atomic="true" class="sr-only" id="announcer"></div>\n    ${(()=>{const e=Object.entries(L).filter(([,e])=>e?.mode).map(([e,a])=>l(0,a)).join("");return`\n    <details class="panel-section-accordion" open>\n      <summary class="panel-section-header">\n        <span class="section-icon">üéõÔ∏è</span>\n        <span class="section-label">Mode</span>\n      </summary>\n      <div class="panel-section-content">\n        <div class="mode-switcher" role="group" aria-label="Simulation mode selector">\n          ${(()=>{const e={pit:"üéØ",bubbles:"ü´ß",critters:"ü™≤",flies:"üïäÔ∏è",water:"üåä",vortex:"‚öõÔ∏è",magnetic:"üß≤","ping-pong":"üèì","dvd-logo":"üìÄ",weightless:"üåå","kaleidoscope-3":"ü™û",neural:"üß†","parallax-linear":"üéöÔ∏è","3d-sphere":"üåê","3d-cube":"üßä","starfield-3d":"‚ú®","elastic-center":"‚≠ï",snake:"üêç"},a={pit:"Pit",bubbles:"Bubbles",critters:"Critters",flies:"Flies",water:"Water",vortex:"Electrons",magnetic:"Magnet","ping-pong":"Pong","dvd-logo":"DVD",weightless:"Zero-G","kaleidoscope-3":"Kalei",neural:"Neural","parallax-linear":"Parallax Lin","3d-sphere":"Sphere 3D","3d-cube":"Cube 3D","starfield-3d":"Starfield 3D","elastic-center":"Elastic Center",snake:"Snake"};let t="";return w.forEach((n,r)=>{const l=n,o=e[l]||"‚ö™",i=a[l]||l,s=(r+1+"").padStart(2,"0");t+=`<button class="mode-button" data-mode="${l}" aria-label="${s} ¬∑ ${F[n]||i} mode"><span class="mode-button-number">${s}</span><span class="mode-button-label">${o} ${i}</span></button>`}),t})()}\n        </div>\n        ${e}\n      </div>\n    </details>`})()}\n  `;for(const[a,t]of Object.entries(L))t?.mode||k.includes(a)||(e+=l(0,t));return e}function d(){try{for(const[,e]of Object.entries(L)){if(!e?.mode)continue;const a=Array.isArray(e.controls)?e.controls.length:0;4>a&&console.warn(`[panel] Mode "${e.mode}" has only ${a} controls; add at least 4 parameters.`)}}catch(e){}return`\n    ${o({open:!0})}\n    ${s()}\n    ${p()}\n    ${i({open:!1})}\n    <div class="panel-section panel-section--action">\n      <button id="saveRuntimeConfigBtn" class="primary">üíæ Save Config</button>\n    </div>\n    <div class="panel-footer">\n      <kbd>R</kbd> reset ¬∑ <kbd>/</kbd> panel ¬∑ <kbd>9</kbd> kalei ¬∑ Critters + Throws have no key (yet)\n    </div>\n  `}function m(e={}){const a=y(),t=!1!==e.runOnChange;for(const n of Object.values(L))for(const e of n.controls){if("colorDistribution"===e.type)continue;const n=e.id+"Val",r=document.getElementById("color"===e.type?e.id+"Picker":e.id+"Slider"),l=document.getElementById(n);if(!r||!e.stateKey)continue;const o=a[e.stateKey];void 0!==o&&("checkbox"===e.type||"toggle"===e.type?(r.checked=!!o,l&&(l.textContent=o?"On":"Off")):"color"===e.type?(r.value=o,l&&(l.textContent=o)):(r.value=o,l&&(l.textContent=e.format?e.format(o):o+"")),t&&e.onChange&&"wallPreset"!==e.id&&e.onChange(a,o))}}function c(){(()=>{const e=y();for(const[t,n]of Object.entries(L))for(const r of n.controls){const l=document.getElementById(r.id+"Val");if("colorDistribution"===r.type){const i=Array.isArray(r.labels)?r.labels:[],s=document.getElementById("colorDistResetBtn");function p(e){return((e||"")+"").trim().toLowerCase()}function d(e,a,t,n=a){const r=+e;if(!Number.isFinite(r))return n;const l=Math.floor(r);return a>l?a:l>t?t:l}function m(e){const a=[];for(let t=0;8>t;t++)a.push({value:t+"",label:`Ball ${t+1}${e[t]?" ‚Äî "+e[t]:""}`});return a}function c(a){const t=Array.isArray(e.colorDistribution)?e.colorDistribution:[],n=new Map;for(const e of t)n.set(p(e?.label),e);const r=new Map([["art & visual direction","frontend craft"]]),l=Array.isArray(a)?a:t,o=[],s=new Set;for(let e=0;i.length>e;e++){const a=((i[e]||"")+"").trim(),t=p(a),m=r.get(t),c=l.find(e=>p(e?.label)===t)||(m?l.find(e=>p(e?.label)===m):null)||n.get(t)||(m?n.get(m):null)||{};let u=d(c?.colorIndex,0,7,d(n.get(t)?.colorIndex,0,7,0));if(s.has(u))for(let e=0;8>e;e++)if(!s.has(e)){u=e;break}s.add(u);const f=d(c?.weight,0,100,d(n.get(t)?.weight,0,100,0));o.push({label:a,colorIndex:u,weight:f})}return o}function u(e,a=0){const t=e.map(e=>d(e,0,100,0));let n=0;for(let i=0;t.length>i;i++)n+=t[i];if(100===n)return t;if(0===n)return t[a]=100,t;const r=Array(t.length).fill(0);let l=0;for(let i=0;t.length>i;i++){const e=Math.round(t[i]/n*100);r[i]=e,l+=e}let o=100-l;for(;0!==o;)if(o>0){let e=0;for(let a=1;r.length>a;a++)r[a]>r[e]&&(e=a);r[e]+=1,o-=1}else{let e=-1;for(let a=0;r.length>a;a++)r[a]>0&&(-1===e||r[a]>r[e])&&(e=a);if(-1===e)break;r[e]-=1,o+=1}return r.map(e=>d(e,0,100,0))}function f(e,a,t){const n=e.map(e=>d(e?.weight,0,100,0));return n[a]=d(t,0,100,n[a]),100===n.reduce((e,a)=>e+a,0)?n:u(n,a)}function h(){const a={pit:null,flies:e.fliesBallCount,weightless:e.weightlessCount,water:e.waterBallCount,vortex:e.vortexBallCount,"ping-pong":e.pingPongBallCount,magnetic:e.magneticBallCount,bubbles:e.bubblesMaxCount,"kaleidoscope-3":e.kaleidoscope3BallCount,critters:e.critterCount,neural:e.neuralBallCount}[e.currentMode];return Number.isFinite(+a)?+a:null}function g(){import("./legend-colors.js").then(({applyExpertiseLegendColors:e})=>e?.()).catch(()=>{}),import("./shared.js").then(e=>e.aG).then(({pickRandomColor:a})=>{if("function"!=typeof a)return;const t=e.balls||[];for(let e=0;t.length>e;e++)t[e].color=a()}).catch(()=>{})}function S(){const a=c(e.colorDistribution),t=u(a.map(e=>e.weight),0);for(let e=0;a.length>e;e++)a[e].weight=t[e];e.colorDistribution=a;const n={};for(let e=0;a.length>e;e++)n[a[e].colorIndex]=a[e].label;const r=m(n),l=h();for(let e=0;i.length>e;e++){const t=a[e]||{colorIndex:0,weight:0},o=document.getElementById("colorDistSwatch"+e),i=document.getElementById("colorDistColor"+e),s=document.getElementById("colorDistWeight"+e),p=document.getElementById("colorDistWeightVal"+e);if(i){i.innerHTML="";for(const e of r){const a=document.createElement("option");a.value=e.value,a.textContent=e.label;const r=d(e.value,0,7,0);n[r]&&!(r===t.colorIndex)&&(a.disabled=!0),i.appendChild(a)}i.value=t.colorIndex+""}if(s&&(s.value=d(t.weight,0,100,0)+""),p){const e=d(t.weight,0,100,0),a=null!=l?Math.round(e/100*l):null;p.textContent=null!=a?`${e}% (‚âà${a})`:e+"%"}if(o){const e=d(t.colorIndex,0,7,0);o.style.backgroundColor=`var(--ball-${e+1})`}}const o=document.getElementById("colorDistTotalVal");if(o){let e=0;for(let t=0;a.length>t;t++)e+=a[t].weight;o.textContent=e+"%"}}try{S()}catch(a){}s&&s.addEventListener("click",()=>{const a=e?.config?.colorDistribution;e.colorDistribution=c(a);const t=u(e.colorDistribution.map(e=>e.weight),0);for(let n=0;e.colorDistribution.length>n;n++)e.colorDistribution[n].weight=t[n];S(),g(),b()});for(let M=0;i.length>M;M++){const v=document.getElementById("colorDistColor"+M),w=document.getElementById("colorDistWeight"+M);v&&v.addEventListener("change",()=>{const a=d(v.value,0,7,0),t=c(e.colorDistribution);t[M].colorIndex=a,e.colorDistribution=t,S(),g(),b()}),w&&w.addEventListener("input",()=>{const a=d(w.value,0,100,0),t=c(e.colorDistribution),n=f(t,M,a);for(let e=0;t.length>e;e++)t[e].weight=n[e];e.colorDistribution=t,S(),g(),b()})}continue}if("color"===r.type){const F=document.getElementById(r.id+"Picker");if(!F)continue;F.addEventListener("input",()=>{const a=F.value;r.stateKey&&(e[r.stateKey]=a),r.onChange&&r.onChange(e,a),l&&(l.textContent=a),r.stateKey&&x("default",r.stateKey,a),b()});continue}if("select"===r.type){const K=document.getElementById(r.id+"Slider");if(!K)continue;K.addEventListener("change",()=>{const a=r.parse?r.parse(K.value):K.value;if(r.stateKey&&(e[r.stateKey]=a),r.onChange&&r.onChange(e,a),l){const t=r.stateKey?e[r.stateKey]:a;l.textContent=r.format?r.format(t):t+""}r.stateKey&&x("default",r.stateKey,a),b()});continue}if("checkbox"===r.type||"toggle"===r.type){const C=document.getElementById(r.id+"Slider");if(!C)continue;C.addEventListener("change",()=>{const a=!!C.checked;r.stateKey&&(e[r.stateKey]=a),r.onChange&&r.onChange(e,a),l&&(l.textContent=a?"On":"Off"),r.reinitMode&&e.currentMode===n.mode&&import("./shared.js").then(e=>e.aI).then(({resetCurrentMode:e})=>e?.()).catch(()=>{}),r.stateKey&&x("default",r.stateKey,a),b()});continue}const o=document.getElementById(r.id+"Slider");o&&o.addEventListener("input",()=>{const a="function"==typeof r?.parse?r.parse(o.value):Number.parseFloat(o.value);r.stateKey&&(e[r.stateKey]=a),r.onChange&&r.onChange(e,a),l&&(l.textContent=r.format(r.stateKey?e[r.stateKey]:a)),r.reinitMode&&e.currentMode===n.mode&&import("./shared.js").then(e=>e.aI).then(({resetCurrentMode:e})=>e?.()).catch(()=>{}),r.stateKey&&x("default",r.stateKey,a),b()})}})(),K();const e=document.getElementById("colorSelect");e&&e.addEventListener("change",()=>{C(e.value),b()});const a=document.getElementById("themeAuto"),t=document.getElementById("themeLight"),n=document.getElementById("themeDark");[a,t,n].forEach(e=>{e&&e.addEventListener("click",()=>{[a,t,n].forEach(e=>e?.classList.remove("active")),e.classList.add("active")})})}function u(){c(),document.querySelectorAll(".mode-button").forEach(e=>{e.addEventListener("click",a=>{a.stopPropagation();const t=e.getAttribute("data-mode");console.log("Mode button clicked:",t),import("./shared.js").then(e=>e.aI).then(({setMode:e})=>{e(t),f(t)}).catch(()=>{})})})}function f(e){document.querySelectorAll(".mode-button").forEach(a=>{const t=a.getAttribute("data-mode")===e;a.classList.toggle("active",t)}),document.querySelectorAll(".mode-controls").forEach(e=>e.classList.remove("active"));const a=document.getElementById(e+"Controls");a&&a.classList.add("active");const t=document.getElementById("announcer");t&&(t.textContent=`Switched to ${{critters:"Critters",pit:"Ball Pit",flies:"Flies to Light",weightless:"Zero-G",water:"Water Swimming",vortex:"Electrons","ping-pong":"Ping Pong",magnetic:"Magnetic",bubbles:"Carbonated Bubbles","kaleidoscope-3":"Kaleidoscope",neural:"Neural Network"}[e]||e} mode`)}import{aw as h,ax as g,g as y,ay as b,az as x,aA as S,aB as M,aC as v,N as w,aD as F,aE as K,ab as C}from"./shared.js";let I={};(()=>{try{const e=localStorage.getItem("panel_control_visibility");e&&(I=JSON.parse(e))}catch(e){I={}}})();const k=["liteMode","physics","wall","balls","colorDistribution","colors","uiSpacing","noise","cursor","trail","links","scene","overlay","simulationOverlay","entrance","environment"],D={liteMode:"PERFORMANCE",physics:"MATERIAL WORLD",wall:"MATERIAL WORLD",balls:"MATERIAL WORLD",colorDistribution:"LOOK & PALETTE",colors:"LOOK & PALETTE",noise:"LOOK & PALETTE",cursor:"INTERACTION",trail:"INTERACTION",links:"INTERACTION",scene:"MOTION",sphere3d:"MOTION",cube3d:"MOTION",starfield3d:"MOTION",cloudHelix:"MOTION",entrance:"MOTION",overlay:"DEPTH & LAYOUT",simulationOverlay:"DEPTH & LAYOUT",layout:"DEPTH & LAYOUT",uiSpacing:"DEPTH & LAYOUT",sound:"SOUND",environment:"ENVIRONMENT"},L={liteMode:{title:"Lite Mode",icon:"‚ö°",defaultOpen:!0,controls:[{id:"liteModeEnabled",label:"Lite Mode",stateKey:"liteModeEnabled",type:"toggle",default:!1,format:e=>e?"On":"Off",parse:e=>!!e,hint:"Reduces simulation density for smoother 90fps targets.",isHero:!0,onChange(e){import("./shared.js").then(e=>e.aI).then(({setMode:a})=>{a(e.currentMode)}).catch(()=>{})}}]},environment:{title:"Browser",icon:"üß≠",defaultOpen:!1,controls:[{id:"chromeHarmonyMode",label:"Chrome Harmony",stateKey:"chromeHarmonyMode",type:"select",options:[{value:"auto",label:"Auto (adapt only when needed)"},{value:"site",label:"Site (benchmark)"},{value:"browser",label:"Browser (force adapt)"}],default:"site",format:e=>e+"",parse:e=>e+"",hint:"If desktop browsers ignore theme-color, the wall adapts to match the browser UI palette.",onChange(){import("./shared.js").then(e=>e.aM).then(({getCurrentTheme:e,setTheme:a})=>{a(e())}).catch(()=>{})}},{id:"autoDarkModeEnabled",label:"Auto Dark (Night)",stateKey:"autoDarkModeEnabled",type:"checkbox",default:!0,format:e=>e?"On":"Off",parse:e=>!!e,hint:"In Auto theme, prefer Dark during the night window (privacy-first: local clock only).",onChange(){import("./shared.js").then(e=>e.aM).then(({getCurrentTheme:e,setTheme:a})=>{"auto"===e()&&a("auto")}).catch(()=>{})}},{id:"autoDarkNightStartHour",label:"Night Starts",stateKey:"autoDarkNightStartHour",type:"range",min:0,max:23,step:1,default:18,format:e=>Math.round(e)+":00",parse:e=>parseInt(e,10),onChange(){import("./shared.js").then(e=>e.aM).then(({getCurrentTheme:e,setTheme:a})=>{"auto"===e()&&a("auto")}).catch(()=>{})}},{id:"autoDarkNightEndHour",label:"Night Ends",stateKey:"autoDarkNightEndHour",type:"range",min:0,max:23,step:1,default:6,format:e=>Math.round(e)+":00",parse:e=>parseInt(e,10),onChange(){import("./shared.js").then(e=>e.aM).then(({getCurrentTheme:e,setTheme:a})=>{"auto"===e()&&a("auto")}).catch(()=>{})}}]},physics:{title:"Material World",icon:"‚öñÔ∏è",defaultOpen:!1,controls:[{id:"ballMassKg",label:"Ball Mass",stateKey:"ballMassKg",type:"range",min:20,max:400,step:1,default:91,format:e=>Math.round(e)+" kg",parse:e=>parseInt(e,10),hint:"Heavier = snooker feel (more inertia, less jitter).",onChange(e,a){const t=+a;if(Number.isFinite(t)&&Array.isArray(e.balls))for(let n=0;e.balls.length>n;n++){const a=e.balls[n];a&&(a.m=t)}}},{id:"REST",label:"Restitution",stateKey:"REST",type:"range",min:0,max:.95,step:.01,default:.42,format:e=>e.toFixed(2),parse:parseFloat,hint:"Global bounciness for collisions (modes may override)."},{id:"FRICTION",label:"Friction",stateKey:"FRICTION",type:"range",min:0,max:.06,step:.001,default:.018,format:e=>e.toFixed(3),parse:parseFloat,hint:"Global drag/energy loss (modes may override)."},{id:"physicsCollisionIterations",label:"Collision Iterations",stateKey:"physicsCollisionIterations",type:"range",min:3,max:20,step:1,default:10,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),group:"Performance",groupCollapsed:!0,hint:"How many times per frame we resolve collisions. Lower = faster, higher = tighter stacks."},{id:"physicsSkipSleepingCollisions",label:"Skip Sleeping Pairs",stateKey:"physicsSkipSleepingCollisions",type:"toggle",default:!0,group:"Performance",hint:"When enabled, collisions between two sleeping balls are skipped until something wakes them. Big CPU win with piles."},{id:"physicsSpatialGridOptimization",label:"Grid Reuse",stateKey:"physicsSpatialGridOptimization",type:"toggle",default:!0,group:"Performance",hint:"Reuses the spatial grid data structures to reduce allocations/GC. Keep on unless debugging."},{id:"physicsSleepThreshold",label:"Sleep Threshold",stateKey:"physicsSleepThreshold",type:"range",min:0,max:30,step:1,default:12,format:e=>Math.round(e)+" px/s",parse:e=>parseInt(e,10),group:"Performance",hint:"Velocity below which a ball is considered ‚Äúat rest‚Äù (non‚ÄëPit modes). 0 disables sleeping."},{id:"physicsSleepTime",label:"Sleep Time",stateKey:"physicsSleepTime",type:"range",min:0,max:1,step:.05,default:.25,format:e=>e.toFixed(2)+"s",parse:parseFloat,group:"Performance",hint:"How long a ball must stay under the Sleep Threshold before it sleeps. Higher = more stability + more performance."},{id:"physicsSkipSleepingSteps",label:"Skip Sleeping Steps",stateKey:"physicsSkipSleepingSteps",type:"toggle",default:!0,group:"Performance",hint:"When enabled, sleeping balls don‚Äôt run physics integration each tick. Improves performance; tiny motions may be delayed until wake."}]},balls:{title:"Balls",icon:"üé±",defaultOpen:!1,controls:[{id:"ballSizeDesktop",label:"Desktop Size",stateKey:"ballSizeDesktop",type:"range",min:2,max:40,step:1,default:18,format:e=>e+"px",parse:parseFloat,hint:"Ball radius in pixels for desktop",onChange(e,a){e.ballSizeDesktop=a,import("./shared.js").then(e=>e.aF).then(({updateBallSizes:a})=>{a();const t=e.R_MED;e.balls&&e.balls.length&&e.balls.forEach(e=>{e.r=t,e.rBase=t})}),import("./shared.js").then(e=>e.aK).then(({updateCursorSize:e})=>{e()})}},{id:"ballSizeMobile",label:"Mobile Size",stateKey:"ballSizeMobile",type:"range",min:2,max:30,step:1,default:6,format:e=>e+"px",parse:parseFloat,hint:"Ball radius in pixels for mobile devices",onChange(e,a){e.ballSizeMobile=a,import("./shared.js").then(e=>e.aF).then(({updateBallSizes:a})=>{a();const t=e.R_MED;e.balls&&e.balls.length&&e.balls.forEach(e=>{e.r=t,e.rBase=t})})}},{id:"mobileObjectReductionFactor",label:"Mobile Density",stateKey:"mobileObjectReductionFactor",type:"range",min:0,max:1,step:.05,default:.7,format:e=>Math.round(100*e)+"%",parse:parseFloat,hint:"Scales object counts on mobile (0% = none). Resets the current mode.",onChange(e){import("./shared.js").then(e=>e.aI).then(({setMode:a})=>{a(e.currentMode)}).catch(()=>{})}},{id:"ballSoftnessGlobal",label:"Softness",stateKey:"ballSoftness",type:"range",min:0,max:100,step:1,default:20,format:e=>e+"",parse:e=>parseInt(e,10)},{id:"ballSpacing",label:"Spacing",stateKey:"ballSpacing",type:"range",min:0,max:.5,step:.01,default:.08,format:e=>Math.round(100*e)+"%",parse:parseFloat,hint:"Collision gap as % of ball radius (affects physics)"},{id:"sizeVariationGlobalMul",label:"Variation Scale",stateKey:"sizeVariationGlobalMul",type:"range",min:0,max:2,step:.05,default:1,format:e=>e.toFixed(2)+"x",parse:parseFloat,hint:"Global multiplier for per-mode size variation",onChange(){import("./shared.js").then(e=>e.aF).then(({updateBallSizes:e})=>{e()})}},{id:"sizeVariationCap",label:"Variation Cap",stateKey:"sizeVariationCap",type:"range",min:0,max:.2,step:.01,default:.2,format:e=>Math.round(100*e)+"%",parse:parseFloat,hint:"Max radius deviation from medium (20% = ¬±20%)",onChange(){import("./shared.js").then(e=>e.aF).then(({updateBallSizes:e})=>{e()})}}]},cursor:{title:"Hand",icon:"üñêÔ∏è",defaultOpen:!1,controls:[{id:"cursorInfluenceRadiusVw",label:"Influence Radius",stateKey:"cursorInfluenceRadiusVw",type:"range",min:0,max:80,step:.5,default:14,format:e=>e.toFixed(1)+"vw",parse:parseFloat,hint:"Universal cursor interaction zone (scales with viewport width)."}]},trail:{title:"Mouse & Trail",icon:"üñêÔ∏è",defaultOpen:!1,controls:[{id:"cursorSize",label:"Cursor Size",stateKey:"cursorSize",type:"range",min:.1,max:3,step:.05,default:1,format:e=>e.toFixed(2),parse:parseFloat,onChange(){import("./shared.js").then(e=>e.aK).then(({updateCursorSize:e})=>{e()})}},{id:"mouseTrailEnabled",label:"Trail Enabled",stateKey:"mouseTrailEnabled",type:"checkbox",default:!0},{id:"mouseTrailLength",label:"Trail Length",stateKey:"mouseTrailLength",type:"range",min:4,max:96,step:1,default:18,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),hint:"Max samples kept (higher = smoother, slightly more work)"},{id:"mouseTrailSize",label:"Trail Size",stateKey:"mouseTrailSize",type:"range",min:.5,max:10,step:.1,default:1.3,format:e=>e.toFixed(1)+"px",parse:parseFloat},{id:"mouseTrailFadeMs",label:"Trail Fade",stateKey:"mouseTrailFadeMs",type:"range",min:40,max:1200,step:10,default:220,format:e=>Math.round(e)+"ms",parse:e=>parseInt(e,10)},{id:"mouseTrailOpacity",label:"Trail Opacity",stateKey:"mouseTrailOpacity",type:"range",min:0,max:1,step:.01,default:.35,format:e=>e.toFixed(2),parse:parseFloat},{type:"divider",label:"Cursor Explosion"},{id:"cursorExplosionEnabled",label:"Explosion Enabled",stateKey:"cursorExplosionEnabled",type:"checkbox",default:!0,hint:"Particle dispersion when cursor enters button areas"},{id:"cursorExplosionParticleCount",label:"Particle Count",stateKey:"cursorExplosionParticleCount",type:"range",min:4,max:32,step:1,default:16,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),hint:"Base particle count (scales with velocity)"},{id:"cursorExplosionSpeed",label:"Particle Speed",stateKey:"cursorExplosionSpeed",type:"range",min:100,max:1e3,step:50,default:400,format:e=>Math.round(e)+"px/s",parse:e=>parseInt(e,10),hint:"Base particle velocity (scales with impact)"},{id:"cursorExplosionSpreadDeg",label:"Spread Angle",stateKey:"cursorExplosionSpreadDeg",type:"range",min:180,max:360,step:10,default:360,format:e=>Math.round(e)+"¬∞",parse:e=>parseInt(e,10),hint:"Particle dispersion angle (360 = full circle)"},{id:"cursorExplosionLifetime",label:"Lifetime",stateKey:"cursorExplosionLifetime",type:"range",min:.3,max:1.5,step:.1,default:.8,format:e=>e.toFixed(1)+"s",parse:parseFloat,hint:"How long particles live before fading"},{id:"cursorExplosionFadeStartRatio",label:"Fade Start",stateKey:"cursorExplosionFadeStartRatio",type:"range",min:.3,max:.9,step:.05,default:.6,format:e=>Math.round(100*e)+"%",parse:parseFloat,hint:"When to start fading (0.6 = fade at 60% lifetime)"},{id:"cursorExplosionDrag",label:"Drag",stateKey:"cursorExplosionDrag",type:"range",min:.85,max:.99,step:.01,default:.95,format:e=>e.toFixed(2),parse:parseFloat,hint:"Velocity decay per frame (lower = faster slowdown)"},{id:"cursorExplosionShrinkEnabled",label:"Shrink Over Time",stateKey:"cursorExplosionShrinkEnabled",type:"checkbox",default:!0,hint:"Particles shrink as they age (cartoony character)"}]},cursorExplosionImpact:{title:"Cursor Explosion Impact",controls:[{id:"cursorExplosionImpactMinFactor",label:"Min Impact",stateKey:"cursorExplosionImpactMinFactor",type:"range",min:.1,max:2,step:.1,default:.5,format:e=>e.toFixed(1)+"x",parse:parseFloat,hint:"Impact multiplier for slow hover (0.5 = half intensity)"},{id:"cursorExplosionImpactMaxFactor",label:"Max Impact",stateKey:"cursorExplosionImpactMaxFactor",type:"range",min:1,max:8,step:.5,default:4,format:e=>e.toFixed(1)+"x",parse:parseFloat,hint:"Impact multiplier for fast impact (4.0 = 4x intensity)"},{id:"cursorExplosionImpactSensitivity",label:"Impact Sensitivity",stateKey:"cursorExplosionImpactSensitivity",type:"range",min:100,max:1e3,step:50,default:400,format:e=>Math.round(e)+"px/ms",parse:e=>parseInt(e,10),hint:"Velocity threshold for scaling (higher = less sensitive)"},{type:"divider",label:"Lifetime Impact"},{id:"cursorExplosionLifetimeImpactMin",label:"Min Lifetime Scale",stateKey:"cursorExplosionLifetimeImpactMin",type:"range",min:.3,max:1.5,step:.1,default:.7,format:e=>e.toFixed(1)+"x",parse:parseFloat,hint:"Lifetime multiplier for slow hover (particles fade quickly)"},{id:"cursorExplosionLifetimeImpactMax",label:"Max Lifetime Scale",stateKey:"cursorExplosionLifetimeImpactMax",type:"range",min:1,max:3,step:.1,default:1.8,format:e=>e.toFixed(1)+"x",parse:parseFloat,hint:"Lifetime multiplier for fast impact (particles travel farther)"},{id:"cursorExplosionLifetimeImpactSensitivity",label:"Lifetime Sensitivity",stateKey:"cursorExplosionLifetimeImpactSensitivity",type:"range",min:200,max:1500,step:50,default:600,format:e=>Math.round(e)+"px/ms",parse:e=>parseInt(e,10),hint:"Velocity threshold for lifetime scaling (higher = less sensitive)"}]},uiSpacing:{title:"UI Spacing",icon:"üìè",defaultOpen:!1,controls:[{type:"divider",label:"Content"},{id:"contentPaddingRatio",label:"Padding Additive",stateKey:"contentPaddingRatio",type:"range",min:-.05,max:.1,step:.001,default:0,format:e=>(100*+e).toFixed(1)+"%",parse:parseFloat,hint:"Additive padding as a fraction of viewport size (sqrt(w*h)). Back-compat: old px values are auto-converted.",onChange(e,a){const t=void 0!==a?a:void 0!==e.contentPaddingRatio?e.contentPaddingRatio:0;x("default","contentPaddingRatio",t),import("./shared.js").then(e=>e.aF).then(({applyLayoutFromVwToPx:a,applyLayoutCSSVars:n})=>{a(),n();try{const a=document.getElementById("contentPaddingRatioVal");if(a){const n=+t||0,r=(()=>{try{const e=getComputedStyle(document.documentElement).getPropertyValue("--layout-viewport-size-px").trim(),a=parseFloat(e);return Number.isFinite(a)?a:0}catch(e){return 0}})(),l=Math.round(r*n),o=Math.round(e.contentPadding||0);a.textContent=`${0>n?"":"+"}${(100*n).toFixed(1)}% (${0>l?"":"+"}${l}px) ‚Üí ${o}px`}}catch(r){}try{document.dispatchEvent(new CustomEvent("layout-updated"))}catch(r){}}).catch(()=>{}),import("./shared.js").then(e=>e.aH).then(({resize:e})=>{try{e()}catch(a){}}).catch(()=>{})}},{id:"contentPaddingHorizontalRatio",label:"Horizontal Ratio",stateKey:"contentPaddingHorizontalRatio",type:"range",min:.5,max:2.5,step:.05,default:1,format:e=>(+e).toFixed(2)+"√ó",parse:parseFloat,hint:"Horizontal padding = base √ó ratio.",onChange(e){import("./shared.js").then(e=>e.aF).then(({applyLayoutFromVwToPx:a,applyLayoutCSSVars:t})=>{a(),t();try{const a=document.getElementById("contentPaddingHorizontalRatioVal");a&&(a.textContent=`${(+(e.contentPaddingHorizontalRatio||1)).toFixed(2)}√ó ‚Üí ${Math.round(e.contentPaddingX||e.contentPadding)}px`)}catch(n){}}).catch(()=>{})}},{id:"contentPaddingBottomRatio",label:"Bottom Padding Ratio",stateKey:"contentPaddingBottomRatio",type:"range",min:.5,max:2.5,step:.05,default:1.3,format:e=>(+e).toFixed(2)+"√ó",parse:parseFloat,hint:"Bottom padding multiplier (applied to vertical padding).",onChange(e,a){const t=+a||1.3;document.documentElement.style.setProperty("--abs-content-pad-mul-bottom",t+""),import("./shared.js").then(e=>e.aN).then(({syncConfigToFile:e})=>{e("default","contentPaddingBottomRatio",t)}).catch(()=>{})}},{type:"divider",label:"Hit Areas"},{id:"uiHitAreaMul",label:"Hit Area Mul",stateKey:"uiHitAreaMul",type:"range",min:.5,max:2.5,step:.05,default:.7,format:e=>(+e).toFixed(2)+"√ó",parse:parseFloat,hint:"Scales most UI button/link hit areas (drives --ui-hit-area-mul).",onChange(e,a){document.documentElement.style.setProperty("--ui-hit-area-mul",a+"")}},{type:"divider",label:"Icon Buttons"},{id:"uiIconFramePx",label:"Icon Frame Size",stateKey:"uiIconFramePx",type:"range",min:0,max:120,step:1,default:0,format:e=>+e>0?Math.round(e)+"px":"Auto",parse:e=>parseInt(e,10),hint:"Square icon button frame size (height/width). 0 = auto (derived from icon padding tokens).",onChange(e,a){const t=document.documentElement;+a>0?t.style.setProperty("--ui-icon-frame-size",Math.round(a)+"px"):t.style.removeProperty("--ui-icon-frame-size")}},{id:"uiIconGlyphPx",label:"Icon Glyph Size",stateKey:"uiIconGlyphPx",type:"range",min:0,max:64,step:1,default:0,format:e=>+e>0?Math.round(e)+"px":"Auto",parse:e=>parseInt(e,10),hint:"Icon glyph size inside the square frame. 0 = auto (uses token defaults).",onChange(e,a){const t=document.documentElement;+a>0?t.style.setProperty("--ui-icon-glyph-size",Math.round(a)+"px"):t.style.removeProperty("--ui-icon-glyph-size")}},{id:"uiIconGroupMarginPx",label:"Icon Group Margin",stateKey:"uiIconGroupMarginPx",type:"range",min:-60,max:60,step:1,default:0,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10),hint:"Margin applied to the social icon group. Use negative values to push icons outward.",onChange(e,a){const t=document.documentElement;0===+a?t.style.removeProperty("--ui-icon-group-margin"):t.style.setProperty("--ui-icon-group-margin",Math.round(a)+"px")}},{id:"uiIconCornerRadiusMul",label:"Corner Radius",stateKey:"uiIconCornerRadiusMul",type:"range",min:0,max:1,step:.01,default:.4,format:e=>Math.round(100*+e)+"% of wall",parse:parseFloat,hint:"Icon button corner radius as a fraction of wall radius (drives --ui-icon-corner-radius-mul).",onChange(e,a){document.documentElement.style.setProperty("--ui-icon-corner-radius-mul",a+"")}},{id:"uiIconFramePx",label:"Frame Size",stateKey:"uiIconFramePx",type:"range",min:0,max:140,step:1,default:0,format:e=>Math.round(+e)>0?Math.round(+e)+"px":"Auto",parse:e=>parseInt(e,10),hint:"Square icon button frame size (px). 0 = use token-derived default (--ui-icon-frame-size).",onChange(e,a){try{const e=document.documentElement,t=Math.round(+(a||0));t>0?e.style.setProperty("--ui-icon-frame-size",t+"px"):e.style.removeProperty("--ui-icon-frame-size")}catch(t){}}},{id:"uiIconGlyphPx",label:"Glyph Size",stateKey:"uiIconGlyphPx",type:"range",min:0,max:80,step:1,default:0,format:e=>Math.round(+e)>0?Math.round(+e)+"px":"Auto",parse:e=>parseInt(e,10),hint:"Icon glyph size (px). 0 = use token-derived default (--ui-icon-glyph-size).",onChange(e,a){try{const e=document.documentElement,t=Math.round(+(a||0));t>0?e.style.setProperty("--ui-icon-glyph-size",t+"px"):e.style.removeProperty("--ui-icon-glyph-size")}catch(t){}}},{type:"divider",label:"Links"},{id:"linkTextPadding",label:"Text Link Padding",stateKey:"linkTextPadding",type:"range",min:4,max:40,step:1,default:30,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10),hint:"Padding for text links (main links, CV links).",onChange(e,a){document.documentElement.style.setProperty("--link-text-padding",a+"px"),document.documentElement.style.setProperty("--link-text-margin",-a+"px")}},{id:"linkIconPadding",label:"Icon Link Padding",stateKey:"linkIconPadding",type:"range",min:4,max:40,step:1,default:24,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10),hint:"Legacy: used to derive auto icon button sizing when Icon Frame Size is set to Auto.",onChange(e,a){document.documentElement.style.setProperty("--link-icon-padding",a+"px"),document.documentElement.style.setProperty("--link-icon-margin",-a+"px")}},{type:"divider",label:"Main Links + Labels"},{id:"footerNavBarTopVh",label:"Nav Bar Position",stateKey:"footerNavBarTopVh",type:"range",min:0,max:100,step:.5,default:50,format:e=>(+e).toFixed(1)+"vh",parse:e=>parseFloat(e),hint:"Vertical position of main links nav bar from top of viewport.",onChange(e,a){const t=document.documentElement;t.style.setProperty("--footer-nav-bar-top",a+"vh"),t.style.setProperty("--footer-nav-bar-top-svh",a+"svh"),t.style.setProperty("--footer-nav-bar-top-dvh",a+"dvh")}},{id:"footerNavBarGapVw",label:"Nav Link Gap",stateKey:"footerNavBarGapVw",type:"range",min:0,max:10,step:.1,default:2.5,format:e=>(+e).toFixed(1)+"vw",parse:e=>parseFloat(e),hint:"Horizontal gap between nav bar links (vw ‚Üí clamp).",onChange(e,a){const t=+a;if(!Number.isFinite(t))return;const n=Math.round(9.6*t);document.documentElement.style.setProperty("--footer-nav-bar-gap",`clamp(${n}px, ${t}vw, ${Math.round(1.67*n)}px)`)}},{id:"homeMainLinksBelowLogoPx",label:"Links Offset",stateKey:"homeMainLinksBelowLogoPx",type:"range",min:-120,max:240,step:1,default:40,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10),hint:"Index: move the main links up/down below the logo.",onChange(e,a){document.documentElement.style.setProperty("--home-main-links-below-logo-px",a+"")}},{id:"edgeLabelInsetAdjustPx",label:"Edge Label Inset",stateKey:"edgeLabelInsetAdjustPx",type:"range",min:-120,max:240,step:1,default:0,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10),hint:"Adjusts edge label inset relative to wall. Higher = inward; lower = outward.",onChange(){import("./shared.js").then(e=>e.aF).then(e=>{e.applyLayoutCSSVars()}).catch(()=>{})}},{id:"edgeCaptionDistanceMinPx",label:"Caption Distance Min",stateKey:"edgeCaptionDistanceMinPx",type:"range",min:0,max:80,step:2,default:8,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10),hint:"Padding from bottom inner edge of wall (0 = flush). Index, portfolio, cv.",onChange(){import("./shared.js").then(e=>e.aF).then(e=>{e.applyLayoutCSSVars()}).catch(()=>{})}},{id:"edgeCaptionDistanceMaxPx",label:"Caption Distance Max",stateKey:"edgeCaptionDistanceMaxPx",type:"range",min:16,max:200,step:2,default:48,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10),hint:"Maximum distance; at largest breakpoint does not grow further.",onChange(){import("./shared.js").then(e=>e.aF).then(e=>{e.applyLayoutCSSVars()}).catch(()=>{})}}]},simulationOverlay:{title:"Simulation Overlay",icon:"üîÜ",defaultOpen:!1,controls:[{id:"simulationOverlayIntensity",label:"CSS Gradient",stateKey:"simulationOverlayIntensity",type:"range",min:0,max:1,step:.05,default:1,format:e=>e.toFixed(2),parse:parseFloat,hint:"Intensity of the soft gradient overlay on the simulation (viewport ::before).",onChange(){import("./shared.js").then(e=>e.aF).then(e=>{e.applyLayoutCSSVars()}).catch(()=>{})}},{id:"depthWashOpacity",label:"Depth Wash",stateKey:"depthWashOpacity",type:"range",min:0,max:1,step:.05,default:.65,format:e=>e.toFixed(2),parse:parseFloat,hint:"Opacity of the radial depth overlay between balls and wall.",onChange(){}}]},links:{title:"Links",icon:"üîó",defaultOpen:!1,controls:[{id:"linkColorInfluence",label:"Color Influence",stateKey:"linkColorInfluence",type:"range",min:0,max:1,step:.01,default:1,format:e=>e.toFixed(2),parse:parseFloat,hint:"How much cursor color affects link colors (0 = none, 1 = full)",onChange(e,a){document.documentElement.style.setProperty("--link-color-influence",a+"")}},{id:"linkImpactScale",label:"Impact Scale",stateKey:"linkImpactScale",type:"range",min:.7,max:1,step:.01,default:.95,format:e=>e.toFixed(2),parse:parseFloat,hint:"Scale when link is pressed (lower = more dramatic press)",onChange(e,a){document.documentElement.style.setProperty("--link-impact-scale",a+"")}},{id:"linkImpactBlur",label:"Impact Blur",stateKey:"linkImpactBlur",type:"range",min:0,max:20,step:.5,default:10,format:e=>e.toFixed(1)+"px",parse:parseFloat,hint:"Blur amount when link is pressed (creates depth effect)",onChange(e,a){document.documentElement.style.setProperty("--link-impact-blur",a+"px")}},{id:"linkImpactDuration",label:"Impact Duration",stateKey:"linkImpactDuration",type:"range",min:50,max:300,step:10,default:150,format:e=>Math.round(e)+"ms",parse:e=>parseInt(e,10),hint:"Duration of press animation (fast and subtle)",onChange(e,a){document.documentElement.style.setProperty("--link-impact-duration",a+"ms")}},{id:"hoverSnapEnabled",label:"Hover Snap",stateKey:"hoverSnapEnabled",type:"checkbox",default:!0,hint:"Hover targets: a tiny ‚Äúsnap onto‚Äù bounce on hover entry (scale-only; color stays instant).",onChange(e,a){document.documentElement.style.setProperty("--abs-hover-snap-enabled",a?"1":"0")}},{id:"hoverSnapDuration",label:"Snap Duration",stateKey:"hoverSnapDuration",type:"range",min:0,max:1200,step:10,default:450,format:e=>Math.round(e)+"ms",parse:e=>parseInt(e,10),hint:"Total duration of the hover snap bounce (ms).",onChange(e,a){document.documentElement.style.setProperty("--abs-hover-snap-duration",Math.max(0,Math.round(a))+"ms")}},{id:"hoverSnapOvershoot",label:"Snap Overshoot",stateKey:"hoverSnapOvershoot",type:"range",min:1,max:1.25,step:.005,default:1.08,format:e=>e.toFixed(3),parse:parseFloat,hint:"Peak scale during hover snap (>= 1.0).",onChange(e,a){document.documentElement.style.setProperty("--abs-hover-snap-overshoot",a+"")}},{id:"hoverSnapUndershoot",label:"Snap Recoil",stateKey:"hoverSnapUndershoot",type:"range",min:.8,max:1,step:.005,default:.98,format:e=>e.toFixed(3),parse:parseFloat,hint:"Small recoil scale before settling back to 1.0 (<= 1.0).",onChange(e,a){document.documentElement.style.setProperty("--abs-hover-snap-undershoot",a+"")}}]},scene:{title:"Scene Impact",icon:"üé¨",defaultOpen:!1,controls:[{id:"sceneImpactEnabled",label:"Enabled",stateKey:"sceneImpactEnabled",type:"checkbox",default:!0,hint:"If disabled, mode changes will not animate the scene."},{id:"sceneImpactMul",label:"Click Depth",stateKey:"sceneImpactMul",type:"range",min:0,max:.05,step:.001,default:.01,format:e=>e.toFixed(3),parse:parseFloat,hint:"How far the entire scene ‚Äúpresses in‚Äù on simulation change.",onChange(e,a){const t=document.getElementById("abs-scene");if(!t)return;const n=e||{},r=+n.sceneImpactMobileMulFactor;t.style.setProperty("--abs-scene-impact-mul",+a*((n.isMobile||n.isMobileViewport)&&Number.isFinite(r)&&r>0?r:1)+"")}},{id:"sceneImpactLogoCompMul",label:"Logo Comp",stateKey:"sceneImpactLogoCompMul",type:"range",min:.25,max:6,step:.05,default:3.6,format:e=>e.toFixed(2)+"x",parse:parseFloat,hint:'How strongly the logo counter-scales against the scene press (higher = logo feels more "anchored").',onChange(e,a){const t=document.getElementById("abs-scene");if(!t)return;const n=+a;t.style.setProperty("--abs-scene-impact-logo-comp-mul",(Number.isFinite(n)&&n>0?n:1)+"")}},{id:"sceneImpactMobileMulFactor",label:"Mobile Depth √ó",stateKey:"sceneImpactMobileMulFactor",type:"range",min:.25,max:3,step:.05,default:1,format:e=>e.toFixed(2)+"x",parse:parseFloat,hint:"Multiplier applied to Click Depth on mobile-sized viewports.",onChange(e,a){const t=document.getElementById("abs-scene");if(!t)return;const n=e||{},r=+n.sceneImpactMul,l=+a;t.style.setProperty("--abs-scene-impact-mul",(Number.isFinite(r)?r:0)*((n.isMobile||n.isMobileViewport)&&Number.isFinite(l)&&l>0?l:1)+"")}},{id:"sceneImpactPressMs",label:"Press",stateKey:"sceneImpactPressMs",type:"range",min:20,max:300,step:5,default:90,format:e=>Math.round(e)+"ms",parse:e=>parseInt(e,10),hint:"Press-in duration."},{id:"sceneImpactReleaseMs",label:"Release",stateKey:"sceneImpactReleaseMs",type:"range",min:40,max:1200,step:10,default:310,format:e=>Math.round(e)+"ms",parse:e=>parseInt(e,10),hint:"Release duration (‚Äúbounce out‚Äù length)."},{id:"sceneImpactAnticipation",label:"Anticipation",stateKey:"sceneImpactAnticipation",type:"range",min:0,max:.6,step:.01,default:0,format:e=>e.toFixed(2),parse:parseFloat,hint:"Micro pre-pop before the click-in (0 = off)."},{id:"sceneChangeSoundEnabled",label:"Scene Sound",stateKey:"sceneChangeSoundEnabled",type:"checkbox",default:!0,hint:"Plays a soft ‚Äúpebble-like‚Äù tick when switching simulations (only if sound is enabled)."},{id:"sceneChangeSoundIntensity",label:"Scene Sound Intensity",stateKey:"sceneChangeSoundIntensity",type:"range",min:0,max:1,step:.01,default:.35,format:e=>e.toFixed(2),parse:parseFloat},{id:"sceneChangeSoundRadius",label:"Scene Sound Pitch",stateKey:"sceneChangeSoundRadius",type:"range",min:6,max:60,step:1,default:18,format:e=>""+Math.round(e),parse:e=>parseInt(e,10),hint:"Higher = lower pitch (maps like ‚Äúball size‚Äù)."}]},overlay:{title:"Depth & Blur",icon:"üå´Ô∏è",defaultOpen:!1,controls:[{id:"modalOverlayEnabled",label:"Enabled",stateKey:"modalOverlayEnabled",type:"checkbox",default:!0},{id:"modalOverlayOpacity",label:"White Wash",stateKey:"modalOverlayOpacity",type:"range",min:0,max:.1,step:.001,default:.01,format:e=>e.toFixed(3),parse:parseFloat,onChange(e,a){import("./shared.js").then(e=>e.aJ).then(({updateOverlayOpacity:e})=>{e(a)})}},{id:"modalOverlayBlurPx",label:"Blur Amount",stateKey:"modalOverlayBlurPx",type:"range",min:0,max:30,step:.5,default:8,format:e=>e.toFixed(1)+"px",parse:parseFloat,hint:"Backdrop blur strength (0 = off)",onChange(e,a){import("./shared.js").then(e=>e.aJ).then(({updateOverlayBlur:e})=>{e(a)})}},{id:"modalOverlayTransitionMs",label:"Anim In Speed",stateKey:"modalOverlayTransitionMs",type:"range",min:200,max:1500,step:50,default:800,format:e=>Math.round(e)+"ms",parse:e=>parseInt(e,10),hint:"Duration for blur & depth zoom when opening",onChange(e,a){import("./shared.js").then(e=>e.aJ).then(({updateOverlayTransition:e})=>{e(a)})}},{id:"modalOverlayTransitionOutMs",label:"Anim Out Speed",stateKey:"modalOverlayTransitionOutMs",type:"range",min:200,max:1200,step:50,default:600,format:e=>Math.round(e)+"ms",parse:e=>parseInt(e,10),hint:"Duration for blur & depth zoom when closing",onChange(e,a){import("./shared.js").then(e=>e.aJ).then(({updateOverlayTransitionOut:e})=>{e(a)})}},{id:"modalOverlayContentDelayMs",label:"Content Delay",stateKey:"modalOverlayContentDelayMs",type:"range",min:0,max:1e3,step:50,default:200,format:e=>Math.round(e)+"ms",parse:e=>parseInt(e,10),hint:"Wait before showing dialog content",onChange(e,a){import("./shared.js").then(e=>e.aJ).then(({updateGateContentDelay:e})=>{e(a)})}},{id:"modalDepthScale",label:"Depth Scale",stateKey:"modalDepthScale",type:"range",min:.9,max:1,step:.001,default:.96,format:e=>e.toFixed(3),parse:parseFloat,hint:"Scene scale when gate opens (0.9-1.0)",onChange(e,a){import("./shared.js").then(e=>e.aJ).then(({updateGateDepthScale:e})=>{e(a)})}},{id:"gateDepthTranslateY",label:"Depth Shift",stateKey:"modalDepthTranslateY",type:"range",min:0,max:30,step:1,default:8,format:e=>Math.round(e)+"px",parse:parseInt,hint:"Vertical shift when gate opens",onChange(e,a){import("./shared.js").then(e=>e.aJ).then(({updateGateDepthTranslateY:e})=>{e(a)})}},{id:"logoBlurInactive",label:"Logo Blur Closed",stateKey:"logoBlurInactive",type:"range",min:0,max:20,step:.5,default:0,format:e=>e.toFixed(1)+"px",parse:parseFloat,hint:"Logo blur when gate is closed (0 = sharp)",onChange(e,a){import("./shared.js").then(e=>e.aJ).then(({updateLogoBlurInactive:e})=>{e(a)})}},{id:"logoBlurActive",label:"Logo Blur Open",stateKey:"logoBlurActive",type:"range",min:0,max:30,step:.5,default:12,format:e=>e.toFixed(1)+"px",parse:parseFloat,hint:"Logo blur when gate is active (12px = soft blur)",onChange(e,a){import("./shared.js").then(e=>e.aJ).then(({updateLogoBlurActive:e})=>{e(a)})}}]},colors:{title:"Color & Surface",icon:"üé®",defaultOpen:!1,controls:[{type:"divider",label:"Backgrounds"},{id:"bgLight",label:"Light Mode",stateKey:"bgLight",type:"color",default:"#f5f5f5",hint:"Background color for light mode",onChange(e,a){document.documentElement.style.setProperty("--bg-light",a)}},{id:"bgDark",label:"Dark Mode",stateKey:"bgDark",type:"color",default:"#0a0a0a",hint:"Background color for dark mode",onChange(e,a){document.documentElement.style.setProperty("--bg-dark",a)}},{type:"divider",label:"Text ¬∑ Light Mode"},{id:"textColorLight",label:"Primary",stateKey:"textColorLight",type:"color",default:"#161616",hint:"Main text color in light mode",onChange(e,a){document.documentElement.style.setProperty("--text-color-light",a)}},{id:"textColorLightMuted",label:"Muted",stateKey:"textColorLightMuted",type:"color",default:"#2f2f2f",hint:"Secondary/muted text in light mode",onChange(e,a){document.documentElement.style.setProperty("--text-color-light-muted",a)}},{type:"divider",label:"Text ¬∑ Dark Mode"},{id:"textColorDark",label:"Primary",stateKey:"textColorDark",type:"color",default:"#b3b3b3",hint:"Main text color in dark mode",onChange(e,a){document.documentElement.style.setProperty("--text-color-dark",a)}},{id:"textColorDarkMuted",label:"Muted",stateKey:"textColorDarkMuted",type:"color",default:"#808080",hint:"Secondary/muted text in dark mode",onChange(e,a){document.documentElement.style.setProperty("--text-color-dark-muted",a)}},{type:"divider",label:"Links"},{id:"linkHoverColor",label:"Hover Accent",stateKey:"linkHoverColor",type:"color",default:"#ff4013",hint:"Link hover color (accent)",onChange(e,a){document.documentElement.style.setProperty("--link-hover-color",a)}},{type:"divider",label:"Logo"},{id:"topLogoWidthVw",label:"Logo Size",stateKey:"topLogoWidthVw",type:"range",min:15,max:45,step:.25,default:35,format:e=>parseFloat(e).toFixed(2)+"vw",parse:parseFloat,hint:"Top-center logo width (clamped by min/max tokens).",onChange(e,a){document.documentElement.style.setProperty("--top-logo-width-vw",a+"")}}]},colorDistribution:{title:"Palette Mix",icon:"üß©",defaultOpen:!1,controls:[{id:"colorDistribution",label:"Disciplines",stateKey:"colorDistribution",type:"colorDistribution",labels:["Product & Systems","Interaction & Motion","Creative Technology","AI-Driven Design","Experience Direction","Art & Visual Direction","Prototyping"],hint:"Assign each discipline to a palette color, then set weights that sum to 100%. Used for all ball spawns across modes."}]},wall:{title:"WALL",icon:"ü´ß",defaultOpen:!1,controls:[{id:"frameColorLight",label:"Color ¬∑ Light Mode",stateKey:"frameColorLight",type:"color",default:"#242529",hint:"Wall color (unified across all modes, also used for browser chrome)",onChange(e,a){const t=document.documentElement;t.style.setProperty("--frame-color",a),t.style.setProperty("--frame-color-light",a),t.style.setProperty("--frame-color-dark",a),t.style.setProperty("--wall-color",a),t.style.setProperty("--wall-color-light",a),t.style.setProperty("--wall-color-dark",a),t.style.setProperty("--chrome-bg",a),t.style.setProperty("--chrome-bg-light",a),t.style.setProperty("--chrome-bg-dark",a),e.frameColor=a,e.frameColorLight=a,e.frameColorDark=a;const n=document.querySelector('meta[name="theme-color"]:not([media])');n&&(n.content=a);const r=document.querySelector('meta[name="theme-color"][media="(prefers-color-scheme: light)"]');r&&(r.content=a);const l=document.querySelector('meta[name="theme-color"][media="(prefers-color-scheme: dark)"]');l&&(l.content=a),import("./shared.js").then(e=>e.aL).then(e=>{e.syncChromeColor()})}},{id:"frameColorDark",label:"Color ¬∑ Dark Mode",stateKey:"frameColorDark",type:"color",default:"#242529",hint:"Wall color (unified across all modes, also used for browser chrome)",onChange(e,a){const t=document.documentElement;t.style.setProperty("--frame-color",a),t.style.setProperty("--frame-color-light",a),t.style.setProperty("--frame-color-dark",a),t.style.setProperty("--wall-color",a),t.style.setProperty("--wall-color-light",a),t.style.setProperty("--wall-color-dark",a),t.style.setProperty("--chrome-bg",a),t.style.setProperty("--chrome-bg-light",a),t.style.setProperty("--chrome-bg-dark",a),e.frameColor=a,e.frameColorLight=a,e.frameColorDark=a;const n=document.querySelector('meta[name="theme-color"]:not([media])');n&&(n.content=a);const r=document.querySelector('meta[name="theme-color"][media="(prefers-color-scheme: light)"]');r&&(r.content=a);const l=document.querySelector('meta[name="theme-color"][media="(prefers-color-scheme: dark)"]');l&&(l.content=a),import("./shared.js").then(e=>e.aL).then(e=>{e.syncChromeColor()})}},{id:"wallPreset",label:"Wall Preset",stateKey:"wallPreset",type:"select",options:Object.entries(v).map(([e,a])=>({value:e,label:a?.label?a.label:e})),default:"pudding",format:e=>e+"",onChange(e,a){S(a+"",e),m({runOnChange:!1});try{M?.reset?.()}catch(t){}try{const a=Array.isArray(e?.balls)?e.balls:[];for(let e=0;a.length>e;e++)a[e]?.wake?.()}catch(t){}try{const e=document.getElementById("wallPresetSlider");e&&"function"==typeof e.blur?e.blur():document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()}catch(t){}},hint:"Curated wall ‚Äútypes‚Äù that set multiple wall sliders at once."},{id:"wallThicknessVw",label:"Wall Thickness",stateKey:"wallThicknessVw",type:"range",min:0,max:8,step:.1,default:1.3,format:e=>e.toFixed(1)+"vw",parse:parseFloat,hint:"Wall tube thickness (content padding is layout-only)",onChange(){import("./shared.js").then(e=>e.aF).then(e=>{e.applyLayoutFromVwToPx(),e.applyLayoutCSSVars(),import("./shared.js").then(e=>e.aJ).then(({updateBlurFromWallThickness:e})=>{e()})})}},{id:"wallThicknessAreaMultiplier",label:"Area Scaling",stateKey:"wallThicknessAreaMultiplier",type:"range",min:0,max:2,step:.01,default:0,format:e=>e.toFixed(2)+"√ó",parse:parseFloat,hint:"Area-based scaling multiplier (0.0 = vw-only, 1.0 = full area scaling, >1.0 = exaggerated)",onChange(){import("./shared.js").then(e=>e.aF).then(e=>{e.applyLayoutFromVwToPx(),e.applyLayoutCSSVars(),import("./shared.js").then(e=>e.aJ).then(({updateBlurFromWallThickness:e})=>{e()})})}},{id:"wallRadiusVw",label:"Corner Radius",stateKey:"wallRadiusVw",type:"range",min:0,max:12,step:.1,default:3.7,format:e=>e.toFixed(1)+"vw",parse:parseFloat,onChange(){import("./shared.js").then(e=>e.aF).then(e=>{e.applyLayoutFromVwToPx(),e.applyLayoutCSSVars()})}},{id:"wallInset",label:"Collision Inset",stateKey:"wallInset",type:"range",min:0,max:20,step:1,default:2,format:e=>e+"px",parse:e=>parseInt(e,10),hint:"Physics padding inside the visual wall"},{id:"mobileWallThicknessXFactor",label:"Mobile L/R Thickness",stateKey:"mobileWallThicknessXFactor",type:"range",min:.5,max:3,step:.05,default:1.4,format:e=>e.toFixed(2)+"√ó",parse:parseFloat,hint:"Wall thickness multiplier for LEFT/RIGHT sides on mobile",onChange(){import("./shared.js").then(e=>e.aF).then(e=>{e.applyLayoutFromVwToPx(),e.applyLayoutCSSVars()})}},{id:"mobileEdgeLabelsVisible",label:"Mobile Edge Labels",stateKey:"mobileEdgeLabelsVisible",type:"toggle",default:!0,hint:"Show side edge labels on mobile (chapter/copyright)",onChange(){import("./shared.js").then(e=>e.aF).then(e=>{e.applyLayoutCSSVars()})}},{id:"mobileEdgeLabelSizeFactor",label:"Mobile Label Size",stateKey:"mobileEdgeLabelSizeFactor",type:"range",min:.3,max:2,step:.05,default:.85,format:e=>e.toFixed(2)+"√ó",parse:parseFloat,hint:"Font size multiplier for edge labels on mobile",onChange(){import("./shared.js").then(e=>e.aF).then(e=>{e.applyLayoutCSSVars()})}},{id:"mobileEdgeLabelOpacity",label:"Mobile Label Opacity",stateKey:"mobileEdgeLabelOpacity",type:"range",min:0,max:1,step:.05,default:.5,format:e=>(100*e).toFixed(0)+"%",parse:parseFloat,hint:"Opacity for edge labels on mobile",onChange(){import("./shared.js").then(e=>e.aF).then(e=>{e.applyLayoutCSSVars()})}},{id:"wallWobbleMaxDeform",label:"Deformation",stateKey:"wallWobbleMaxDeform",type:"range",min:10,max:150,step:5,default:60,format:e=>e+"px",parse:e=>parseInt(e,10),group:"Wall Material",groupLayout:"grid-2col",hint:"Max flex distance. Low = rigid, High = soft"},{id:"wallWobbleStiffness",label:"Stiffness",stateKey:"wallWobbleStiffness",type:"range",min:50,max:3e3,step:10,default:120,format:e=>e+"",parse:e=>parseInt(e,10),group:"Wall Material",hint:"Spring strength. Low = soft, High = firm"},{id:"restitution",label:"Bounce",stateKey:"restitution",type:"range",min:.3,max:.95,step:.05,default:.7,format:e=>Math.round(100*e)+"%",parse:parseFloat,group:"Wall Material",hint:"Energy kept on bounce. 100% = elastic, 30% = soft"},{id:"wallWobbleDamping",label:"Damping",stateKey:"wallWobbleDamping",type:"range",min:0,max:80,step:1,default:35,format:e=>e+"",parse:e=>parseInt(e,10),group:"Wall Material",hint:"Oscillation decay. High = viscous/slow"},{id:"wallWobbleSigma",label:"Impact Spread",stateKey:"wallWobbleSigma",type:"range",min:.5,max:6,step:.1,default:2,format:e=>e.toFixed(1),parse:parseFloat,group:"Wall Material",hint:"Blob size. High = pudding, Low = rubber"},{id:"wallWobbleSettlingSpeed",label:"Settle Speed",stateKey:"wallWobbleSettlingSpeed",type:"range",min:0,max:100,step:1,default:75,format:e=>e+"%",parse:e=>parseInt(e,10),group:"Wall Material",hint:"Snap-to-flat aggression when still"},{id:"wallWobbleCornerClamp",label:"Corner Stiffness",stateKey:"wallWobbleCornerClamp",type:"range",min:0,max:1,step:.01,default:.6,format:e=>e.toFixed(2),parse:parseFloat,group:"Wall Behavior",groupLayout:"grid-2col",groupCollapsed:!0,hint:"1.0 = locked corners, 0 = flexible corners"},{id:"wallWobbleImpactThreshold",label:"Impact Gate",stateKey:"wallWobbleImpactThreshold",type:"range",min:20,max:200,step:1,default:140,format:e=>e+" px/s",parse:e=>parseInt(e,10),group:"Wall Behavior",hint:"Min impact speed to trigger deformation"},{id:"wallWobbleMaxVel",label:"Max Wall Speed",stateKey:"wallWobbleMaxVel",type:"range",min:100,max:2e3,step:10,default:800,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),group:"Performance Caps",groupLayout:"grid-2col",groupCollapsed:!0,hint:"Velocity cap to prevent erratic spikes"},{id:"wallWobbleMaxImpulse",label:"Max Impulse",stateKey:"wallWobbleMaxImpulse",type:"range",min:20,max:600,step:5,default:220,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),group:"Performance Caps",hint:"Per-sample impact cap for smoother behavior"},{id:"wallWobbleMaxEnergyPerStep",label:"Max Energy/Tick",stateKey:"wallWobbleMaxEnergyPerStep",type:"range",min:1e3,max:8e4,step:500,default:2e4,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),group:"Performance Caps",hint:"Safety budget to prevent runaway spikes"},{id:"wallPhysicsSamples",label:"Physics Samples",stateKey:"wallPhysicsSamples",type:"range",min:8,max:96,step:1,default:48,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),group:"Performance",groupCollapsed:!0,hint:"Visual-only. Lower = faster, higher = smoother blobs."},{id:"wallPhysicsSkipInactive",label:"Skip When Still",stateKey:"wallPhysicsSkipInactive",type:"toggle",default:!0,group:"Performance",hint:"Stops integrating the wall when it's already at rest."},{id:"wallRenderDecimation",label:"Render Detail",stateKey:"wallRenderDecimation",type:"range",min:1,max:12,step:1,default:2,format:e=>""+Math.round(e),parse:e=>parseInt(e,10),group:"Performance",hint:"1=ultra smooth, 2=default, 4=faster, 12=very fast/polygonal (rendering only)."}]},noise:{title:"Grain",icon:"üßÇ",defaultOpen:!1,controls:[{id:"noiseEnabled",label:"Enabled",stateKey:"noiseEnabled",type:"checkbox",default:!0,format:e=>e?"On":"Off",parse:e=>!!e,group:"Render",hint:"Procedural noise texture (no GIF).",onChange:(e,a)=>g({noiseEnabled:a})},{id:"noiseSeed",label:"Seed",stateKey:"noiseSeed",type:"range",min:0,max:999999,step:1,default:1337,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),group:"Texture",hint:"Changes the generated grain pattern.",onChange:(e,a)=>g({noiseSeed:a})},{id:"noiseTextureSize",label:"Tile Size",stateKey:"noiseTextureSize",type:"range",min:64,max:512,step:32,default:256,format:e=>Math.round(e)+" px",parse:e=>parseInt(e,10),group:"Texture",hint:"Bigger tiles reduce repetition but cost more memory.",onChange:(e,a)=>g({noiseTextureSize:a})},{id:"noiseDistribution",label:"Distribution",stateKey:"noiseDistribution",type:"select",options:[{value:"gaussian",label:"Gaussian (filmic)"},{value:"uniform",label:"Uniform (flat)"}],default:"gaussian",format:e=>e+"",parse:e=>e+"",group:"Texture",onChange:(e,a)=>g({noiseDistribution:a})},{id:"noiseMonochrome",label:"Monochrome",stateKey:"noiseMonochrome",type:"checkbox",default:!0,format:e=>e?"On":"Off",parse:e=>!!e,group:"Texture",hint:"Off = subtle RGB grain.",onChange:(e,a)=>g({noiseMonochrome:a})},{id:"noiseChroma",label:"Chroma",stateKey:"noiseChroma",type:"range",min:0,max:1,step:.01,default:.9,format:e=>Math.round(100*e)+"%",parse:parseFloat,group:"Texture",hint:"How different R/G/B channels are (ignored when Monochrome is on).",onChange:(e,a)=>g({noiseChroma:a})},{id:"noiseSize",label:"Grain Size",stateKey:"noiseSize",type:"range",min:20,max:600,step:5,default:85,format:e=>Math.round(e)+" px",parse:e=>parseInt(e,10),group:"Layer",onChange:(e,a)=>g({noiseSize:a})},{id:"noiseOpacityLight",label:"Opacity (Light)",stateKey:"noiseOpacityLight",type:"range",min:0,max:1,step:.01,default:.08,format:e=>Math.round(100*e)+"%",parse:parseFloat,group:"Layer",onChange:(e,a)=>g({noiseOpacityLight:a})},{id:"noiseOpacityDark",label:"Opacity (Dark)",stateKey:"noiseOpacityDark",type:"range",min:0,max:1,step:.01,default:.12,format:e=>Math.round(100*e)+"%",parse:parseFloat,group:"Layer",onChange:(e,a)=>g({noiseOpacityDark:a})},{id:"noiseBlendMode",label:"Blend Mode",stateKey:"noiseBlendMode",type:"select",options:[{value:"normal",label:"Normal (Off)"},{value:"multiply",label:"Multiply"},{value:"screen",label:"Screen"},{value:"overlay",label:"Overlay"},{value:"darken",label:"Darken"},{value:"lighten",label:"Lighten"},{value:"color-dodge",label:"Color Dodge"},{value:"color-burn",label:"Color Burn"},{value:"hard-light",label:"Hard Light"},{value:"soft-light",label:"Soft Light"},{value:"difference",label:"Difference"},{value:"exclusion",label:"Exclusion"}],default:"normal",format:e=>e+"",parse:e=>e+"",group:"Layer",onChange:(e,a)=>g({noiseBlendMode:a})},{id:"noiseColorLight",label:"Color (Light)",stateKey:"noiseColorLight",type:"color",default:"#ffffff",format:e=>e+"",parse:e=>e+"",group:"Layer",onChange:(e,a)=>g({noiseColorLight:a})},{id:"noiseColorDark",label:"Color (Dark)",stateKey:"noiseColorDark",type:"color",default:"#ffffff",format:e=>e+"",parse:e=>e+"",group:"Layer",onChange:(e,a)=>g({noiseColorDark:a})},{id:"noiseMotion",label:"Motion",stateKey:"noiseMotion",type:"select",options:[{value:"jitter",label:"Jitter (film grain)"},{value:"drift",label:"Drift (slow pan)"},{value:"static",label:"Static"}],default:"jitter",format:e=>e+"",parse:e=>e+"",group:"Motion",onChange:(e,a)=>g({noiseMotion:a})},{id:"noiseMotionAmount",label:"Motion Amount",stateKey:"noiseMotionAmount",type:"range",min:0,max:2.5,step:.01,default:1,format:e=>e.toFixed(2)+"x",parse:parseFloat,group:"Motion",onChange:(e,a)=>g({noiseMotionAmount:a})},{id:"noiseSpeedMs",label:"Speed",stateKey:"noiseSpeedMs",type:"range",min:0,max:1e4,step:50,default:1100,format:e=>Math.round(e)+" ms",parse:e=>parseInt(e,10),group:"Motion",onChange:(e,a)=>g({noiseSpeedMs:a})},{id:"noiseSpeedVariance",label:"Timing Variance",stateKey:"noiseSpeedVariance",type:"range",min:0,max:1,step:.01,default:0,format:e=>Math.round(100*e)+"%",parse:parseFloat,group:"Motion",hint:"Adds randomness to animation timing (0 = no variance, 1 = max variance)",onChange:(e,a)=>g({noiseSpeedVariance:a})},{id:"noiseFlicker",label:"Flicker",stateKey:"noiseFlicker",type:"range",min:0,max:1,step:.01,default:.12,format:e=>Math.round(100*e)+"%",parse:parseFloat,group:"Motion",onChange:(e,a)=>g({noiseFlicker:a})},{id:"noiseFlickerSpeedMs",label:"Flicker Speed",stateKey:"noiseFlickerSpeedMs",type:"range",min:0,max:5e3,step:20,default:220,format:e=>Math.round(e)+" ms",parse:e=>parseInt(e,10),group:"Motion",onChange:(e,a)=>g({noiseFlickerSpeedMs:a})},{id:"noiseBlurPx",label:"Blur",stateKey:"noiseBlurPx",type:"range",min:0,max:6,step:.05,default:0,format:e=>e.toFixed(2)+" px",parse:parseFloat,group:"Look",onChange:(e,a)=>g({noiseBlurPx:a})},{id:"noiseContrast",label:"Contrast",stateKey:"noiseContrast",type:"range",min:.25,max:3,step:.05,default:1.35,format:e=>e.toFixed(2)+"x",parse:parseFloat,group:"Look",onChange:(e,a)=>g({noiseContrast:a})},{id:"noiseBrightness",label:"Brightness",stateKey:"noiseBrightness",type:"range",min:.25,max:2,step:.01,default:1,format:e=>e.toFixed(2)+"x",parse:parseFloat,group:"Look",onChange:(e,a)=>g({noiseBrightness:a})},{id:"noiseSaturation",label:"Saturation",stateKey:"noiseSaturation",type:"range",min:0,max:3,step:.01,default:1,format:e=>e.toFixed(2)+"x",parse:parseFloat,group:"Look",onChange:(e,a)=>g({noiseSaturation:a})},{id:"noiseHue",label:"Hue Rotate",stateKey:"noiseHue",type:"range",min:0,max:360,step:1,default:0,format:e=>Math.round(e)+"¬∞",parse:e=>parseInt(e,10),group:"Look",onChange:(e,a)=>g({noiseHue:a})}]},critters:{title:"Critters",icon:"ü™≤",mode:"critters",defaultOpen:!1,controls:[{id:"critterCount",label:"Count",stateKey:"critterCount",type:"range",min:10,max:260,step:5,default:90,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"critterSpeed",label:"Speed",stateKey:"critterSpeed",type:"range",min:0,max:1800,step:10,default:680,format:e=>""+Math.round(e),parse:parseFloat},{id:"critterMaxSpeed",label:"Max Speed",stateKey:"critterMaxSpeed",type:"range",min:200,max:4e3,step:25,default:1400,format:e=>""+Math.round(e),parse:parseFloat},{id:"critterStepHz",label:"Step Rate",stateKey:"critterStepHz",type:"range",min:0,max:16,step:.1,default:5,format:e=>e.toFixed(1)+" Hz",parse:parseFloat},{id:"critterStepSharpness",label:"Step Sharpness",stateKey:"critterStepSharpness",type:"range",min:.5,max:6,step:.1,default:2.4,format:e=>e.toFixed(1),parse:parseFloat},{id:"critterTurnNoise",label:"Wander",stateKey:"critterTurnNoise",type:"range",min:0,max:8,step:.1,default:2.2,format:e=>e.toFixed(1),parse:parseFloat},{id:"critterTurnDamp",label:"Turn Inertia",stateKey:"critterTurnDamp",type:"range",min:.5,max:30,step:.5,default:10,format:e=>e.toFixed(1),parse:parseFloat},{id:"critterTurnSeek",label:"Steering",stateKey:"critterTurnSeek",type:"range",min:0,max:30,step:.5,default:10,format:e=>e.toFixed(1),parse:parseFloat},{id:"critterAvoidRadius",label:"Avoid Radius",stateKey:"critterAvoidRadius",type:"range",min:0,max:260,step:5,default:90,format:e=>Math.round(e)+"px",parse:parseFloat},{id:"critterAvoidForce",label:"Avoid Force",stateKey:"critterAvoidForce",type:"range",min:0,max:25e3,step:250,default:9500,format:e=>Math.round(e)+"",parse:parseFloat},{id:"critterEdgeAvoid",label:"Edge Avoid",stateKey:"critterEdgeAvoid",type:"range",min:0,max:3,step:.05,default:1,format:e=>e.toFixed(2)+"x",parse:parseFloat},{id:"critterMousePull",label:"Mouse Fear",stateKey:"critterMousePull",type:"range",min:0,max:4,step:.05,default:1,format:e=>e.toFixed(2)+"x",parse:parseFloat,hint:"Flee strength inside the mouse zone"},{id:"critterMouseRadiusVw",label:"Mouse Zone",stateKey:"critterMouseRadiusVw",type:"range",min:0,max:80,step:1,default:30,format:e=>Math.round(e)+"vw",parse:parseFloat},{id:"critterRestitution",label:"Bounciness",stateKey:"critterRestitution",type:"range",min:0,max:.6,step:.01,default:.18,format:e=>e.toFixed(2),parse:parseFloat,hint:"Mode-only override",onChange(e,a){"critters"===e.currentMode&&(e.REST=a)}},{id:"critterFriction",label:"Friction",stateKey:"critterFriction",type:"range",min:0,max:.06,step:.001,default:.018,format:e=>e.toFixed(3),parse:parseFloat,hint:"Mode-only override",onChange(e,a){"critters"===e.currentMode&&(e.FRICTION=a)}},a("crittersWarmupFrames")]},pit:{title:"Ball Pit",icon:"üéØ",mode:"pit",defaultOpen:!1,controls:[{id:"gravityPit",label:"Gravity",stateKey:"gravityMultiplierPit",type:"range",min:0,max:2,step:.05,default:1.1,format:e=>e.toFixed(2),parse:parseFloat,onChange(e,a){"pit"===e.currentMode&&(e.G=e.GE*a)}},{id:"repelPower",label:"Repel Power",stateKey:"repelPower",type:"range",min:0,max:1e4,step:100,default:8500,format:e=>""+Math.round(e),parse:parseFloat,onChange(e,a){e.repelPower=24e3*Math.pow(2,12*(Math.max(0,Math.min(1e4,a))/1e4-.5))}},{id:"sleepVelocityThreshold",label:"Sleep Speed",stateKey:"sleepVelocityThreshold",type:"range",min:0,max:40,step:.5,default:12,format:e=>(+e).toFixed(1)+" px/s",parse:parseFloat,hint:"Pit modes only. Higher = settles sooner."},{id:"sleepAngularThreshold",label:"Sleep Spin",stateKey:"sleepAngularThreshold",type:"range",min:0,max:1,step:.01,default:.18,format:e=>(+e).toFixed(2)+" rad/s",parse:parseFloat,hint:"Pit modes only. Higher = stops spinning sooner."},{id:"timeToSleep",label:"Sleep Time",stateKey:"timeToSleep",type:"range",min:.05,max:2,step:.05,default:.25,format:e=>(+e).toFixed(2)+"s",parse:parseFloat,hint:"Pit modes only. Lower = sleeps faster."},a("pitWarmupFrames")]},flies:{title:"Flies",icon:"üïäÔ∏è",mode:"flies",defaultOpen:!1,controls:[{id:"fliesBallCount",label:"Ball Count",stateKey:"fliesBallCount",type:"range",min:20,max:150,step:5,default:60,format:e=>e+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"attractPower",label:"Attraction",stateKey:"attractionPower",type:"range",min:100,max:8e3,step:50,default:5e3,format:e=>""+Math.round(e),parse:parseFloat},{id:"swarmSpeed",label:"Swarm Speed",stateKey:"swarmSpeed",type:"range",min:.2,max:5,step:.1,default:.4,format:e=>e.toFixed(1),parse:parseFloat},{id:"fliesSeparation",label:"Separation",stateKey:"fliesSeparation",type:"range",min:5e3,max:3e4,step:1e3,default:15e3,format:e=>""+Math.round(e),parse:parseFloat},a("fliesWarmupFrames")]},weightless:{title:"Zero-G",icon:"üåå",mode:"weightless",defaultOpen:!1,controls:[{id:"weightlessCount",label:"Ball Count",stateKey:"weightlessCount",type:"range",min:20,max:200,step:10,default:66,format:e=>e+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"weightlessSpeed",label:"Initial Speed",stateKey:"weightlessInitialSpeed",type:"range",min:100,max:600,step:25,default:250,format:e=>e.toFixed(0),parse:parseFloat,reinitMode:!0},{id:"weightlessBounce",label:"Bounce",stateKey:"weightlessBounce",type:"range",min:.5,max:1,step:.05,default:.7,format:e=>e.toFixed(2),parse:parseFloat},{id:"weightlessRepelPower",label:"Cursor Blast Power",stateKey:"weightlessRepelPower",type:"range",min:0,max:6e5,step:1e4,default:5e4,format:e=>""+Math.round(e),parse:parseFloat},{id:"weightlessRepelSoft",label:"Cursor Blast Falloff",stateKey:"weightlessRepelSoft",type:"range",min:.5,max:6,step:.1,default:5.4,format:e=>e.toFixed(1),parse:parseFloat},a("weightlessWarmupFrames")]},water:{title:"Water",icon:"üåä",mode:"water",defaultOpen:!1,controls:[{id:"waterBallCount",label:"Ball Count",stateKey:"waterBallCount",type:"range",min:200,max:1800,step:10,default:1e3,format:e=>e+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"waterDrag",label:"Water Resistance",stateKey:"waterDrag",type:"range",min:.001,max:.15,step:.001,default:.12,format:e=>e.toFixed(3),parse:parseFloat},{id:"waterRippleStrength",label:"Ripple Strength",stateKey:"waterRippleStrength",type:"range",min:1e3,max:15e3,step:500,default:6e3,format:e=>e.toFixed(0),parse:parseFloat},{id:"waterMotion",label:"Drift Strength",stateKey:"waterDriftStrength",type:"range",min:0,max:80,step:1,default:40,format:e=>e.toFixed(0),parse:parseFloat,onChange(e,a){e.waterInitialVelocity=5*a},reinitMode:!0},a("waterWarmupFrames")]},vortex:{title:"Electrons",icon:"‚öõÔ∏è",mode:"vortex",defaultOpen:!1,controls:[{id:"vortexBallCount",label:"Ball Count",stateKey:"vortexBallCount",type:"range",min:50,max:500,step:10,default:180,format:e=>e+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"vortexSwirl",label:"Orbital Strength",stateKey:"vortexSwirlStrength",type:"range",min:100,max:3e3,step:50,default:420,format:e=>e.toFixed(0),parse:parseFloat,tooltip:"Electromagnetic force strength binding electrons to nucleus"},{id:"vortexRadius",label:"Shell Radius",stateKey:"vortexRadius",type:"range",min:0,max:800,step:20,default:300,format:e=>0===e?"Auto-scale":e.toFixed(0)+"px",parse:parseFloat,tooltip:"Base radius for electron orbital shells (like atomic energy levels)"},{id:"vortexSpeedMultiplier",label:"Speed Multiplier",stateKey:"vortexSpeedMultiplier",type:"range",min:.1,max:3,step:.1,default:1,format:e=>e.toFixed(1),parse:parseFloat},{id:"vortexDepthVariation",label:"Depth Variation",stateKey:"vortexDepthVariation",type:"range",min:0,max:1,step:.05,default:.6,format:e=>(100*e).toFixed(0)+"%",parse:parseFloat,tooltip:"How much ball size changes with 3D depth (0 = no change, 1 = max variation)"},{id:"vortexSpiralTightness",label:"Spiral Tightness",stateKey:"vortexSpiralTightness",type:"range",min:0,max:1,step:.05,default:.5,format:e=>(100*e).toFixed(0)+"%",parse:parseFloat,tooltip:"How tightly balls spiral in 3D space (0 = flat orbit, 1 = tight spiral)"},{id:"vortexRotationDirection",label:"Rotation Direction",stateKey:"vortexRotationDirection",type:"range",min:-1,max:1,step:2,default:1,format:e=>1===e?"Counterclockwise":"Clockwise",parse:parseFloat},{id:"vortexDrag",label:"Drag",stateKey:"vortexDrag",type:"range",min:.001,max:.05,step:.001,default:.01,format:e=>e.toFixed(3),parse:parseFloat,tooltip:"Damping to stabilize orbital motion"},a("vortexWarmupFrames")]},"ping-pong":{title:"Ping Pong",icon:"üèì",mode:"ping-pong",defaultOpen:!1,controls:[{id:"pingPongBallCount",label:"Ball Count",stateKey:"pingPongBallCount",type:"range",min:10,max:100,step:5,default:35,format:e=>e+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"pingPongSpeed",label:"Ball Speed",stateKey:"pingPongSpeed",type:"range",min:200,max:1600,step:50,default:200,format:e=>e.toFixed(0),parse:parseFloat,reinitMode:!0},{id:"pingPongVerticalDamp",label:"Vertical Damping",stateKey:"pingPongVerticalDamp",type:"range",min:.8,max:.999,step:.001,default:.911,format:e=>e.toFixed(3),parse:parseFloat},a("pingPongWarmupFrames")]},magnetic:{title:"Magnetic",icon:"üß≤",mode:"magnetic",defaultOpen:!1,controls:[{id:"magneticBallCount",label:"Ball Count",stateKey:"magneticBallCount",type:"range",min:50,max:300,step:10,default:180,format:e=>e+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"magneticStrength",label:"Strength",stateKey:"magneticStrength",type:"range",min:1e4,max:1e5,step:5e3,default:65e3,format:e=>e.toFixed(0),parse:parseFloat,hint:"Magnetic attraction strength to cursor"},{id:"magneticRadius",label:"Magnetic Radius",stateKey:"magneticRadius",type:"range",min:0,max:600,step:20,default:0,format:e=>0===e?"Unlimited":Math.round(e)+"px",parse:parseFloat,hint:"Maximum distance for magnetic effect (0 = unlimited)"},{id:"magneticVelocity",label:"Max Velocity",stateKey:"magneticMaxVelocity",type:"range",min:500,max:4e3,step:100,default:2800,format:e=>e.toFixed(0),parse:parseFloat},{id:"magneticDamping",label:"Damping",stateKey:"magneticDamping",type:"range",min:.8,max:.999,step:.001,default:.998,format:e=>e.toFixed(3),parse:parseFloat},a("magneticWarmupFrames")]},bubbles:{title:"Bubbles",icon:"ü´ß",mode:"bubbles",defaultOpen:!1,controls:[{id:"bubblesRate",label:"Bubble Rate",stateKey:"bubblesSpawnRate",type:"range",min:1,max:20,step:1,default:16,format:e=>e+"",parse:e=>parseInt(e,10)},{id:"bubblesSpeed",label:"Rise Speed",stateKey:"bubblesRiseSpeed",type:"range",min:50,max:900,step:25,default:650,format:e=>e.toFixed(0),parse:parseFloat},{id:"bubblesWobble",label:"Wobble",stateKey:"bubblesWobble",type:"range",min:0,max:100,step:5,default:65,format:e=>e.toFixed(0),parse:parseFloat},{id:"bubblesMax",label:"Max Bubbles",stateKey:"bubblesMaxCount",type:"range",min:50,max:300,step:10,default:150,format:e=>e+"",parse:e=>parseInt(e,10)},a("bubblesWarmupFrames")]},tilt:{title:"Tilt",icon:"‚öñÔ∏è",mode:"tilt",defaultOpen:!1,controls:[{id:"tiltBallCount",label:"Particle Count",stateKey:"tiltBallCount",type:"range",min:100,max:500,step:10,default:300,format:e=>e+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"tiltMaxAngle",label:"Max Angle",stateKey:"tiltMaxAngle",type:"range",min:.5,max:10,step:.5,default:2,format:e=>e.toFixed(1)+"¬∞",parse:parseFloat},{id:"tiltLerpSpeed",label:"Smoothness",stateKey:"tiltLerpSpeed",type:"range",min:.01,max:.5,step:.01,default:.08,format:e=>e.toFixed(2),parse:parseFloat},{id:"tiltGlassMass",label:"Particle Mass",stateKey:"tiltGlassBallMass",type:"range",min:.02,max:.3,step:.01,default:.08,format:e=>e.toFixed(2)+"x",parse:parseFloat,reinitMode:!0},{id:"tiltFriction",label:"Friction",stateKey:"tiltFriction",type:"range",min:.002,max:.02,step:.001,default:.008,format:e=>e.toFixed(3),parse:parseFloat}]},kaleidoscope:{title:"Kaleidoscope",icon:"ü™û",mode:"kaleidoscope-3",defaultOpen:!1,controls:[{id:"kaleiBallCount",label:"Ball Count",stateKey:"kaleidoscope3BallCount",type:"range",min:12,max:300,step:3,default:150,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"kaleiWedges",label:"Wedges",stateKey:"kaleidoscope3Wedges",type:"range",min:3,max:24,step:1,default:10,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10)},{id:"kaleiMirror",label:"Mirror",type:"range",min:0,max:1,step:1,default:1,format:e=>e?"On":"Off",parse:e=>parseInt(e,10)},{id:"kaleiSpeed",label:"Speed",stateKey:"kaleidoscope3Speed",type:"range",min:.2,max:2,step:.05,default:1.2,format:e=>e.toFixed(2),parse:parseFloat},{id:"kaleiIdleDrift",label:"Idle Drift",stateKey:"kaleidoscopeIdleDrift",type:"range",min:0,max:.05,step:.002,default:.012,format:e=>(1e3*e).toFixed(0)+"‚Ä∞",parse:parseFloat,hint:"Subtle movement when idle; respects prefers-reduced-motion."},{id:"kaleiDotSizeVh",label:"Dot Size (vh)",stateKey:"kaleidoscope3DotSizeVh",type:"range",min:.2,max:2.5,step:.05,default:1.05,format:e=>e.toFixed(2)+"vh",parse:parseFloat,reinitMode:!0},{id:"kaleiDotAreaMul",label:"Dot Area",stateKey:"kaleidoscope3DotAreaMul",type:"range",min:.3,max:1.5,step:.05,default:.75,format:e=>e.toFixed(2)+"√ó",parse:parseFloat,reinitMode:!0},{id:"kaleiSpawnArea",label:"Spawn Density",stateKey:"kaleidoscope3SpawnAreaMul",type:"range",min:.2,max:2,step:.05,default:1.05,format:e=>e.toFixed(2)+"√ó",parse:parseFloat,reinitMode:!0},{id:"kaleiSizeVar",label:"Size Variance",stateKey:"kaleidoscope3SizeVariance",type:"range",min:0,max:1,step:.05,default:.5,format:e=>(100*e).toFixed(0)+"%",parse:parseFloat,reinitMode:!0},a("kaleidoscope3WarmupFrames")]},neural:{title:"Neural Network",icon:"üß†",mode:"neural",defaultOpen:!1,controls:[{id:"neuralBallCount",label:"Ball Count",stateKey:"neuralBallCount",type:"range",min:8,max:400,step:1,default:311,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"neuralLinkDistanceVw",label:"Link Distance",stateKey:"neuralLinkDistanceVw",type:"range",min:5,max:40,step:.5,default:5,format:e=>e.toFixed(1)+"vw",parse:parseFloat,tooltip:"Maximum distance for connections between nodes"},{id:"neuralLineOpacity",label:"Link Opacity",stateKey:"neuralLineOpacity",type:"range",min:0,max:.8,step:.02,default:.06,format:e=>e.toFixed(2),parse:parseFloat,tooltip:"Opacity of connector balls (legacy - now using connector density)"},{id:"neuralConnectorDensity",label:"Connector Density",stateKey:"neuralConnectorDensity",type:"range",min:0,max:10,step:1,default:3,format:e=>Math.round(e)+" balls",parse:e=>parseInt(e,10),tooltip:"Number of connector balls per connection (0 = no connectors)"},{id:"sizeVariationNeural",label:"Size Variation",stateKey:"sizeVariationNeural",type:"range",min:0,max:1,step:.05,default:.05,format:e=>e.toFixed(2),parse:parseFloat,reinitMode:!0},{id:"neuralWanderStrength",label:"Wander Strength",stateKey:"neuralWanderStrength",type:"range",min:0,max:2e3,step:10,default:1e3,format:e=>Math.round(e)+"",parse:parseFloat},{id:"neuralMouseStrength",label:"Mouse Attraction",stateKey:"neuralMouseStrength",type:"range",min:0,max:15e4,step:5e3,default:15e4,format:e=>Math.round(e/1e3)+"k",parse:parseFloat},{id:"neuralSeparationStrength",label:"Separation",stateKey:"neuralSeparationStrength",type:"range",min:0,max:3e4,step:500,default:11e3,format:e=>Math.round(e/1e3)+"k",parse:parseFloat,tooltip:"How strongly balls avoid each other (subtle spacing)"},{id:"neuralDamping",label:"Damping",stateKey:"neuralDamping",type:"range",min:.9,max:1,step:.002,default:.9,format:e=>e.toFixed(3),parse:parseFloat},a("neuralWarmupFrames")]},parallaxLinear:{title:"Parallax (Linear)",icon:"ü´ß",mode:"parallax-linear",defaultOpen:!1,controls:[{id:"parallaxLinearPreset",label:"Preset",stateKey:"parallaxLinearPreset",type:"select",options:Object.keys(h).map(e=>({value:e,label:h[e].label})),default:"default",format:e=>h[e]?.label||e,onChange(e){((e,a=!0)=>{const t=h[e];if(!t)return;const n=y();for(const[l,o]of Object.entries(t))"label"!==l&&void 0!==n[l]&&(n[l]=o);n.parallaxLinearPreset=e,a&&import("./shared.js").then(e=>e.aI).then(({resetCurrentMode:e})=>e());try{m()}catch(r){}console.log("Applied parallax linear preset: "+t.label)})(e,!0)}},{id:"parallaxLinearDotSizeMul",label:"Dot Size",stateKey:"parallaxLinearDotSizeMul",type:"range",min:.2,max:6,step:.1,default:1.8,format:e=>e.toFixed(1)+"√ó",parse:parseFloat,reinitMode:!0},{id:"sizeVariationParallaxLinear",label:"Size Variation",stateKey:"sizeVariationParallaxLinear",type:"range",min:0,max:1,step:.05,default:0,format:e=>e.toFixed(2),parse:parseFloat,reinitMode:!0},{id:"parallaxLinearGridX",label:"Grid X (Cols)",stateKey:"parallaxLinearGridX",type:"range",min:3,max:40,step:1,default:14,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"parallaxLinearGridY",label:"Grid Y (Rows)",stateKey:"parallaxLinearGridY",type:"range",min:3,max:40,step:1,default:10,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"parallaxLinearGridZ",label:"Grid Z (Layers)",stateKey:"parallaxLinearGridZ",type:"range",min:2,max:20,step:1,default:7,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"parallaxLinearSpanX",label:"Span X",stateKey:"parallaxLinearSpanX",type:"range",min:.2,max:8,step:.05,default:5,format:e=>e.toFixed(2)+"√ó",parse:parseFloat,reinitMode:!0,hint:"World-space width as a multiple of the viewport width. Use >1 to fill edge-to-edge."},{id:"parallaxLinearSpanY",label:"Span Y",stateKey:"parallaxLinearSpanY",type:"range",min:.2,max:3,step:.05,default:2.6,format:e=>e.toFixed(2)+"√ó",parse:parseFloat,reinitMode:!0,hint:"World-space height as a multiple of the viewport height."},{id:"parallaxLinearZNear",label:"Z Near",stateKey:"parallaxLinearZNear",type:"range",min:10,max:1200,step:10,default:50,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"parallaxLinearZFar",label:"Z Far",stateKey:"parallaxLinearZFar",type:"range",min:50,max:3e3,step:25,default:900,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"parallaxLinearFocalLength",label:"Focal Length",stateKey:"parallaxLinearFocalLength",type:"range",min:80,max:2e3,step:10,default:420,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10)},{id:"parallaxLinearParallaxStrength",label:"Parallax Strength",stateKey:"parallaxLinearParallaxStrength",type:"range",min:0,max:2e3,step:10,default:260,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10)},a("parallaxLinearWarmupFrames")]},starfield3d:{title:"3D Starfield",icon:"‚ú®",mode:"starfield-3d",defaultOpen:!1,controls:[{id:"starfieldCount",label:"Star Count",stateKey:"starfieldCount",type:"range",min:20,max:320,step:2,default:150,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"starfieldSpanX",label:"Span X",stateKey:"starfieldSpanX",type:"range",min:.4,max:3.5,step:.05,default:2.45,format:e=>e.toFixed(2)+"√ó",parse:parseFloat,reinitMode:!0},{id:"starfieldSpanY",label:"Span Y",stateKey:"starfieldSpanY",type:"range",min:.4,max:3.5,step:.05,default:2.05,format:e=>e.toFixed(2)+"√ó",parse:parseFloat,reinitMode:!0},{id:"starfieldZNear",label:"Z Near",stateKey:"starfieldZNear",type:"range",min:40,max:800,step:10,default:70,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"starfieldZFar",label:"Z Far",stateKey:"starfieldZFar",type:"range",min:400,max:4e3,step:50,default:4e3,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"starfieldFocalLength",label:"Focal Length",stateKey:"starfieldFocalLength",type:"range",min:120,max:2e3,step:10,default:310,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10)},{id:"starfieldParallaxStrength",label:"Parallax Strength",stateKey:"starfieldParallaxStrength",type:"range",min:0,max:1200,step:10,default:320,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10)},{id:"starfieldSpeed",label:"Flow Speed",stateKey:"starfieldSpeed",type:"range",min:60,max:1600,step:10,default:390,format:e=>Math.round(e)+"px/s",parse:e=>parseInt(e,10)},{id:"starfieldDotSizeMul",label:"Dot Size",stateKey:"starfieldDotSizeMul",type:"range",min:.2,max:4,step:.05,default:.35,format:e=>e.toFixed(2)+"√ó",parse:parseFloat},{id:"starfieldIdleJitter",label:"Idle Drift",stateKey:"starfieldIdleJitter",type:"range",min:0,max:20,step:.5,default:20,format:e=>e.toFixed(1)+"px",parse:parseFloat,hint:"Subtle twinkle when idle; disabled for reduced-motion."},{id:"starfieldFadeDuration",label:"Fade Duration",stateKey:"starfieldFadeDuration",type:"range",min:0,max:3,step:.1,default:.5,format:e=>e.toFixed(1)+"s",parse:parseFloat,hint:"Duration of fade in/out when stars appear and disappear."},a("starfield3dWarmupFrames")]},elasticCenter:{title:"Elastic Center",icon:"‚≠ï",mode:"elastic-center",defaultOpen:!1,controls:[{id:"elasticCenterBallCount",label:"Ball Count",stateKey:"elasticCenterBallCount",type:"range",min:20,max:120,step:5,default:60,format:e=>e+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"elasticCenterMassMultiplier",label:"Mass Multiplier",stateKey:"elasticCenterMassMultiplier",type:"range",min:.5,max:5,step:.1,default:2,format:e=>e.toFixed(1)+"√ó",parse:parseFloat,hint:"Mass of individual dots"},{id:"elasticCenterElasticStrength",label:"Elastic Strength",stateKey:"elasticCenterElasticStrength",type:"range",min:0,max:15e3,step:250,default:2e3,format:e=>e.toFixed(0)+"px/s¬≤",parse:parseFloat,hint:"Force pulling dots back to center position (0 = no elastic force, circle moves freely)"},{id:"elasticCenterMouseRepelStrength",label:"Mouse Repel Strength",stateKey:"elasticCenterMouseRepelStrength",type:"range",min:3e3,max:25e3,step:500,default:12e3,format:e=>e.toFixed(0)+"px/s¬≤",parse:parseFloat,hint:"Force pushing dots away from mouse cursor"},{id:"elasticCenterMouseRadius",label:"Mouse Influence Radius",stateKey:"elasticCenterMouseRadius",type:"range",min:50,max:400,step:10,default:200,format:e=>e.toFixed(0)+"px",parse:parseFloat,hint:"Distance from cursor where mouse affects dots"},{id:"elasticCenterDamping",label:"Damping",stateKey:"elasticCenterDamping",type:"range",min:.85,max:.99,step:.01,default:.94,format:e=>e.toFixed(2),parse:parseFloat,hint:"Velocity damping for stability (higher = less damping)"},a("elasticCenterWarmupFrames")]},snake:{title:"Snake",icon:"üêç",mode:"snake",defaultOpen:!1,controls:[{id:"snakeBallCount",label:"Ball Count",stateKey:"snakeBallCount",type:"range",min:20,max:100,step:5,default:95,format:e=>e+"",parse:e=>parseInt(e,10),hint:"Number of balls in the snake trail",reinitMode:!0},{id:"snakeRestLength",label:"Rest Length",stateKey:"snakeRestLength",type:"range",min:15,max:80,step:2,default:29,format:e=>e.toFixed(0)+"px",parse:parseFloat,hint:"Distance between connected balls (lower = tighter trail)"},{id:"snakeSpringStrength",label:"Spring Strength",stateKey:"snakeSpringStrength",type:"range",min:1,max:1e3,step:1,default:238,format:e=>e.toFixed(0)+"px/s¬≤",parse:parseFloat,hint:"Force keeping balls connected (lower = less wiggling, higher = tighter trail)"},{id:"snakeSpeed",label:"Snake Speed",stateKey:"snakeSpeed",type:"range",min:100,max:800,step:50,default:200,format:e=>e.toFixed(0)+"px/s",parse:e=>parseInt(e,10),hint:"Constant speed of snake head movement (classic snake game behavior)"},{id:"snakeGroundFriction",label:"Ground Friction",stateKey:"snakeGroundFriction",type:"range",min:0,max:2,step:.05,default:1.9,format:e=>e.toFixed(2),parse:parseFloat,hint:"Additional friction simulating high-friction ground surface"},{id:"snakeDamping",label:"Damping",stateKey:"snakeDamping",type:"range",min:.9,max:.995,step:.005,default:.92,format:e=>e.toFixed(2),parse:parseFloat,hint:"Velocity damping (higher = less damping, more motion)"},a("snakeWarmupFrames")]},dvdLogo:{title:"DVD Logo",icon:"üìÄ",mode:"dvd-logo",defaultOpen:!1,controls:[{id:"dvdLogoSpeed",label:"Speed",stateKey:"dvdLogoSpeed",type:"range",min:200,max:800,step:50,default:200,format:e=>e.toFixed(0)+"px/s",parse:parseFloat,hint:"Movement speed of the DVD logo"},{id:"dvdLogoSize",label:"Logo Size",stateKey:"dvdLogoSize",type:"range",min:.5,max:2,step:.1,default:1,format:e=>e.toFixed(1)+"√ó",parse:parseFloat,hint:"Scale multiplier for logo size",reinitMode:!0},{id:"dvdLogoBallCount",label:"Ball Count",stateKey:"dvdLogoBallCount",type:"range",min:30,max:120,step:5,default:60,format:e=>e.toFixed(0)+" balls",parse:parseFloat,hint:"Total balls forming the DVD letters",reinitMode:!0},{id:"dvdLogoBallSpacing",label:"Ball Spacing",stateKey:"dvdLogoBallSpacing",type:"range",min:1,max:2,step:.1,default:1.3,format:e=>e.toFixed(1)+"√ó",parse:parseFloat,hint:"Spacing between balls (higher = larger gaps)",reinitMode:!0},{id:"dvdLogoLetterSpacing",label:"Letter Spacing",stateKey:"dvdLogoLetterSpacing",type:"range",min:.5,max:2,step:.1,default:1,format:e=>e.toFixed(1)+"√ó",parse:parseFloat,hint:"Spacing between D-V-D letters",reinitMode:!0},a("dvdLogoWarmupFrames")]},particleFountain:{title:"Particle Fountain",icon:"‚õ≤",mode:"particle-fountain",defaultOpen:!1,controls:[{id:"particleFountainEmissionRate",label:"Emission Rate",stateKey:"particleFountainEmissionRate",type:"range",min:5,max:100,step:1,default:29,format:e=>e.toFixed(0)+" particles/s",parse:e=>parseInt(e,10),hint:"Number of particles emitted per second"},{id:"particleFountainInitialVelocity",label:"Initial Velocity",stateKey:"particleFountainInitialVelocity",type:"range",min:200,max:1e4,step:100,default:4700,format:e=>e.toFixed(0)+"px/s",parse:e=>parseInt(e,10),hint:"Initial upward velocity of particles"},{id:"particleFountainSpreadAngle",label:"Spread Angle",stateKey:"particleFountainSpreadAngle",type:"range",min:10,max:120,step:5,default:20,format:e=>e.toFixed(0)+"¬∞",parse:e=>parseInt(e,10),hint:"How wide the fountain spreads (degrees)"},{id:"particleFountainWaterDrag",label:"Water Drag",stateKey:"particleFountainWaterDrag",type:"range",min:.01,max:.2,step:.01,default:.02,format:e=>e.toFixed(2),parse:parseFloat,hint:"Water-like drag for smooth fluid motion (lower = more natural water, higher = more resistance)"},{id:"particleFountainGravityMultiplier",label:"Gravity",stateKey:"particleFountainGravityMultiplier",type:"range",min:0,max:2,step:.1,default:1.7,format:e=>e.toFixed(1)+"√ó",parse:parseFloat,hint:"Gravity strength (particles fall after rising, 0 = no gravity)"},{id:"particleFountainUpwardForce",label:"Upward Force",stateKey:"particleFountainUpwardForce",type:"range",min:0,max:800,step:50,default:300,format:e=>e.toFixed(0)+"px/s¬≤",parse:e=>parseInt(e,10),hint:"Optional upward force (buoyancy), 0 = disabled"},{id:"particleFountainMaxParticles",label:"Max Particles",stateKey:"particleFountainMaxParticles",type:"range",min:20,max:300,step:10,default:230,format:e=>e.toFixed(0)+" particles",parse:e=>parseInt(e,10),hint:"Maximum active particles"},{id:"particleFountainLifetime",label:"Lifetime",stateKey:"particleFountainLifetime",type:"range",min:1,max:30,step:.5,default:8,format:e=>e.toFixed(1)+"s",parse:parseFloat,hint:"How long particles live before fading out (2s fade animation)"},{id:"particleFountainMouseRepelStrength",label:"Mouse Repel Strength",stateKey:"particleFountainMouseRepelStrength",type:"range",min:1e4,max:1e5,step:5e3,default:5e4,format:e=>e.toFixed(0)+"px/s¬≤",parse:e=>parseInt(e,10),hint:"Force pushing particles away from mouse cursor"},{id:"particleFountainMouseRepelRadiusVw",label:"Mouse Repel Radius",stateKey:"particleFountainMouseRepelRadiusVw",type:"range",min:1,max:20,step:.5,default:5,format:e=>e.toFixed(1)+"vw",parse:parseFloat,hint:"Radius of mouse repulsion (viewport width percentage)",onChange(){import("./shared.js").then(e=>e.aF).then(({applyLayoutFromVwToPx:e})=>{e()}).catch(()=>{})}}]},sphere3d:{title:"3D Sphere",icon:"üåê",mode:"3d-sphere",defaultOpen:!1,controls:[{id:"sphere3dRadiusVw",label:"Radius",stateKey:"sphere3dRadiusVw",type:"range",min:5,max:40,step:.5,default:18,format:e=>e.toFixed(1)+"vw",parse:parseFloat,reinitMode:!0},{id:"sphere3dDensity",label:"Point Count",stateKey:"sphere3dDensity",type:"range",min:30,max:600,step:10,default:140,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"sphere3dFocalLength",label:"Focal Length",stateKey:"sphere3dFocalLength",type:"range",min:80,max:2e3,step:10,default:600,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10)},{id:"sphere3dDotSizeMul",label:"Dot Size",stateKey:"sphere3dDotSizeMul",type:"range",min:.2,max:4,step:.05,default:1.5,format:e=>e.toFixed(2)+"√ó",parse:parseFloat},{id:"sphere3dIdleSpeed",label:"Idle Rotation",stateKey:"sphere3dIdleSpeed",type:"range",min:0,max:1,step:.02,default:.15,format:e=>e.toFixed(2)+" rad/s",parse:parseFloat},{id:"sphere3dTumbleSpeed",label:"Spin Sensitivity",stateKey:"sphere3dTumbleSpeed",type:"range",min:0,max:10,step:.1,default:2.5,format:e=>e.toFixed(1),parse:parseFloat,hint:"How much dragging the mouse over the sphere spins it. Higher = more sensitive."},{id:"sphere3dTumbleDamping",label:"Tumble Damping",stateKey:"sphere3dTumbleDamping",type:"range",min:.8,max:.99,step:.005,default:.94,format:e=>e.toFixed(3),parse:parseFloat},a("sphere3dWarmupFrames")]},cube3d:{title:"3D Cube",icon:"üßä",mode:"3d-cube",defaultOpen:!1,controls:[{id:"cube3dSizeVw",label:"Size",stateKey:"cube3dSizeVw",type:"range",min:10,max:50,step:.5,default:50,format:e=>e.toFixed(1)+"vw",parse:parseFloat,reinitMode:!0},{id:"cube3dEdgeDensity",label:"Edge Density",stateKey:"cube3dEdgeDensity",type:"range",min:2,max:30,step:1,default:8,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"cube3dFaceGrid",label:"Face Grid",stateKey:"cube3dFaceGrid",type:"range",min:0,max:10,step:1,default:0,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),reinitMode:!0,hint:"0 = edges only. >0 adds face lattice points."},{id:"cube3dIdleSpeed",label:"Idle Rotation",stateKey:"cube3dIdleSpeed",type:"range",min:0,max:1,step:.02,default:.2,format:e=>e.toFixed(2)+" rad/s",parse:parseFloat},{id:"cube3dCursorInfluence",label:"Cursor Influence",stateKey:"cube3dCursorInfluence",type:"range",min:0,max:4,step:.05,default:1.5,format:e=>e.toFixed(2),parse:parseFloat},{id:"cube3dTumbleSpeed",label:"Tumble Speed",stateKey:"cube3dTumbleSpeed",type:"range",min:0,max:10,step:.1,default:3,format:e=>e.toFixed(1),parse:parseFloat},{id:"cube3dTumbleDamping",label:"Tumble Damping",stateKey:"cube3dTumbleDamping",type:"range",min:.8,max:.99,step:.005,default:.95,format:e=>e.toFixed(3),parse:parseFloat},{id:"cube3dFocalLength",label:"Focal Length",stateKey:"cube3dFocalLength",type:"range",min:80,max:2e3,step:10,default:500,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10)},{id:"cube3dDotSizeMul",label:"Dot Size",stateKey:"cube3dDotSizeMul",type:"range",min:.2,max:4,step:.05,default:1.5,format:e=>e.toFixed(2)+"√ó",parse:parseFloat},a("cube3dWarmupFrames")]},parallaxLinear:{title:"Parallax (Linear)",icon:"üìê",mode:"parallax-linear",defaultOpen:!1,controls:[{id:"parallaxLinearGridX",label:"Grid X",stateKey:"parallaxLinearGridX",type:"range",min:4,max:30,step:1,default:14,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"parallaxLinearGridY",label:"Grid Y",stateKey:"parallaxLinearGridY",type:"range",min:4,max:30,step:1,default:10,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),reinitMode:!0},{id:"parallaxLinearGridZ",label:"Grid Z (Depth)",stateKey:"parallaxLinearGridZ",type:"range",min:2,max:15,step:1,default:7,format:e=>Math.round(e)+"",parse:e=>parseInt(e,10),reinitMode:!0},{type:"divider",label:"Spread & Depth"},{id:"parallaxLinearSpanX",label:"Span X",stateKey:"parallaxLinearSpanX",type:"range",min:1,max:12,step:.1,default:5.4,format:e=>e.toFixed(1)+"√ó",parse:parseFloat,reinitMode:!0,hint:"How far the grid extends horizontally"},{id:"parallaxLinearSpanY",label:"Span Y",stateKey:"parallaxLinearSpanY",type:"range",min:1,max:12,step:.1,default:5.4,format:e=>e.toFixed(1)+"√ó",parse:parseFloat,reinitMode:!0,hint:"How far the grid extends vertically"},{id:"parallaxLinearZNear",label:"Z Near",stateKey:"parallaxLinearZNear",type:"range",min:10,max:200,step:5,default:50,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10),reinitMode:!0},{id:"parallaxLinearZFar",label:"Z Far",stateKey:"parallaxLinearZFar",type:"range",min:200,max:2e3,step:50,default:800,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10),reinitMode:!0},{type:"divider",label:"Camera & Mouse"},{id:"parallaxLinearFocalLength",label:"Focal Length",stateKey:"parallaxLinearFocalLength",type:"range",min:100,max:1e3,step:10,default:420,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10)},{id:"parallaxLinearParallaxStrength",label:"Parallax Strength",stateKey:"parallaxLinearParallaxStrength",type:"range",min:0,max:500,step:10,default:120,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10),hint:"How much the view shifts with mouse movement"},{id:"parallaxLinearMouseEasing",label:"Mouse Smoothing",stateKey:"parallaxLinearMouseEasing",type:"range",min:.5,max:15,step:.5,default:4,format:e=>e.toFixed(1),parse:parseFloat,hint:"Lower = smoother/slower, higher = snappier"},{type:"divider",label:"Appearance"},{id:"parallaxLinearDotSizeMul",label:"Dot Size",stateKey:"parallaxLinearDotSizeMul",type:"range",min:.5,max:4,step:.1,default:1.8,format:e=>e.toFixed(1)+"√ó",parse:parseFloat},a("parallaxLinearWarmupFrames")]},parallaxFloat:{title:"Parallax (Float)",icon:"ü´ß",mode:"parallax-float",defaultOpen:!1,controls:[{id:"parallaxFloatRandomize",label:"Randomize",stateKey:"parallaxFloatRandomize",type:"range",min:0,max:1,step:.05,default:.5,format:e=>Math.round(100*e)+"%",parse:parseFloat,reinitMode:!0,hint:"0 = perfect grid, 1 = fully scattered"},{type:"divider",label:"Levitation"},{id:"parallaxFloatLevitationAmp",label:"Amplitude",stateKey:"parallaxFloatLevitationAmp",type:"range",min:0,max:60,step:2,default:20,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10),hint:"How far particles drift"},{id:"parallaxFloatLevitationSpeed",label:"Speed",stateKey:"parallaxFloatLevitationSpeed",type:"range",min:.05,max:.5,step:.02,default:.2,format:e=>e.toFixed(2)+" Hz",parse:parseFloat,hint:"How fast particles drift"},{type:"divider",label:"Mouse"},{id:"parallaxFloatParallaxStrength",label:"Parallax Strength",stateKey:"parallaxFloatParallaxStrength",type:"range",min:0,max:500,step:10,default:120,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10),hint:"How much the view shifts with mouse"},{id:"parallaxFloatMouseEasing",label:"Mouse Smoothing",stateKey:"parallaxFloatMouseEasing",type:"range",min:.5,max:15,step:.5,default:4,format:e=>e.toFixed(1),parse:parseFloat,hint:"Lower = smoother/slower, higher = snappier"},{type:"divider",label:"Appearance"},{id:"parallaxFloatDotSizeMul",label:"Dot Size",stateKey:"parallaxFloatDotSizeMul",type:"range",min:.5,max:4,step:.1,default:1.8,format:e=>e.toFixed(1)+"√ó",parse:parseFloat},a("parallaxFloatWarmupFrames")]},entrance:{title:"Entrance",icon:"üé≠",defaultOpen:!1,controls:[{id:"entranceEnabled",label:"Enabled",stateKey:"entranceEnabled",type:"checkbox",default:!0,format:e=>e?"On":"Off",parse:e=>!!e,hint:"Enable dramatic entrance animation (browser default ‚Üí wall-state)",onChange(){"undefined"!=typeof window&&setTimeout(()=>window.location.reload(),300)}},{id:"entranceWallTransitionDelay",label:"Wall Transition Delay",stateKey:"entranceWallTransitionDelay",type:"range",min:0,max:2e3,step:50,default:300,format:e=>Math.round(e)+"ms",parse:e=>parseInt(e,10),hint:"Delay before wall background transition starts"},{id:"entranceWallTransitionDuration",label:"Wall Growth Duration",stateKey:"entranceWallTransitionDuration",type:"range",min:200,max:2e3,step:50,default:800,format:e=>Math.round(e)+"ms",parse:e=>parseInt(e,10),hint:"Duration of wall scaling down into viewport animation"},{id:"entranceWallInitialScale",label:"Initial Scale",stateKey:"entranceWallInitialScale",type:"range",min:1.05,max:1.5,step:.05,default:1.1,format:e=>e.toFixed(2),parse:e=>parseFloat(e),hint:"Starting scale (wall starts slightly larger, scales down to 1.0)"},{id:"entranceWallEasing",label:"Wall Growth Easing",stateKey:"entranceWallEasing",type:"select",options:[{value:"cubic-bezier(0.16, 1, 0.3, 1)",label:"Organic (default)"},{value:"ease-out",label:"Ease Out"},{value:"ease-in-out",label:"Ease In Out"},{value:"cubic-bezier(0.34, 1.56, 0.64, 1)",label:"Bounce"},{value:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",label:"Overshoot"}],default:"cubic-bezier(0.16, 1, 0.3, 1)",format:e=>e+"",parse:e=>e+"",hint:"Easing function for wall growth animation"},{id:"entranceElementDuration",label:"Element Duration",stateKey:"entranceElementDuration",type:"range",min:100,max:1e3,step:50,default:800,format:e=>Math.round(e)+"ms",parse:e=>parseInt(e,10),hint:"Duration for individual element animations"},{id:"entranceElementScaleStart",label:"Element Scale Start",stateKey:"entranceElementScaleStart",type:"range",min:.5,max:1,step:.01,default:.95,format:e=>e.toFixed(2),parse:e=>parseFloat(e),hint:"Initial scale for elements (0-1)"},{id:"entranceElementTranslateZStart",label:"Element Z Start",stateKey:"entranceElementTranslateZStart",type:"range",min:-100,max:0,step:5,default:-20,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10),hint:"Initial z-axis position (negative = back in 3D space)"},{id:"entrancePerspectiveLandscape",label:"Perspective (Landscape)",stateKey:"entrancePerspectiveLandscape",type:"range",min:500,max:3e3,step:50,default:1200,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10),hint:"3D perspective for landscape aspect ratio",onChange(){import("./shared.js").then(e=>e.aP).then(({applyPerspectiveCSS:e})=>{e()}).catch(()=>{})}},{id:"entrancePerspectiveSquare",label:"Perspective (Square)",stateKey:"entrancePerspectiveSquare",type:"range",min:500,max:3e3,step:50,default:1e3,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10),hint:"3D perspective for square aspect ratio",onChange(){import("./shared.js").then(e=>e.aP).then(({applyPerspectiveCSS:e})=>{e()}).catch(()=>{})}},{id:"entrancePerspectivePortrait",label:"Perspective (Portrait)",stateKey:"entrancePerspectivePortrait",type:"range",min:500,max:3e3,step:50,default:800,format:e=>Math.round(e)+"px",parse:e=>parseInt(e,10),hint:"3D perspective for portrait aspect ratio",onChange(){import("./shared.js").then(e=>e.aP).then(({applyPerspectiveCSS:e})=>{e()}).catch(()=>{})}},{id:"contentFadeInDelay",label:"Content Fade-In Delay",stateKey:"contentFadeInDelay",type:"range",min:0,max:2e3,step:50,default:500,format:e=>Math.round(e)+"ms",parse:e=>parseInt(e,10),hint:"Delay before content fade-in animation starts (excludes background/wall color)",onChange(){"undefined"!=typeof window&&setTimeout(()=>window.location.reload(),300)}},{id:"contentFadeInDuration",label:"Content Fade-In Duration",stateKey:"contentFadeInDuration",type:"range",min:100,max:3e3,step:50,default:1e3,format:e=>Math.round(e)+"ms",parse:e=>parseInt(e,10),hint:"Duration of content fade-in animation (excludes background/wall color)",onChange(){"undefined"!=typeof window&&setTimeout(()=>window.location.reload(),300)}}]}};var P=Object.freeze({__proto__:null,setupIndexControls:u,setupMasterControls:c,updateModeButtonsUI:f});export{d as a,n as b,c,o as d,s as e,i as f,p as g,P as h,u as s,f as u};