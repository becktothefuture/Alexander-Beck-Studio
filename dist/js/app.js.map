{"version":3,"file":"app.js","sources":["../../source/modules/ui/keyboard.js","../../source/modules/input/overscroll-lock.js","../../source/modules/ui/legend-filter.js","../../source/modules/ui/scene-change-sfx.js","../../source/main.js"],"sourcesContent":["// ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n// ‚ïë                                KEYBOARD INPUT                                ‚ïë\n// ‚ïë              Panel dock toggle and mode switching (1-9)                      ‚ïë\n// ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\nimport { setMode, MODES, resetCurrentMode } from '../modes/mode-controller.js';\nimport { NARRATIVE_MODE_SEQUENCE } from '../core/constants.js';\nimport { getGlobals } from '../core/state.js';\nimport { updateModeButtonsUI } from './controls.js';\nimport { isDev } from '../utils/logger.js';\n\nlet isKeyboardWired = false;\n\nfunction navigateNarrative(delta) {\n  const g = getGlobals();\n  const mode = g?.currentMode || MODES.PIT;\n  const seq = NARRATIVE_MODE_SEQUENCE;\n  if (!seq || !seq.length) return;\n  const idx = seq.indexOf(mode);\n  const base = (idx >= 0) ? idx : 0;\n  const next = (base + delta + seq.length) % seq.length;\n  const nextMode = seq[next];\n  setMode(nextMode);\n  updateModeButtonsUI(nextMode);\n}\n\nexport function setupKeyboardShortcuts() {\n  if (isKeyboardWired) return;\n  isKeyboardWired = true;\n\n  window.addEventListener('keydown', (e) => {\n    // Skip if typing in an input\n    if (['INPUT', 'TEXTAREA', 'SELECT'].includes(e.target.tagName)) return;\n    \n    const k = e.key.toLowerCase();\n    \n    // Toggle dock with /\n    if (k === '/' || e.code === 'Slash') {\n      e.preventDefault();\n      // DEV-ONLY: The config panel is a dev tool and must never ship/appear in production.\n      // Avoid a static import so Rollup can drop panel-dock from production bundles.\n      if (!isDev()) return;\n      import('./panel-dock.js')\n        .then((mod) => {\n          try { mod.toggleDock?.(); } catch (err) {}\n        })\n        .catch(() => {});\n      return;\n    }\n\n    // Reset current simulation with R\n    if (k === 'r') {\n      e.preventDefault();\n      resetCurrentMode();\n      try {\n        const g = getGlobals();\n        updateModeButtonsUI(g.currentMode);\n      } catch (e) {}\n      return;\n    }\n\n    // Narrative navigation\n    if (e.key === 'ArrowRight') {\n      e.preventDefault();\n      navigateNarrative(1);\n      return;\n    }\n    if (e.key === 'ArrowLeft') {\n      e.preventDefault();\n      navigateNarrative(-1);\n      return;\n    }\n    // Direct simulation key mappings are intentionally disabled.\n    // Switch simulations using:\n    // - ArrowLeft / ArrowRight (narrative sequence)\n    // - Right-click (previous simulation)\n    // - Panel mode buttons\n  });\n\n  // Right-click navigation: go to previous simulation\n  window.addEventListener('contextmenu', (e) => {\n    // Only prevent default and navigate if not on an interactive element\n    const target = e.target;\n    const isInteractive = target.tagName === 'A' || \n                          target.tagName === 'BUTTON' || \n                          target.closest('a') || \n                          target.closest('button') ||\n                          target.closest('.panel') ||\n                          target.id === 'panelDock' ||\n                          target.id === 'masterPanel' ||\n                          target.id === 'dockToggle';\n    \n    if (!isInteractive) {\n      e.preventDefault();\n      navigateNarrative(-1); // Go to previous simulation\n    }\n  });\n}\n","// ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n// ‚ïë                      OVERSCROLL LOCK (iOS RUBBER-BAND FIX)                   ‚ïë\n// ‚ïë   Prevents page rubber-banding / scroll bounce while allowing internal       ‚ïë\n// ‚ïë   scrolling for UI containers (gates + panel).                               ‚ïë\n// ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\n/**\n * iOS Safari can still rubber-band even when body is overflow:hidden, especially\n * during touchmove gestures. This installs a capture-phase touchmove listener\n * (passive:false) that blocks scrolling unless the gesture originates inside a\n * whitelisted scroll container.\n *\n * IMPORTANT:\n * - We only preventDefault on touchmove, not touchstart, so taps/clicks still work.\n * - We allow scrolling only inside dedicated scroll containers (panel). Gates are NOT scrollable.\n */\nexport function setupOverscrollLock() {\n  if (typeof document === 'undefined') return;\n\n  const isAllowedScrollTarget = (target) => {\n    if (!(target instanceof Element)) return false;\n\n    // Allow scroll inside the panel content (dock + legacy panel)\n    if (target.closest('.panel-dock .panel .panel-content')) return true;\n    if (target.closest('#controlPanel')) return true;\n\n    return false;\n  };\n\n  document.addEventListener('touchmove', (e) => {\n    // If a scrollable UI wants the gesture, let it through.\n    if (isAllowedScrollTarget(e.target)) return;\n\n    // Otherwise: lock the page in place (no rubber-banding / bounce).\n    // Note: must be passive:false for iOS.\n    e.preventDefault();\n  }, { passive: false, capture: true });\n}\n\n\n","// ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n// ‚ïë                           LEGEND TOOLTIP SYSTEM                              ‚ïë\n// ‚ïë  Purpose:                                                                   ‚ïë\n// ‚ïë  - Provide hover tooltips (writes to #legend-tooltip-output)                 ‚ïë\n// ‚ïë  - Expose a no-op `window.legendFilter.syncAllBalls()` for backwards compat  ‚ïë\n// ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\n/**\n * Initialize legend tooltip system.\n *\n * Notes:\n * - This runs once at startup.\n * - It is safe in production: no panel dependencies, no dev-only behavior.\n * - Hover shows tooltip; click/keyboard filtering has been removed.\n */\nexport function initLegendFilterSystem() {\n  // Expose no-op sync hook for backwards compatibility with mode-controller.\n  try {\n    if (typeof window !== 'undefined') {\n      if (!window.legendFilter) window.legendFilter = {};\n      window.legendFilter.syncAllBalls = () => {}; // No-op (filtering removed)\n    }\n  } catch (e) {}\n\n  // Attach tooltip behavior.\n  try {\n    const legend = document.getElementById('expertise-legend');\n    const tooltipOutput = document.getElementById('legend-tooltip-output');\n    if (!legend) return;\n\n    const legendItems = Array.from(legend.querySelectorAll('.legend__item'));\n\n    for (const item of legendItems) {\n      if (!item) continue;\n\n      // Add class for CSS hover effects (not clickable)\n      item.classList.add('legend__item--interactive');\n\n      // Tooltip output: hover only (doesn't allocate in hot paths).\n      if (tooltipOutput) {\n        item.addEventListener('mouseenter', () => {\n          const tooltipText = item.getAttribute('data-tooltip');\n          if (!tooltipText) return;\n          tooltipOutput.textContent = tooltipText;\n          tooltipOutput.style.opacity = '1';\n          tooltipOutput.style.visibility = 'visible';\n        });\n\n        item.addEventListener('mouseleave', () => {\n          tooltipOutput.style.opacity = '0';\n          window.setTimeout(() => {\n            if (tooltipOutput.style.opacity === '0') {\n              tooltipOutput.style.visibility = 'hidden';\n            }\n          }, 50);\n        });\n      }\n    }\n\n    if (tooltipOutput) {\n      tooltipOutput.style.visibility = 'hidden';\n      tooltipOutput.style.opacity = '0';\n    }\n  } catch (e) {\n    // Never allow legend setup to crash boot.\n  }\n}\n","// ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n// ‚ïë                         SCENE CHANGE SOUND (SFX)                             ‚ïë\n// ‚ïë      Soft ‚Äúpebble-like‚Äù tick on simulation change (bb:modeChanged event)     ‚ïë\n// ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\nimport { getGlobals } from '../core/state.js';\nimport { playCollisionSound } from '../audio/sound-engine.js';\n\nlet enabled = false;\n\nexport function initSceneChangeSFX() {\n  if (typeof window === 'undefined') return;\n  if (enabled) return;\n  enabled = true;\n\n  window.addEventListener('bb:modeChanged', (e) => {\n    const g = getGlobals();\n    if (g?.sceneChangeSoundEnabled === false) return;\n\n    const detail = e?.detail || {};\n    const didChange = detail.prevMode && detail.mode && detail.prevMode !== detail.mode;\n    if (!didChange) return;\n\n    // ‚ÄúPebble-like‚Äù = small radius, moderate intensity, centered pan.\n    const radius = Number(g?.sceneChangeSoundRadius ?? 18);\n    const intensity = Number(g?.sceneChangeSoundIntensity ?? 0.35);\n    playCollisionSound(radius, intensity, 0.5, null);\n  }, { passive: true });\n}\n\n\n","// ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n// ‚ïë                      BOUNCY BALLS ‚Äì MAIN ENTRY (COMPLETE)                    ‚ïë\n// ‚ïë                       Modular Architecture Bootstrap                         ‚ïë\n// ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\nimport { CONSTANTS, NARRATIVE_MODE_SEQUENCE } from './modules/core/constants.js';\nimport { initState, setCanvas, getGlobals, applyLayoutCSSVars } from './modules/core/state.js';\nimport { initializeDarkMode } from './modules/visual/dark-mode-v2.js';\nimport { applyColorTemplate, maybeAutoPickCursorColor, rotatePaletteChapterOnReload } from './modules/visual/colors.js';\nimport { initNoiseSystem } from './modules/visual/noise-system.js';\nimport { setupRenderer, getCanvas, getContext, resize, setForceRenderCallback } from './modules/rendering/renderer.js';\nimport { render } from './modules/physics/engine.js';\nimport { setupKeyboardShortcuts } from './modules/ui/keyboard.js';\nimport { setupPointer } from './modules/input/pointer.js';\nimport { setupOverscrollLock } from './modules/input/overscroll-lock.js';\nimport { setupCustomCursor } from './modules/rendering/cursor.js';\nimport { setMode, MODES, getForceApplicator } from './modules/modes/mode-controller.js';\nimport { startMainLoop } from './modules/rendering/loop.js';\nimport { loadSettings } from './modules/utils/storage.js';\nimport { initCVModal } from './modules/ui/cv-modal.js';\nimport { initPortfolioModal } from './modules/ui/portfolio-modal.js';\nimport { initContactModal } from './modules/ui/contact-modal.js';\nimport { initModalOverlay } from './modules/ui/modal-overlay.js';\nimport { createSoundToggle } from './modules/ui/sound-toggle.js';\nimport { createThemeToggle } from './modules/ui/theme-toggle.js';\nimport { initSoundEngine, applySoundConfigFromRuntimeConfig } from './modules/audio/sound-engine.js';\nimport { upgradeSocialIcons } from './modules/ui/social-icons.js';\nimport { initTimeDisplay } from './modules/ui/time-display.js';\nimport { applyExpertiseLegendColors } from './modules/ui/legend-colors.js';\n// Note: Legend interactivity is now inlined in main.js for reliability\nimport { initLegendFilterSystem } from './modules/ui/legend-filter.js';\nimport { initLinkCursorHop } from './modules/ui/link-cursor-hop.js';\n// Layout controls now integrated into master panel\nimport { initSceneImpactReact } from './modules/ui/scene-impact-react.js';\nimport { initSceneChangeSFX } from './modules/ui/scene-change-sfx.js';\nimport { loadRuntimeText, getText } from './modules/utils/text-loader.js';\nimport { applyRuntimeTextToDOM } from './modules/ui/apply-text.js';\nimport { loadRuntimeConfig } from './modules/utils/runtime-config.js';\nimport { waitForFonts } from './modules/utils/font-loader.js';\nimport { readTokenVar } from './modules/utils/tokens.js';\nimport {\n  initConsolePolicy,\n  printConsoleBanner,\n  group,\n  groupEnd,\n  isDev,\n  log,\n  mark,\n  measure,\n  table\n} from './modules/utils/logger.js';\n\n// Compile-time dev flag (Rollup `replace()` sets __DEV__ in bundled builds).\n// In source/dev mode (unbundled), `__DEV__` is undefined and we fall back to runtime detection.\nconst ABS_DEV = (typeof __DEV__ !== 'undefined') ? __DEV__ : isDev();\nconst CONTENT_FADE_DURATION_MS = 800;\nconst CONTENT_FADE_EASING = 'cubic-bezier(0.16, 1, 0.3, 1)';\n\nfunction pickStartupMode() {\n  // Random mode from narrative sequence on each reload\n  return NARRATIVE_MODE_SEQUENCE[Math.floor(Math.random() * NARRATIVE_MODE_SEQUENCE.length)];\n}\n\n/**\n * Apply two-level padding CSS variables from global state to :root\n * \n * Two-level system:\n * 1. --container-border: insets #bravia-balls from viewport (reveals body bg as outer frame)\n * 2. --simulation-padding: padding inside container around canvas (inner breathing room)\n * \n * The canvas radius auto-calculates via CSS: calc(var(--container-radius) - var(--simulation-padding))\n */\nexport function applyFramePaddingCSSVars() {\n  // Back-compat export: this project previously applied only frame padding here.\n  // Layout is now vw-native in config/state, with px derived and stamped centrally.\n  applyLayoutCSSVars();\n}\n\n/**\n * Apply visual CSS variables (noise opacity/size, walls) from config to :root\n */\nexport function applyVisualCSSVars(config) {\n  const root = document.documentElement;\n  \n  // NOTE: Layout CSS vars (frame/padding/radius/thickness) are applied via\n  // `applyLayoutCSSVars()` from state (vw-native ‚Üí px derived).\n\n  // Brand logo sizing (shared token; driven by runtime config + dev panel slider).\n  if (config.topLogoWidthVw !== undefined) {\n    root.style.setProperty('--top-logo-width-vw', String(config.topLogoWidthVw));\n  }\n\n  // Container inner shadow removed\n  \n  // Noise texture sizing\n  if (config.noiseSize !== undefined) {\n    root.style.setProperty('--noise-size', `${config.noiseSize}px`);\n  }\n  \n  // Noise opacity\n  if (config.noiseOpacityLight !== undefined) {\n    root.style.setProperty('--noise-opacity-light', String(config.noiseOpacityLight));\n  }\n  if (config.noiseOpacityDark !== undefined) {\n    root.style.setProperty('--noise-opacity-dark', String(config.noiseOpacityDark));\n  }\n  \n  // Noise blend mode\n  if (config.noiseBlendMode !== undefined) {\n    root.style.setProperty('--noise-blend-mode', String(config.noiseBlendMode));\n  }\n  \n  // Noise colors\n  if (config.noiseColorLight !== undefined) {\n    root.style.setProperty('--noise-color-light', String(config.noiseColorLight));\n  }\n  if (config.noiseColorDark !== undefined) {\n    root.style.setProperty('--noise-color-dark', String(config.noiseColorDark));\n  }\n}\n\n/**\n * Fade in all content (abs-scene) with a gentle ease-out.\n * Uses WAAPI when available, falling back to a CSS transition.\n * Excludes background/wall color (which remains visible throughout).\n * abs-scene contains: canvas (#bravia-balls), UI (#app-frame), logo, edges, etc.\n */\nfunction fadeInContentLayer(options = {}) {\n  const fadeTarget = document.getElementById('abs-scene');\n  if (!fadeTarget) return Promise.resolve();\n  \n  // Get config values from globals (with fallbacks)\n  const g = getGlobals();\n  const delay = options.delay ?? g?.contentFadeInDelay ?? 500;\n  const duration = options.duration ?? g?.contentFadeInDuration ?? 1000;\n  const easing = options.easing ?? CONTENT_FADE_EASING;\n  \n  return new Promise((resolve) => {\n    let finished = false;\n    const finalize = () => {\n      if (finished) return;\n      finished = true;\n      try {\n        fadeTarget.style.opacity = '1';\n        fadeTarget.style.visibility = 'visible';\n        fadeTarget.style.willChange = 'auto';\n        const blocker = document.getElementById('fade-blocking');\n        if (blocker) blocker.remove();\n      } catch (e) {}\n      resolve();\n    };\n\n    const startAnimation = () => {\n      // Remove fade-blocking style tag BEFORE starting animation to avoid conflicts\n      const blocker = document.getElementById('fade-blocking');\n      if (blocker) blocker.remove();\n      \n      fadeTarget.style.visibility = 'visible';\n      fadeTarget.style.willChange = 'opacity';\n      // Ensure initial opacity is 0 for animation\n      fadeTarget.style.opacity = '0';\n\n      if (typeof fadeTarget.animate === 'function') {\n        const anim = fadeTarget.animate(\n          [\n            { opacity: 0 },\n            { opacity: 1 }\n          ],\n          { duration, easing, fill: 'forwards' }\n        );\n        anim.addEventListener('finish', finalize);\n        anim.addEventListener('cancel', finalize);\n      } else {\n        fadeTarget.style.transition = `opacity ${duration}ms ${easing}`;\n        requestAnimationFrame(() => {\n          fadeTarget.style.opacity = '1';\n        });\n        window.setTimeout(finalize, duration + 50);\n      }\n    };\n\n    // Apply delay before starting animation\n    if (delay > 0) {\n      setTimeout(startAnimation, delay);\n    } else {\n      startAnimation();\n    }\n  });\n}\n\n/**\n * Ensure the base .noise element exists (for dev environments where the full exported HTML isn't present).\n * Secondary noise layers are intentionally removed for performance.\n */\nfunction ensureNoiseElements() {\n  // Check if we have a noise texture image to use\n  const existingNoise = document.querySelector('.noise');\n  if (!existingNoise) {\n    // No noise system present (minimal dev markup) - skip\n    return;\n  }\n}\n\n// ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n// ‚ïë                    MAIN LINKS ‚Äî MOBILE WRAP ENHANCEMENTS                    ‚ïë\n// ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n// We avoid editing exported HTML directly by enhancing at runtime.\nfunction enhanceFooterLinksForMobile() {\n  try {\n    const cv = document.getElementById('cv-gate-trigger');\n    if (cv && !cv.querySelector('.footer-link-nowrap')) {\n      const expected = String(getText('footer.links.cv.text', '') || '').trim();\n      const raw = (cv.textContent || '').trim().replace(/\\s+/g, ' ');\n      const txt = expected || raw;\n      // Keep short compound labels together on mobile (e.g. \"Bio/CV\").\n      if (txt && txt.includes('/') && raw === txt) {\n        cv.innerHTML = `<span class=\"footer-link-nowrap\">${txt}</span>`;\n      }\n    }\n  } catch (e) {}\n}\n\n// Global error handler for unhandled rejections and errors\nwindow.addEventListener('error', (event) => {\n  // Silently ignore fetch errors - they're handled locally\n  if (event.message && event.message.includes('Failed to fetch')) {\n    event.preventDefault();\n  }\n});\n\nwindow.addEventListener('unhandledrejection', (event) => {\n  // Silently ignore fetch errors - they're handled locally\n  if (event.reason?.message && event.reason.message.includes('Failed to fetch')) {\n    event.preventDefault();\n  }\n});\n\n(async function init() {\n  // Mark JS as enabled (for CSS fallback detection)\n  document.documentElement.classList.add('js-enabled');\n\n  // TEXT (SOURCE OF TRUTH):\n  // Load and apply all copy BEFORE fade-in so there is no visible ‚Äúpop-in‚Äù.\n  try {\n    await loadRuntimeText();\n    applyRuntimeTextToDOM();\n  } catch (e) {}\n\n  // Console banner will be printed after colors are initialized (see below)\n  \n  // DEV-only: wire control registry to use CSS vars function (avoids circular dependency).\n  // In production we ship no config panel, so the registry is not loaded.\n  if (ABS_DEV) {\n    try {\n      const mod = await import('./modules/ui/control-registry.js');\n      mod.setApplyVisualCSSVars?.(applyVisualCSSVars);\n    } catch (e) {}\n  }\n  \n  try {\n    group('BouncyBalls bootstrap');\n    mark('bb:start');\n    log('üöÄ Initializing modular bouncy balls...');\n    \n    const config = await loadRuntimeConfig();\n    initState(config);\n    mark('bb:config');\n    log('‚úì Config loaded');\n\n    // Test/debug compatibility: expose key config-derived values on window\n    // (Playwright tests assert these exist and match the runtime config)\n    try {\n      const g = getGlobals();\n      if (typeof window !== 'undefined') {\n        window.REST = g.REST;\n        window.FRICTION = g.FRICTION;\n        window.MAX_BALLS = g.maxBalls;\n        window.repelRadius = g.repelRadius;\n        window.repelPower = g.repelPower;\n      }\n    } catch (e) {}\n    \n    // Apply vw-native layout (frame/padding/radius) as derived px CSS vars.\n    applyLayoutCSSVars();\n    log('‚úì Layout applied');\n    \n    // Apply visual CSS vars (noise, inner shadow) from config\n    applyVisualCSSVars(config);\n    log('‚úì Visual effects configured');\n\n    // Apply config-driven UI CSS vars that aren't part of layout/colors stamping.\n    // (Production ships without the panel, so config must fully drive these.)\n    try {\n      const g = getGlobals();\n      const root = document.documentElement;\n      if (Number.isFinite(g?.topLogoWidthVw)) {\n        root.style.setProperty('--top-logo-width-vw', String(g.topLogoWidthVw));\n      }\n      if (Number.isFinite(g?.homeMainLinksBelowLogoPx)) {\n        root.style.setProperty('--home-main-links-below-logo-px', String(g.homeMainLinksBelowLogoPx));\n      }\n      if (Number.isFinite(g?.footerNavBarTopVh)) {\n        root.style.setProperty('--footer-nav-bar-top', `${g.footerNavBarTopVh}vh`);\n        root.style.setProperty('--footer-nav-bar-top-svh', `${g.footerNavBarTopVh}svh`);\n        root.style.setProperty('--footer-nav-bar-top-dvh', `${g.footerNavBarTopVh}dvh`);\n      }\n      if (Number.isFinite(g?.footerNavBarGapVw)) {\n        /* Convert vw to clamp() pattern: min scales with vw, max = min * 1.67 (matching --gap-xl ratio) */\n        const minPx = Math.round(g.footerNavBarGapVw * 9.6); // ~24px at 2.5vw base\n        const maxPx = Math.round(minPx * 1.67); // ~40px at 2.5vw base (maintains ratio)\n        root.style.setProperty('--footer-nav-bar-gap', `clamp(${minPx}px, ${g.footerNavBarGapVw}vw, ${maxPx}px)`);\n      }\n      if (Number.isFinite(g?.uiHitAreaMul)) {\n        root.style.setProperty('--ui-hit-area-mul', String(g.uiHitAreaMul));\n      }\n      if (Number.isFinite(g?.uiIconCornerRadiusMul)) {\n        root.style.setProperty('--ui-icon-corner-radius-mul', String(g.uiIconCornerRadiusMul));\n      }\n      // Unified icon button geometry: frame size + glyph size (px)\n      // 0 = use token-derived defaults (do not override CSS).\n      if (Number.isFinite(g?.uiIconFramePx) && Math.round(g.uiIconFramePx) > 0) {\n        root.style.setProperty('--ui-icon-frame-size', `${Math.round(g.uiIconFramePx)}px`);\n      }\n      if (Number.isFinite(g?.uiIconGlyphPx) && Math.round(g.uiIconGlyphPx) > 0) {\n        root.style.setProperty('--ui-icon-glyph-size', `${Math.round(g.uiIconGlyphPx)}px`);\n      }\n      if (Number.isFinite(g?.linkTextPadding)) {\n        root.style.setProperty('--link-text-padding', `${Math.round(g.linkTextPadding)}px`);\n        root.style.setProperty('--link-text-margin', `${-Math.round(g.linkTextPadding)}px`);\n      }\n      if (Number.isFinite(g?.linkIconPadding)) {\n        root.style.setProperty('--link-icon-padding', `${Math.round(g.linkIconPadding)}px`);\n        root.style.setProperty('--link-icon-margin', `${-Math.round(g.linkIconPadding)}px`);\n      }\n      if (Number.isFinite(g?.linkColorInfluence)) {\n        root.style.setProperty('--link-color-influence', String(g.linkColorInfluence));\n      }\n      if (Number.isFinite(g?.linkImpactScale)) {\n        root.style.setProperty('--link-impact-scale', String(g.linkImpactScale));\n      }\n      if (Number.isFinite(g?.linkImpactBlur)) {\n        root.style.setProperty('--link-impact-blur', `${g.linkImpactBlur}px`);\n      }\n      if (Number.isFinite(g?.linkImpactDuration)) {\n        root.style.setProperty('--link-impact-duration', `${Math.round(g.linkImpactDuration)}ms`);\n      }\n\n      // Hover target \"snap\" bounce (scale-only; color stays instant)\n      if (g?.hoverSnapEnabled !== undefined) {\n        root.style.setProperty('--abs-hover-snap-enabled', g.hoverSnapEnabled ? '1' : '0');\n      }\n      if (Number.isFinite(g?.hoverSnapDuration)) {\n        root.style.setProperty('--abs-hover-snap-duration', `${Math.max(0, Math.round(g.hoverSnapDuration))}ms`);\n      }\n      if (Number.isFinite(g?.hoverSnapOvershoot)) {\n        root.style.setProperty('--abs-hover-snap-overshoot', String(g.hoverSnapOvershoot));\n      }\n      if (Number.isFinite(g?.hoverSnapUndershoot)) {\n        root.style.setProperty('--abs-hover-snap-undershoot', String(g.hoverSnapUndershoot));\n      }\n    } catch (e) {}\n    \n    // Ensure base noise element exists (for modular dev environments)\n    ensureNoiseElements();\n\n    // Procedural noise texture (no GIF): generates a small texture once and animates via CSS only.\n    try {\n      initNoiseSystem(getGlobals());\n    } catch (e) {}\n    \n    // Setup canvas (attaches resize listener, but doesn't resize yet)\n    setupRenderer();\n    const canvas = getCanvas();\n    const ctx = getContext();\n    const container = document.getElementById('bravia-balls');\n    \n    if (!canvas || !ctx || !container) {\n      throw new Error('Missing DOM elements');\n    }\n\n    // Ensure the brand logo renders ABOVE the rounded window background.\n    // We now paint the window background on `#bravia-balls` (single rounded surface)\n    // to avoid end-of-scale corner snapping. That means the logo must live inside\n    // the same stacking context to remain visible while still sitting behind balls.\n    try {\n      const logo = document.getElementById('brand-logo');\n      if (logo && logo.parentElement !== container) {\n        container.prepend(logo);\n      }\n    } catch (e) {}\n\n    // Accessibility: the canvas is an interactive surface (keyboard + pointer).\n    // Ensure we expose it as an application-like region for AT.\n    try {\n      canvas.setAttribute('role', 'application');\n      if (!canvas.getAttribute('aria-label')) {\n        canvas.setAttribute('aria-label', 'Interactive bouncy balls physics simulation');\n      }\n    } catch (e) {}\n    \n    // Set canvas reference in state (needed for container-relative sizing)\n    setCanvas(canvas, ctx, container);\n    \n    // NOW resize - container is available for container-relative sizing\n    resize();\n    mark('bb:renderer');\n    log('‚úì Canvas initialized (container-relative sizing)');\n    \n    // Ensure initial mouseInCanvas state is false for tests\n    const globals = getGlobals();\n    globals.mouseInCanvas = false;\n    if (typeof window !== 'undefined') window.mouseInCanvas = false;\n    \n    // Setup pointer tracking BEFORE dark mode (needed for interactions)\n    setupPointer();\n    log('‚úì Pointer tracking configured');\n\n    // iOS Safari: prevent page rubber-banding while still allowing UI internal scrolling.\n    setupOverscrollLock();\n    log('‚úì Overscroll lock configured');\n    \n    // Setup custom cursor (circular, matches ball size)\n    setupCustomCursor();\n    mark('bb:input');\n    log('‚úì Custom cursor initialized');\n\n    // Link hover: hide cursor + trail; let hover dot ‚Äúbecome‚Äù the cursor.\n    initLinkCursorHop();\n\n    // Scene micro-interaction: subtle \"clicked-in\" response on simulation changes\n    initSceneImpactReact();\n    \n    // Load any saved settings\n    loadSettings();\n\n    // Palette chapters: rotate on each reload (cursor + ball colors only).\n    rotatePaletteChapterOnReload();\n\n    // Initialize sound engine once (no AudioContext yet; unlock requires user gesture)\n    initSoundEngine();\n    // Apply sound settings from runtime config (so panel + exports round-trip).\n    try {\n      applySoundConfigFromRuntimeConfig(config);\n    } catch (e) {}\n    log('‚úì Sound engine primed (awaiting user unlock)');\n\n    // Scene change SFX (soothing ‚Äúpebble-like‚Äù tick on mode change)\n    initSceneChangeSFX();\n    \n    // DEV-only: setup configuration panel UI.\n    // Production builds must ship without the panel (config is hardcoded during build).\n    if (ABS_DEV) {\n      try {\n        const panelDock = await import('./modules/ui/panel-dock.js');\n        panelDock.createPanelDock?.();\n        const colors = await import('./modules/visual/colors.js');\n        colors.populateColorSelect?.();\n      } catch (e) {}\n    }\n    mark('bb:ui');\n    log(ABS_DEV ? '‚úì Panel dock created (Sound + Controls)' : '‚úì UI initialized (panel disabled in production)');\n\n    // Initialize dark mode AFTER panel creation (theme buttons exist now)\n    initializeDarkMode();\n    mark('bb:theme');\n\n    // Legend dots: assign discipline colors (palette-driven + story overrides)\n    applyExpertiseLegendColors();\n    // Interactive legend: hover + click filtering (shared module; must run in prod too)\n    initLegendFilterSystem();\n    log('‚úì Legend filter system configured');\n    \n    setupKeyboardShortcuts();\n    log('‚úì Keyboard shortcuts registered');\n    \n    // Initialize modal blur overlay system\n    try {\n      initModalOverlay(config);\n      log('‚úì Modal overlay system initialized');\n    } catch (e) {\n      console.warn('Modal overlay initialization error:', e?.message);\n    }\n\n    // Initialize password gates (CV and Portfolio protection)\n    try {\n      initCVModal();\n      log('‚úì CV password gate initialized');\n    } catch (e) {\n      console.warn('CV gate initialization error:', e?.message);\n    }\n\n    try {\n      initPortfolioModal();\n      log('‚úì Portfolio password gate initialized');\n    } catch (e) {\n      console.warn('Portfolio gate initialization error:', e?.message);\n    }\n\n    try {\n      initContactModal();\n      log('‚úì Contact gate initialized');\n    } catch (e) {\n      console.warn('Contact gate initialization error:', e?.message);\n    }\n\n    // Compose the top UI (LEGACY FUNCTION REMOVED - NOW IN DOM)\n    // setupTopElementsLayout();\n\n    // Normalize social icons (line SVGs) across dev + build.\n    // (Build uses the exported HTML; we patch at runtime for consistency.)\n    upgradeSocialIcons();\n\n    // Initialize time display (London time)\n    initTimeDisplay();\n\n    // Footer: mobile-friendly wrapping tweaks (keeps \"Bio/CV\" together)\n    enhanceFooterLinksForMobile();\n    \n    // Create quick sound toggle button (bottom-right, next to time)\n    createSoundToggle();\n    log('‚úì Sound toggle button created');\n    \n    // Create quick theme toggle button (bottom-left)\n    createThemeToggle();\n    log('‚úì Theme toggle button created');\n    \n    // Layout controls integrated into master panel\n    \n    // Initialize starting mode (randomized on each reload)\n    const startMode = pickStartupMode();\n    // Cursor color: auto-pick a new contrasty ball color per simulation load.\n    // Must run after theme/palette is initialized (initializeDarkMode ‚Üí applyColorTemplate).\n    maybeAutoPickCursorColor?.('startup');\n    setMode(startMode);\n    try {\n      const ui = await import('./modules/ui/controls.js');\n      ui.updateModeButtonsUI?.(startMode);\n    } catch (e) {}\n    mark('bb:mode');\n    log('‚úì Mode initialized');\n    \n    // Register force render callback for resize (prevents blank frames during drag-resize)\n    setForceRenderCallback(render);\n    \n    // NOTE: Scroll FX is portfolio-only (see `source/modules/portfolio/`).\n\n    // Start main render loop\n    const getForces = () => getForceApplicator();\n    startMainLoop((ball, dt) => {\n      const forceFn = getForces();\n      if (forceFn) forceFn(ball, dt);\n    });\n    \n    mark('bb:end');\n    log('‚úÖ Bouncy Balls running (modular)');\n\n    // DEV-only: summarize init timings in a compact table.\n    const rows = [\n      { phase: 'config', ms: measure('bb:m:config', 'bb:start', 'bb:config') },\n      { phase: 'renderer', ms: measure('bb:m:renderer', 'bb:config', 'bb:renderer') },\n      { phase: 'input', ms: measure('bb:m:input', 'bb:renderer', 'bb:input') },\n      { phase: 'ui', ms: measure('bb:m:ui', 'bb:input', 'bb:ui') },\n      { phase: 'theme', ms: measure('bb:m:theme', 'bb:ui', 'bb:theme') },\n      { phase: 'mode+loop', ms: measure('bb:m:mode', 'bb:theme', 'bb:mode') },\n      { phase: 'total', ms: measure('bb:m:total', 'bb:start', 'bb:end') },\n    ].filter((r) => typeof r.ms === 'number');\n    if (rows.length) table(rows.map((r) => ({ ...r, ms: Number(r.ms.toFixed(2)) })));\n    groupEnd();\n    \n    // Console banner: print AFTER colors are initialized and group is closed so it's always visible\n    // - DEV: show the same colored banner (but keep logs)\n    // - PROD: show banner and silence non-error console output\n    try {\n      if (isDev()) {\n        printConsoleBanner();\n      } else {\n        initConsolePolicy();\n      }\n    } catch (bannerError) {\n      // Ensure banner always prints even if there's an error\n      try {\n        console.error('Banner print error:', bannerError);\n        // Fallback: print simple banner\n        console.log('%cCurious mind detected. Design meets engineering at 60fps.', 'color: #888; font-style: italic;');\n      } catch (e) {\n        // Console completely unavailable\n      }\n    }\n    \n    // ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n    // ‚ïë                    DRAMATIC ENTRANCE ANIMATION                               ‚ïë\n    // ‚ïë        Browser default ‚Üí wall-state with 3D perspective orchestration        ‚ïë\n    // ‚ïë                                                                              ‚ïë\n    // ‚ïë  Uses unified navigation state to determine if wall animation should play:   ‚ïë\n    // ‚ïë  - Fresh session visit: Full wall grow animation                             ‚ïë\n    // ‚ïë  - Return from portfolio/CV: Quick fade-in only (skip wall animation)        ‚ïë\n    // ‚ïë  - Browser back/forward: Quick fade-in only (skip wall animation)            ‚ïë\n    // ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n    \n    try {\n      const { orchestrateEntrance, revealAllLateElements } = await import('./modules/visual/entrance-animation.js');\n      const { \n        getModalToAutoOpen, \n        shouldSkipWallAnimation, \n        resetTransitionState,\n        setupPrefetchOnHover,\n        initSpeculativePrefetch,\n        didViewTransitionRun\n      } = await import('./modules/utils/page-nav.js');\n      \n      const g = getGlobals();\n      const reduceMotion = !!window.matchMedia?.('(prefers-reduced-motion: reduce)')?.matches;\n      const elementDuration = g.entranceElementDuration ?? CONTENT_FADE_DURATION_MS;\n      const elementEasing = g.entranceElementEasing ?? CONTENT_FADE_EASING;\n\n      // Check navigation state BEFORE consuming it (getModalToAutoOpen reads but doesn't clear)\n      const autoOpenModal = getModalToAutoOpen();\n      \n      // Check if we should skip wall animation (internal nav or browser back/forward)\n      // Note: shouldSkipWallAnimation() consumes the navigation state\n      const skipWall = shouldSkipWallAnimation();\n      \n      // Check if View Transition just ran (Chrome) - skip entrance animation entirely\n      const skipEntrance = didViewTransitionRun();\n      \n      // Handle bfcache restore (browser back/forward with cached page)\n      window.addEventListener('pageshow', (event) => {\n        if (event.persisted) {\n          resetTransitionState();\n          const absScene = document.getElementById('abs-scene');\n          if (absScene) absScene.style.opacity = '1';\n        }\n      });\n      \n      // Setup prefetch on hover for gate triggers\n      const cvTrigger = document.getElementById('cv-gate-trigger');\n      const portfolioTrigger = document.getElementById('portfolio-gate-trigger');\n      if (cvTrigger) setupPrefetchOnHover(cvTrigger, 'cv.html');\n      if (portfolioTrigger) setupPrefetchOnHover(portfolioTrigger, 'portfolio.html');\n\n      // Skip entrance animation if disabled or reduced motion preferred\n      if (!g.entranceEnabled || reduceMotion) {\n        try { await waitForFonts(); } catch (e) {}\n        // Use config values for content fade-in (delay + duration)\n        await fadeInContentLayer();\n        // Also reveal late elements (logo + main links) that have inline hidden styles\n        revealAllLateElements();\n        console.log('‚úì Entrance animation skipped (disabled or reduced motion)');\n      } else {\n        // Orchestrate entrance (wall animation conditional on navigation state)\n        await orchestrateEntrance({\n          waitForFonts: async () => {\n            try {\n              await waitForFonts();\n            } catch (e) {}\n          },\n          skipWallAnimation: skipWall,\n          skipEntranceAnimation: skipEntrance\n        });\n        console.log(skipEntrance \n          ? '‚úì Entrance skipped (View Transition handled it)'\n          : skipWall \n            ? '‚úì Quick entrance (returning from internal page)' \n            : '‚úì Dramatic entrance animation orchestrated');\n      }\n      \n      // Auto-open modal if requested via navigation state\n      if (autoOpenModal === 'cv') {\n        // CV modal - trigger the gate open\n        setTimeout(() => {\n          const cvTriggerEl = document.getElementById('cv-gate-trigger');\n          if (cvTriggerEl) cvTriggerEl.click();\n        }, 400);\n      } else if (autoOpenModal === 'contact') {\n        // Contact modal - trigger the gate open\n        setTimeout(() => {\n          const contactTriggerEl = document.getElementById('contact-trigger');\n          if (contactTriggerEl) contactTriggerEl.click();\n        }, 400);\n      }\n      \n      // Initialize speculative prefetch system for faster page transitions\n      initSpeculativePrefetch();\n      \n    } catch (e) {\n      console.warn('‚ö†Ô∏è Entrance animation failed, falling back to simple fade:', e);\n      try { await waitForFonts(); } catch (e) {}\n      // Use config values for content fade-in (delay + duration)\n      await fadeInContentLayer();\n      // Fallback: also reveal late elements so nothing stays hidden\n      try {\n        const { revealAllLateElements } = await import('./modules/visual/entrance-animation.js');\n        revealAllLateElements();\n      } catch (err) {\n        // Manual fallback if module import fails\n        // NOTE: Do NOT clear transform - CSS may rely on it for positioning\n        // REMOVE inline opacity so CSS controls it (enables modal fade transitions)\n        ['main-links', 'brand-logo'].forEach((id) => {\n          const el = document.getElementById(id);\n          if (el) {\n            el.style.removeProperty('opacity');\n            if (id === 'brand-logo') {\n              el.style.removeProperty('filter');\n            }\n            el.style.visibility = 'visible';\n          }\n        });\n        const blocker = document.getElementById('fade-blocking');\n        if (blocker) blocker.remove();\n      }\n    }\n    \n  } catch (error) {\n    console.error('‚ùå Initialization failed:', error);\n    document.body.innerHTML = `<div style=\"padding: 20px; color: red; background: white;\">\n      <h2>Initialization Error</h2>\n      <pre>${error.message}\\n${error.stack}</pre>\n    </div>`;\n  }\n})();\n"],"names":[],"mappings":"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"}