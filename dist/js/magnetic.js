function t(){const t=c();r(),u=0;const n=t.canvas;if(!n)return;const o=n.width,a=n.height,M=i(Math.min(t.magneticBallCount||180,t.maxBalls||300));if(0>=M)return;const l=100*(t.DPR||1);for(let r=0;8>r&&M>r;r++){const n=Math.random()*o,r=Math.random()*a,c=f(t,e.MAGNETIC),{color:i,distributionIndex:u}=s(),M=new h(n,r,c,i);M.distributionIndex=u,M.vx=(Math.random()-.5)*l,M.vy=(Math.random()-.5)*l,M.baseAlpha=1,t.balls.push(M)}for(let r=8;M>r;r++){const n=Math.random()*o,r=Math.random()*a,c=f(t,e.MAGNETIC),{color:i,distributionIndex:u}=s(),M=new h(n,r,c,i);M.distributionIndex=u,M.vx=(Math.random()-.5)*l,M.vy=(Math.random()-.5)*l,M.baseAlpha=1,t.balls.push(M)}}function n(t,n){const o=c();if(o.currentMode!==e.MAGNETIC)return;if(!o.mouseInCanvas)return;const a=o.DPR||1,r=o.magneticStrength||65e3,s=o.magneticRadius||0,i=o.mouseX-t.x,f=o.mouseY-t.y,h=i*i+f*f,u=Math.max(30*a,Math.sqrt(h));if(s>0&&u>s*a)return;const M=r/h*1e3,l=f/u;t.vx+=i/u*M*n,t.vy+=l*M*n,t.omega=0;const d=(o.magneticMaxVelocity||2800)*a,m=Math.sqrt(t.vx*t.vx+t.vy*t.vy);m>d&&(t.vx=t.vx/m*d,t.vy=t.vy/m*d);const p=o.magneticDamping??.998;t.vx*=p,t.vy*=p}function o(){const t=c();if(t.currentMode===e.MAGNETIC)for(let n=0;t.balls.length>n;n++)t.balls[n].alpha=1}function a(){return u}import{am as r,aO as s,g as c,ao as e,aP as i,aQ as f}from"./shared.js";import{B as h}from"./Ball.js";let u=0;export{n as applyMagneticForces,a as getExplosionTimer,t as initializeMagnetic,o as updateMagnetic};