function t(){const t=n(),a=t.canvas;if(!a)return;M();const o=a.width,m=a.height,d=e(Math.max(0,Math.min(40,Math.round(t.parallaxLinearGridX??14)))),p=e(Math.max(0,Math.min(40,Math.round(t.parallaxLinearGridY??10)))),g=e(Math.max(0,Math.min(20,Math.round(t.parallaxLinearGridZ??7))));if(0>=d||0>=p||0>=g)return;const j=Math.max(.2,Math.min(8,t.parallaxLinearSpanX??1.35)),v=Math.max(.2,Math.min(8,t.parallaxLinearSpanY??1.35)),x=-.5*o*j,b=-.5*m*v,y=o*j/Math.max(1,d-1),z=m*v/Math.max(1,p-1),Z=Math.max(10,t.parallaxLinearZNear??50),w=(Math.max(Z+100,t.parallaxLinearZFar??800)-Z)/Math.max(1,g-1);l={gridZ:g},c=0,u=[];for(let h=0;d>h;h++){u[h]=[];for(let t=0;p>t;t++){u[h][t]=[];for(let a=0;g>a;a++)u[h][t][a]=s()}}const B=Math.max(80,t.parallaxLinearFocalLength??420),N=.768*(t.R_MED||20)*(t.DPR||1)*Math.max(.1,Math.min(6,t.parallaxLinearDotSizeMul??1.8)),P=f(t,i.PARALLAX_LINEAR),R=.5*o,S=.5*m;for(let M=g-1;M>=0;M--){const a=Z+M*w,o=M/Math.max(1,g-1);for(let s=0;p>s;s++)for(let n=0;d>n;n++){const e=x+n*y,f=b+s*z,i=a,c=B/(B+i),l=N*c,m=.75,d=1-.85*(o>m?(o-m)/(1-m):0),p=h(R+e*c,S+f*c,u[n][s][M]);p.r=r(t,l),p.vx=0,p.vy=0,p.alpha=d,p.t={x:e,y:f,z:i,baseScale:c},p.o=P>1e-6?1+(2*Math.random()-1)*P:1,p.h=!0,p.M=n,p.i=s,p.l=M,p.z=1-o}}}function a(t){n().canvas&&(c+=0*t)}function o(t){if(!t.t)return;const a=n(),o=a.canvas;if(!o)return;const h=.5*o.width,M=.5*o.height,s=Math.max(100,a.parallaxLinearFocalLength??400);let{x:e,y:f,z:i}=t.t;const m=s/(s+i),d=h+(e+0)*m,p=M+(f+0)*m;if(void 0!==t.M&&void 0!==t.i&&void 0!==t.l){const a=t.M,o=t.i,h=l.gridZ;h>0&&u[a]&&u[a][o]&&(t.color=u[a][o][((t.l+Math.floor(c))%h%h+h)%h])}t.r=r(a,.768*(a.R_MED||20)*(a.DPR||1)*Math.max(.1,Math.min(6,a.parallaxLinearDotSizeMul??1.8))*(Number.isFinite(t.o)?t.o:1)*m),t.x=d,t.y=p,t.vx=0,t.vy=0}import{s as h}from"./spawn.js";import{am as M,aR as s,an as r,g as n,aP as e,aU as f,ao as i}from"./shared.js";import"./Ball.js";let c=0,l={gridZ:0},u=[];export{o as applyParallaxLinearForces,t as initializeParallaxLinear,a as updateParallaxLinearMouse};