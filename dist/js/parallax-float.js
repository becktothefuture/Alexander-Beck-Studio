function t(){const t=r(),a=t.canvas;if(!a)return;i=0,l=0,m=!1,s();const h=a.width,p=a.height,u=e(Math.max(0,Math.min(40,Math.round(t.parallaxFloatGridX??t.parallaxLinearGridX??14)))),j=e(Math.max(0,Math.min(40,Math.round(t.parallaxFloatGridY??t.parallaxLinearGridY??10)))),X=e(Math.max(0,Math.min(20,Math.round(t.parallaxFloatGridZ??t.parallaxLinearGridZ??7))));if(0>=u||0>=j||0>=X)return;const Y=Math.max(0,Math.min(10,t.parallaxFloatSpanX??t.parallaxLinearSpanX??3)),b=Math.max(0,Math.min(10,t.parallaxFloatSpanY??t.parallaxLinearSpanY??3)),q=-.5*h*Y,x=-.5*p*b,d=h*Y/Math.max(1,u-1),g=p*b/Math.max(1,j-1),w=Math.max(10,t.parallaxFloatZNear??t.parallaxLinearZNear??50),y=(Math.max(w+100,t.parallaxFloatZFar??t.parallaxLinearZFar??800)-w)/Math.max(1,X-1),z=Math.max(80,t.parallaxFloatFocalLength??t.parallaxLinearFocalLength??420),B=.768*(t.R_MED||20)*(t.DPR||1)*Math.max(.1,Math.min(6,t.parallaxFloatDotSizeMul??t.parallaxLinearDotSizeMul??1.8)),N=c(t,f.PARALLAX_FLOAT);let P=t.parallaxFloatRandomize??50;const R=Math.max(0,Math.min(1,P>1?P/100:P)),S=.5*h,U=.5*p;for(let s=X-1;s>=0;s--){const a=w+s*y,h=s/Math.max(1,X-1);for(let s=0;j>s;s++)for(let r=0;u>r;r++){const e=x+s*g,c=a,f=q+r*d+(Math.random()-.5)*d*R*2,i=e+(Math.random()-.5)*g*R*2,l=c+(Math.random()-.5)*y*R*2,m=z/(z+l),p=S+f*m,u=U+i*m,j=B*m,X=.75,Y=1-.85*(h>X?(h-X)/(1-X):0),b=n(),w=M(p,u,b);w.r=o(t,j),w.vx=0,w.vy=0,w.alpha=Y;const P=Math.max(0,t.parallaxFloatLevitationAmp??20),k=Math.max(.01,t.parallaxFloatLevitationSpeed??.2);w.t={x:f,y:i,z:l,baseScale:m,phaseX:Math.random()*Math.PI*2,phaseY:Math.random()*Math.PI*2,freqX:k*(.75+.5*Math.random()),freqY:k*(.6+.4*Math.random()),ampX:P*(.4+.8*Math.random()),ampY:P*(.5+1*Math.random())},w.h=N>1e-6?1+(2*Math.random()-1)*N:1,w.M=!0,w.z=1-h}}}function a(t){const a=r(),h=a.canvas;if(!h)return;const M=.5*h.height;let s=0,n=0;a.mouseInCanvas&&(s=Math.max(-1,Math.min(1,(a.mouseX-.5*h.width)/(.5*h.width))),n=Math.max(-1,Math.min(1,(a.mouseY-M)/(.5*h.height))));const o=1-Math.exp(-Math.max(.5,Math.min(20,a.parallaxFloatMouseEasing??a.parallaxLinearMouseEasing??4))*t);m?(i+=(s-i)*o,l+=(n-l)*o):(i=s,l=n,m=!0)}function h(t,a){if(!t.t)return;const h=r(),M=h.canvas;if(!M)return;const s=t.t;s.phaseX+=s.freqX*a*Math.PI*2,s.phaseY+=s.freqY*a*Math.PI*2;const n=s.x+Math.sin(s.phaseX)*s.ampX,e=s.y+Math.sin(s.phaseY)*s.ampY,c=s.z,f=.5*M.width,m=.5*M.height,p=i,u=l,j=Math.max(100,h.parallaxFloatFocalLength??h.parallaxLinearFocalLength??400),X=Math.max(0,h.parallaxFloatParallaxStrength??h.parallaxLinearParallaxStrength??120),Y=j/(j+c),b=f+(n+p*X)*Y,q=m+(e+u*X)*Y;t.r=o(h,.768*(h.R_MED||20)*(h.DPR||1)*Math.max(.1,Math.min(6,h.parallaxFloatDotSizeMul??h.parallaxLinearDotSizeMul??1.8))*(Number.isFinite(t.h)?t.h:1)*Y),t.x=b,t.y=q,t.vx=0,t.vy=0}import{s as M}from"./spawn.js";import{am as s,aR as n,an as o,g as r,aP as e,aU as c,ao as f}from"./shared.js";import"./Ball.js";let i=0,l=0,m=!1;export{h as applyParallaxFloatForces,t as initializeParallaxFloat,a as updateParallaxFloatMouse};