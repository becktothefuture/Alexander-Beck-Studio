import{l as o,c as e,T as a,g as t,f as n,_ as c,k as i,$ as r,a0 as s,z as l,C as d,a1 as m,K as g,I as p,H as h,a2 as f,a3 as u,a4 as v,a5 as w}from"./shared.js";import{i as y}from"./wall-only-canvas.js";const C={imageFolder:"images/cv-images/",images:["profile-image-01.jpg","profile-image-02.jpg","profile-image-03.jpg","profile-image-04.jpg","profile-image-05.jpg","profile-image-06.jpg","profile-image-07.jpg","profile-image-08.jpg","profile-image-09.jpg","profile-image-10.jpg"]},V=[{x:-50,y:-50,rotate:0}];document.addEventListener("DOMContentLoaded",()=>{(async()=>{try{await o(),e()}catch(S){}try{await a()}catch(S){}try{const o=t(),e=document.getElementById("app-frame"),n=!!window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches,c=()=>{try{const o=document.getElementById("fade-blocking");o&&o.remove()}catch(S){}},i=o=>{if(!e)return;e.style.opacity="1",e.style.transform="translateZ(0)",c();const a=document.querySelector(".cv-scroll-container");a&&(a.style.opacity="1",a.style.visibility="visible"),console.warn(`⚠️ CV entrance fallback (${o})`)},{didViewTransitionRun:r}=await import("./shared.js").then(o=>o.aL);if(r()){e&&(e.style.opacity="1",e.style.visibility="visible",e.style.transform="translateZ(0)");const o=document.querySelector(".cv-scroll-container");o&&(o.style.opacity="1",o.style.visibility="visible"),c(),console.log("✓ CV entrance skipped (View Transition handled it)")}else if(!o.entranceEnabled||n){e&&(e.style.opacity="1",e.style.transform="translateZ(0)");const o=document.querySelector(".cv-scroll-container");o&&(o.style.opacity="1",o.style.visibility="visible"),c(),console.log("✓ CV entrance animation skipped (disabled or reduced motion)")}else{const{orchestrateEntrance:o}=await import("./shared.js").then(o=>o.aM);await o({async waitForFonts(){try{await a()}catch(S){}},skipWallAnimation:!0,centralContent:[".cv-scroll-container"]}),c(),console.log("✓ Dramatic entrance animation orchestrated (CV)")}window.setTimeout(()=>{e&&"0"===window.getComputedStyle(e).opacity&&i("watchdog")},2500)}catch(S){const o=document.getElementById("app-frame");o&&(o.style.opacity="1",o.style.transform="translateZ(0)");const e=document.querySelector(".cv-scroll-container");e&&(e.style.opacity="1",e.style.visibility="visible"),console.warn("⚠️ CV entrance animation failed, forcing content visible",S)}let j=null;try{j=await n(),c(j);try{y({canvasSelector:".cv-wall-canvas"})}catch(S){}try{i(t())}catch(S){}window.addEventListener("resize",r,{passive:!0})}catch(S){try{i()}catch(T){}}s({contactModal:!0,cvModal:!1,portfolioModal:!0,cursorHiding:!0,modalOverlayConfig:j||{}}),l(),d();const $=t(),b=document.documentElement;if(j)m(j);else{const o=$?.frameColorLight||$?.frameColor,e=$?.frameColorDark||$?.frameColor;o&&b.style.setProperty("--frame-color-light",o),e&&b.style.setProperty("--frame-color-dark",e)}const k=$?.frameColorLight||$?.frameColor,M=$?.frameColorDark||$?.frameColor;k&&b.style.setProperty("--frame-color-light",k),M&&b.style.setProperty("--frame-color-dark",M);const z=$.isDarkMode?M:k;if(z){const o=document.querySelector('meta[name="theme-color"]');o&&(o.content=z),b.style.setProperty("--chrome-bg",z)}g?.("startup"),p(),h();try{try{await a()}catch(S){}}catch(S){}try{(()=>{function o(){const o=t.scrollTop,e=t.scrollHeight-t.clientHeight,i=e>0?o/e:0,r=Math.min(Math.floor(i*n.length),n.length-1);console.log(`[CV Scroll Debug] top:${o.toFixed(0)} max:${e.toFixed(0)} progress:${(100*i).toFixed(1)}% → img ${r+1}/${n.length}`),r!==c&&(c=r,a.src=n[c],console.log("[CV Photo] ✓ Changed to image "+(r+1)))}const e=document.querySelector(".cv-photo"),a=document.querySelector(".cv-photo__image"),t=document.querySelector(".cv-right");if(!e||!a||!t)return console.warn("[CV Photo Slideshow] Required elements not found"),null;const n=C.images.map(o=>`${C.imageFolder}${o}`);let c=0,i=0;a.src=n[0],(()=>{const o=V[i];a.style.transform=`translate(${o.x}%, ${o.y}%) rotate(${o.rotate}deg)`,i=(i+1)%V.length})(),t.addEventListener("scroll",()=>{o()},{passive:!0}),setTimeout(()=>{o()},500),e.style.cursor="pointer",e.addEventListener("click",o=>{o.preventDefault(),n.length>1&&(c=(c+1)%n.length,a.src=n[c])}),console.log(`[CV Photo Slideshow] Initialized with ${n.length} image(s) - scroll-driven`)})()}catch(S){console.warn("CV photo slideshow failed to initialize",S)}document.querySelectorAll("[data-nav-transition]").forEach(o=>{o.addEventListener("click",e=>{e.preventDefault(),f(o.href,u.INTERNAL)})}),window.addEventListener("pageshow",o=>{if(o.persisted){v();const o=document.getElementById("app-frame");o&&(o.style.opacity="1")}});const x=document.querySelector('[data-nav-transition][href*="index"]');x&&w(x,"index.html");try{const o=document.getElementById("grunge-video-overlay");if(o&&o.querySelector("source")){const e=()=>{o.classList.add("loaded"),console.log("✓ Grunge video overlay faded in (CV)")};3>o.readyState?(o.addEventListener("canplaythrough",e,{once:!0}),o.addEventListener("error",()=>{console.warn("⚠️ Grunge video failed to load (CV)")},{once:!0})):e(),o.play().catch(o=>{console.warn("⚠️ Grunge video autoplay blocked (CV):",o.message)})}}catch(Z){console.warn("⚠️ Video overlay initialization error (CV):",Z)}})()});