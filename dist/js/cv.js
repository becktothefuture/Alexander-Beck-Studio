import{l as a,a as o,R as t,g as e,d as c,X as n,h as i,Y as s,Z as r,x as l,A as m,_ as d,I as p,G as g,F as h,$ as f,a0 as u,a1 as w,a2 as v}from"./shared.js";import{i as y}from"./wall-only-canvas.js";const j={imageFolder:"images/cv-images/",images:["profile-image-01.jpg","profile-image-02.jpg","profile-image-03.jpg","profile-image-04.jpg","profile-image-05.jpg","profile-image-06.jpg","profile-image-07.jpg","profile-image-08.jpg","profile-image-09.jpg","profile-image-10.jpg"]},C=[{x:-50,y:-50,rotate:0}];document.addEventListener("DOMContentLoaded",()=>{(async()=>{try{await a(),o()}catch(S){}try{await t()}catch(S){}try{const a=e(),o=document.getElementById("app-frame"),c=!!window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches,n=()=>{try{const a=document.getElementById("fade-blocking");a&&a.remove()}catch(S){}},i=a=>{if(!o)return;o.style.opacity="1",o.style.transform="translateZ(0)",n();const t=document.querySelector(".cv-scroll-container");t&&(t.style.opacity="1",t.style.visibility="visible"),console.warn(`⚠️ CV entrance fallback (${a})`)};if(!a.entranceEnabled||c){o&&(o.style.opacity="1",o.style.transform="translateZ(0)");const a=document.querySelector(".cv-scroll-container");a&&(a.style.opacity="1",a.style.visibility="visible"),n(),console.log("✓ CV entrance animation skipped (disabled or reduced motion)")}else{const{orchestrateEntrance:a}=await import("./shared.js").then(a=>a.aP);await a({async waitForFonts(){try{await t()}catch(S){}},skipWallAnimation:!0,centralContent:[".cv-scroll-container"]}),n(),console.log("✓ Dramatic entrance animation orchestrated (CV)")}window.setTimeout(()=>{o&&"0"===window.getComputedStyle(o).opacity&&i("watchdog")},2500)}catch(S){const a=document.getElementById("app-frame");a&&(a.style.opacity="1",a.style.transform="translateZ(0)");const o=document.querySelector(".cv-scroll-container");o&&(o.style.opacity="1",o.style.visibility="visible"),console.warn("⚠️ CV entrance animation failed, forcing content visible",S)}let $=null;try{$=await c(),n($);try{y({canvasSelector:".cv-wall-canvas"})}catch(S){}try{i(e())}catch(S){}window.addEventListener("resize",s,{passive:!0})}catch(S){try{i()}catch(Z){}}r({contactModal:!0,cvModal:!1,portfolioModal:!0,cursorHiding:!0,modalOverlayConfig:$||{}}),l(),m();const b=e(),V=document.documentElement;if($)d($);else{const a=b?.frameColorLight||b?.frameColor,o=b?.frameColorDark||b?.frameColor;a&&V.style.setProperty("--frame-color-light",a),o&&V.style.setProperty("--frame-color-dark",o)}const k=b?.frameColorLight||b?.frameColor,M=b?.frameColorDark||b?.frameColor;k&&V.style.setProperty("--frame-color-light",k),M&&V.style.setProperty("--frame-color-dark",M);const x=b.isDarkMode?M:k;if(x){const a=document.querySelector('meta[name="theme-color"]');a&&(a.content=x),V.style.setProperty("--chrome-bg",x)}p?.("startup"),g(),h();try{try{await t()}catch(S){}}catch(S){}try{(()=>{function a(){const a=e.scrollTop,o=e.scrollHeight-e.clientHeight,i=o>0?a/o:0,s=Math.min(Math.floor(i*c.length),c.length-1);console.log(`[CV Scroll Debug] top:${a.toFixed(0)} max:${o.toFixed(0)} progress:${(100*i).toFixed(1)}% → img ${s+1}/${c.length}`),s!==n&&(n=s,t.src=c[n],console.log("[CV Photo] ✓ Changed to image "+(s+1)))}const o=document.querySelector(".cv-photo"),t=document.querySelector(".cv-photo__image"),e=document.querySelector(".cv-right");if(!o||!t||!e)return console.warn("[CV Photo Slideshow] Required elements not found"),null;const c=j.images.map(a=>`${j.imageFolder}${a}`);let n=0,i=0;t.src=c[0],(()=>{const a=C[i];t.style.transform=`translate(${a.x}%, ${a.y}%) rotate(${a.rotate}deg)`,i=(i+1)%C.length})(),e.addEventListener("scroll",()=>{a()},{passive:!0}),setTimeout(()=>{a()},500),o.style.cursor="pointer",o.addEventListener("click",a=>{a.preventDefault(),c.length>1&&(n=(n+1)%c.length,t.src=c[n])}),console.log(`[CV Photo Slideshow] Initialized with ${c.length} image(s) - scroll-driven`)})()}catch(S){console.warn("CV photo slideshow failed to initialize",S)}document.querySelectorAll("[data-nav-transition]").forEach(a=>{a.addEventListener("click",o=>{o.preventDefault(),f(a.href,u.INTERNAL)})}),window.addEventListener("pageshow",a=>{if(a.persisted){w();const a=document.getElementById("app-frame");a&&(a.style.opacity="1")}});const F=document.querySelector('[data-nav-transition][href*="index"]');F&&v(F,"index.html")})()});