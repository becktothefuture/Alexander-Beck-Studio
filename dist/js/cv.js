import{l as e,c as t,T as o,g as a,f as n,_ as c,k as i,$ as r,a0 as s,z as l,C as d,a1 as m,K as p,I as u,H as g,a2 as h,a3 as f,a4 as v,a5 as w}from"./shared.js";import{i as y}from"./wall-only-canvas.js";const b={imageFolder:"images/cv-images/",images:["profile-image-01.jpg","profile-image-02.jpg","profile-image-03.jpg","profile-image-04.jpg","profile-image-05.jpg","profile-image-06.jpg","profile-image-07.jpg","profile-image-08.jpg","profile-image-09.jpg","profile-image-10.jpg"]},C=[{x:-50,y:-50,rotate:0}];document.addEventListener("DOMContentLoaded",()=>{(async()=>{try{await e(),t()}catch(z){}try{await o()}catch(z){}try{const e=a(),t=document.getElementById("app-frame"),n=!!window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches,c=()=>{try{const e=document.getElementById("fade-blocking");e&&e.remove()}catch(z){}},i=e=>{if(!t)return;t.style.opacity="1",t.style.transform="translateZ(0)",c();const o=document.querySelector(".cv-scroll-container");o&&(o.style.opacity="1",o.style.visibility="visible"),console.warn(`⚠️ CV entrance fallback (${e})`)},{didViewTransitionRun:r}=await import("./shared.js").then(e=>e.aJ);if(r()){t&&(t.style.opacity="1",t.style.visibility="visible",t.style.transform="translateZ(0)");const e=document.querySelector(".cv-scroll-container");e&&(e.style.opacity="1",e.style.visibility="visible"),c(),console.log("✓ CV entrance skipped (View Transition handled it)")}else if(!e.entranceEnabled||n){t&&(t.style.opacity="1",t.style.transform="translateZ(0)");const e=document.querySelector(".cv-scroll-container");e&&(e.style.opacity="1",e.style.visibility="visible"),c(),console.log("✓ CV entrance animation skipped (disabled or reduced motion)")}else{const{orchestrateEntrance:e}=await import("./shared.js").then(e=>e.aK);await e({async waitForFonts(){try{await o()}catch(z){}},skipWallAnimation:!0,centralContent:[".cv-scroll-container"]}),c(),console.log("✓ Dramatic entrance animation orchestrated (CV)")}window.setTimeout(()=>{t&&"0"===window.getComputedStyle(t).opacity&&i("watchdog")},2500)}catch(z){const e=document.getElementById("app-frame");e&&(e.style.opacity="1",e.style.transform="translateZ(0)");const t=document.querySelector(".cv-scroll-container");t&&(t.style.opacity="1",t.style.visibility="visible"),console.warn("⚠️ CV entrance animation failed, forcing content visible",z)}let j=null;try{j=await n(),c(j);try{y({canvasSelector:".cv-wall-canvas"})}catch(z){}try{i(a())}catch(z){}try{const e=document.getElementById("grunge-video-overlay");if(e){let t=!1,o=!1;const a=()=>{if(t)return;const e=document.documentElement.classList.contains("entrance-complete"),a=document.body.classList.contains("noise-ready");o&&e&&a&&(t=!0,document.body.classList.add("video-fade-ready"))};new MutationObserver(()=>{document.documentElement.classList.contains("entrance-complete")&&a()}).observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),new MutationObserver(()=>{document.body.classList.contains("noise-ready")&&a()}).observe(document.body,{attributes:!0,attributeFilter:["class"]}),e.addEventListener("loadstart",()=>{},{once:!0}),e.addEventListener("loadedmetadata",()=>{},{once:!0}),e.addEventListener("canplaythrough",()=>{o=!0,a();const t=e.play();void 0!==t&&t.then(()=>{}).catch(()=>{})},{once:!0}),e.addEventListener("error",()=>{},{once:!0})}}catch(z){}window.addEventListener("resize",r,{passive:!0})}catch(z){try{i()}catch(O){}}s({contactModal:!0,cvModal:!1,portfolioModal:!0,cursorHiding:!0,modalOverlayConfig:j||{}}),l(),d();const $=a(),V=document.documentElement;if(j)m(j);else{const e=$?.frameColorLight||$?.frameColor,t=$?.frameColorDark||$?.frameColor;e&&V.style.setProperty("--frame-color-light",e),t&&V.style.setProperty("--frame-color-dark",t)}const k=$?.frameColorLight||$?.frameColor,M=$?.frameColorDark||$?.frameColor;k&&V.style.setProperty("--frame-color-light",k),M&&V.style.setProperty("--frame-color-dark",M);const F=$.isDarkMode?M:k;if(F){const e=document.querySelector('meta[name="theme-color"]');e&&(e.content=F),V.style.setProperty("--chrome-bg",F)}p?.("startup"),u(),g();try{try{await o()}catch(z){}}catch(z){}try{(()=>{function e(){const e=a.scrollTop,t=a.scrollHeight-a.clientHeight,i=t>0?e/t:0,r=Math.min(Math.floor(i*n.length),n.length-1);console.log(`[CV Scroll Debug] top:${e.toFixed(0)} max:${t.toFixed(0)} progress:${(100*i).toFixed(1)}% → img ${r+1}/${n.length}`),r!==c&&(c=r,o.src=n[c],console.log("[CV Photo] ✓ Changed to image "+(r+1)))}const t=document.querySelector(".cv-photo"),o=document.querySelector(".cv-photo__image"),a=document.querySelector(".cv-right");if(!t||!o||!a)return console.warn("[CV Photo Slideshow] Required elements not found"),null;const n=b.images.map(e=>`${b.imageFolder}${e}`);let c=0,i=0;o.src=n[0],(()=>{const e=C[i];o.style.transform=`translate(${e.x}%, ${e.y}%) rotate(${e.rotate}deg)`,i=(i+1)%C.length})(),a.addEventListener("scroll",()=>{e()},{passive:!0}),setTimeout(()=>{e()},500),t.style.cursor="pointer",t.addEventListener("click",e=>{e.preventDefault(),n.length>1&&(c=(c+1)%n.length,o.src=n[c])}),console.log(`[CV Photo Slideshow] Initialized with ${n.length} image(s) - scroll-driven`)})()}catch(z){console.warn("CV photo slideshow failed to initialize",z)}document.querySelectorAll("[data-nav-transition]").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),h(e.href,f.INTERNAL)})}),window.addEventListener("pageshow",e=>{if(e.persisted){v();const e=document.getElementById("app-frame");e&&(e.style.opacity="1")}});const x=document.querySelector('[data-nav-transition][href*="index"]');x&&w(x,"index.html")})()});