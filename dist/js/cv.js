import{l as a,f as e,_ as t,g as o,k as i,a6 as n,a7 as c,q as s,a8 as r,E as l,H as d,S as m,O as p,M as g,a9 as h,aa as w,ab as f,ac as u}from"./shared.js";import{i as v}from"./wall-only-canvas.js";const y={imageFolder:"images/cv-images/",images:["profile-image-01.jpg","profile-image-02.jpg","profile-image-03.jpg","profile-image-04.jpg","profile-image-05.jpg","profile-image-06.jpg","profile-image-07.jpg","profile-image-08.jpg","profile-image-09.jpg","profile-image-10.jpg"]},C=[{x:-50,y:-50,rotate:0}];document.addEventListener("DOMContentLoaded",()=>{(async()=>{try{await a(),e()}catch(k){}try{await t()}catch(k){}try{const a=o(),e=document.getElementById("app-frame"),i=!!window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches,n=()=>{try{const a=document.getElementById("fade-blocking");a&&a.remove()}catch(k){}},c=a=>{if(!e)return;e.style.opacity="1",e.style.transform="translateZ(0)",n();const t=document.querySelector(".cv-scroll-container");t&&(t.style.opacity="1",t.style.visibility="visible"),console.warn(`⚠️ CV entrance fallback (${a})`)},{didViewTransitionRun:s}=await import("./shared.js").then(a=>a.aW);if(s()){e&&(e.style.opacity="1",e.style.visibility="visible",e.style.transform="translateZ(0)");const a=document.querySelector(".cv-scroll-container");a&&(a.style.opacity="1",a.style.visibility="visible"),n(),console.log("✓ CV entrance skipped (View Transition handled it)")}else if(!a.entranceEnabled||i){e&&(e.style.opacity="1",e.style.transform="translateZ(0)");const a=document.querySelector(".cv-scroll-container");a&&(a.style.opacity="1",a.style.visibility="visible"),n(),console.log("✓ CV entrance animation skipped (disabled or reduced motion)")}else{const{orchestrateEntrance:a}=await import("./shared.js").then(a=>a.aX);await a({async waitForFonts(){try{await t()}catch(k){}},skipWallAnimation:!0,centralContent:[".cv-scroll-container"]}),n(),console.log("✓ Dramatic entrance animation orchestrated (CV)")}window.setTimeout(()=>{e&&"0"===window.getComputedStyle(e).opacity&&c("watchdog")},2500)}catch(k){const a=document.getElementById("app-frame");a&&(a.style.opacity="1",a.style.transform="translateZ(0)");const e=document.querySelector(".cv-scroll-container");e&&(e.style.opacity="1",e.style.visibility="visible"),console.warn("⚠️ CV entrance animation failed, forcing content visible",k)}let j=null;try{j=await i(),n(j),requestAnimationFrame(()=>{c()});try{v({canvasSelector:".cv-wall-canvas"})}catch(k){}try{s(o())}catch(k){}window.addEventListener("resize",c,{passive:!0}),window.visualViewport&&window.visualViewport.addEventListener("resize",c,{passive:!0})}catch(k){try{s()}catch(M){}}r({contactModal:!0,cvModal:!1,portfolioModal:!0,cursorHiding:!0,modalOverlayConfig:j||{}}),l(),d();const b=document.documentElement,V=getComputedStyle(b).getPropertyValue("--wall-color").trim();V&&b.style.setProperty("--chrome-bg",V),m?.("startup"),p(),g();try{try{await t()}catch(k){}}catch(k){}try{(()=>{function a(){const a=o.scrollTop,e=o.scrollHeight-o.clientHeight,c=e>0?a/e:0,s=Math.min(Math.floor(c*i.length),i.length-1);console.log(`[CV Scroll Debug] top:${a.toFixed(0)} max:${e.toFixed(0)} progress:${(100*c).toFixed(1)}% → img ${s+1}/${i.length}`),s!==n&&(n=s,t.src=i[n],console.log("[CV Photo] ✓ Changed to image "+(s+1)))}const e=document.querySelector(".cv-photo"),t=document.querySelector(".cv-photo__image"),o=document.querySelector(".cv-right");if(!e||!t||!o)return console.warn("[CV Photo Slideshow] Required elements not found"),null;const i=y.images.map(a=>`${y.imageFolder}${a}`);let n=0,c=0;t.src=i[0],(()=>{const a=C[c];t.style.transform=`translate(${a.x}%, ${a.y}%) rotate(${a.rotate}deg)`,c=(c+1)%C.length})(),o.addEventListener("scroll",()=>{a()},{passive:!0}),setTimeout(()=>{a()},500),e.style.cursor="pointer",e.addEventListener("click",a=>{a.preventDefault(),i.length>1&&(n=(n+1)%i.length,t.src=i[n])}),console.log(`[CV Photo Slideshow] Initialized with ${i.length} image(s) - scroll-driven`)})()}catch(k){console.warn("CV photo slideshow failed to initialize",k)}document.querySelectorAll("[data-nav-transition]").forEach(a=>{a.addEventListener("click",e=>{e.preventDefault(),h(a.href,w.INTERNAL)})}),window.addEventListener("pageshow",a=>{if(a.persisted){f();const a=document.getElementById("app-frame");a&&(a.style.opacity="1")}});const $=document.querySelector('[data-nav-transition][href*="index"]');$&&u($,"index.html")})()});