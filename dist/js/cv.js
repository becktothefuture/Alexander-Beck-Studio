import{l as e,f as t,Z as a,g as o,k as n,a5 as c,q as i,a6 as r,a7 as s,E as l,H as d,a8 as m,R as p,O as u,M as g,a9 as h,aa as f,ab as v,ac as w}from"./shared.js";import{i as y}from"./wall-only-canvas.js";const b={imageFolder:"images/cv-images/",images:["profile-image-01.jpg","profile-image-02.jpg","profile-image-03.jpg","profile-image-04.jpg","profile-image-05.jpg","profile-image-06.jpg","profile-image-07.jpg","profile-image-08.jpg","profile-image-09.jpg","profile-image-10.jpg"]},j=[{x:-50,y:-50,rotate:0}];document.addEventListener("DOMContentLoaded",()=>{(async()=>{try{await e(),t()}catch(Z){}try{await a()}catch(Z){}try{const e=o(),t=document.getElementById("app-frame"),n=!!window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches,c=()=>{try{const e=document.getElementById("fade-blocking");e&&e.remove()}catch(Z){}},i=e=>{if(!t)return;t.style.opacity="1",t.style.transform="translateZ(0)",c();const a=document.querySelector(".cv-scroll-container");a&&(a.style.opacity="1",a.style.visibility="visible"),console.warn(`⚠️ CV entrance fallback (${e})`)},{didViewTransitionRun:r}=await import("./shared.js").then(e=>e.aO);if(r()){t&&(t.style.opacity="1",t.style.visibility="visible",t.style.transform="translateZ(0)");const e=document.querySelector(".cv-scroll-container");e&&(e.style.opacity="1",e.style.visibility="visible"),c(),console.log("✓ CV entrance skipped (View Transition handled it)")}else if(!e.entranceEnabled||n){t&&(t.style.opacity="1",t.style.transform="translateZ(0)");const e=document.querySelector(".cv-scroll-container");e&&(e.style.opacity="1",e.style.visibility="visible"),c(),console.log("✓ CV entrance animation skipped (disabled or reduced motion)")}else{const{orchestrateEntrance:e}=await import("./shared.js").then(e=>e.aP);await e({async waitForFonts(){try{await a()}catch(Z){}},skipWallAnimation:!0,centralContent:[".cv-scroll-container"]}),c(),console.log("✓ Dramatic entrance animation orchestrated (CV)")}window.setTimeout(()=>{t&&"0"===window.getComputedStyle(t).opacity&&i("watchdog")},2500)}catch(Z){const e=document.getElementById("app-frame");e&&(e.style.opacity="1",e.style.transform="translateZ(0)");const t=document.querySelector(".cv-scroll-container");t&&(t.style.opacity="1",t.style.visibility="visible"),console.warn("⚠️ CV entrance animation failed, forcing content visible",Z)}let C=null;try{C=await n(),c(C);try{y({canvasSelector:".cv-wall-canvas"})}catch(Z){}try{i(o())}catch(Z){}try{const e=document.getElementById("grunge-video-overlay");if(e){let t=!1,a=!1;const o=()=>{if(t)return;const e=document.documentElement.classList.contains("entrance-complete"),o=document.body.classList.contains("noise-ready");a&&e&&o&&(t=!0,document.body.classList.add("video-fade-ready"))};new MutationObserver(()=>{document.documentElement.classList.contains("entrance-complete")&&o()}).observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),new MutationObserver(()=>{document.body.classList.contains("noise-ready")&&o()}).observe(document.body,{attributes:!0,attributeFilter:["class"]}),e.addEventListener("loadstart",()=>{},{once:!0}),e.addEventListener("loadedmetadata",()=>{},{once:!0}),e.addEventListener("canplaythrough",()=>{a=!0,o();const t=e.play();void 0!==t&&t.then(()=>{}).catch(()=>{})},{once:!0}),e.addEventListener("error",()=>{},{once:!0})}}catch(Z){}window.addEventListener("resize",r,{passive:!0})}catch(Z){try{i()}catch(x){}}s({contactModal:!0,cvModal:!1,portfolioModal:!0,cursorHiding:!0,modalOverlayConfig:C||{}}),l(),d();const V=o(),$=document.documentElement;if(C)m(C);else{const e=V?.frameColorLight||V?.frameColor,t=V?.frameColorDark||V?.frameColor;e&&$.style.setProperty("--frame-color-light",e),t&&$.style.setProperty("--frame-color-dark",t)}const k=V?.frameColorLight||V?.frameColor,M=V?.frameColorDark||V?.frameColor;k&&$.style.setProperty("--frame-color-light",k),M&&$.style.setProperty("--frame-color-dark",M);const F=V.isDarkMode?M:k;if(F){const e=document.querySelector('meta[name="theme-color"]');e&&(e.content=F),$.style.setProperty("--chrome-bg",F)}p?.("startup"),u(),g();try{try{await a()}catch(Z){}}catch(Z){}try{(()=>{function e(){const e=o.scrollTop,t=o.scrollHeight-o.clientHeight,i=t>0?e/t:0,r=Math.min(Math.floor(i*n.length),n.length-1);console.log(`[CV Scroll Debug] top:${e.toFixed(0)} max:${t.toFixed(0)} progress:${(100*i).toFixed(1)}% → img ${r+1}/${n.length}`),r!==c&&(c=r,a.src=n[c],console.log("[CV Photo] ✓ Changed to image "+(r+1)))}const t=document.querySelector(".cv-photo"),a=document.querySelector(".cv-photo__image"),o=document.querySelector(".cv-right");if(!t||!a||!o)return console.warn("[CV Photo Slideshow] Required elements not found"),null;const n=b.images.map(e=>`${b.imageFolder}${e}`);let c=0,i=0;a.src=n[0],(()=>{const e=j[i];a.style.transform=`translate(${e.x}%, ${e.y}%) rotate(${e.rotate}deg)`,i=(i+1)%j.length})(),o.addEventListener("scroll",()=>{e()},{passive:!0}),setTimeout(()=>{e()},500),t.style.cursor="pointer",t.addEventListener("click",e=>{e.preventDefault(),n.length>1&&(c=(c+1)%n.length,a.src=n[c])}),console.log(`[CV Photo Slideshow] Initialized with ${n.length} image(s) - scroll-driven`)})()}catch(Z){console.warn("CV photo slideshow failed to initialize",Z)}document.querySelectorAll("[data-nav-transition]").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),h(e.href,f.INTERNAL)})}),window.addEventListener("pageshow",e=>{if(e.persisted){v();const e=document.getElementById("app-frame");e&&(e.style.opacity="1")}});const O=document.querySelector('[data-nav-transition][href*="index"]');O&&w(O,"index.html")})()});