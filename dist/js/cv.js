import{l as a,c as o,T as e,g as t,f as n,_ as c,k as i,$ as r,a0 as s,z as l,C as d,a1 as m,K as g,I as p,H as h,a2 as f,a3 as u,a4 as v,a5 as w}from"./shared.js";import{i as y}from"./wall-only-canvas.js";const C={imageFolder:"images/cv-images/",images:["profile-image-01.jpg","profile-image-02.jpg","profile-image-03.jpg","profile-image-04.jpg","profile-image-05.jpg","profile-image-06.jpg","profile-image-07.jpg","profile-image-08.jpg","profile-image-09.jpg","profile-image-10.jpg"]},j=[{x:-50,y:-50,rotate:0}];document.addEventListener("DOMContentLoaded",()=>{(async()=>{try{await a(),o()}catch(S){}try{await e()}catch(S){}try{const a=t(),o=document.getElementById("app-frame"),n=!!window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches,c=()=>{try{const a=document.getElementById("fade-blocking");a&&a.remove()}catch(S){}},i=a=>{if(!o)return;o.style.opacity="1",o.style.transform="translateZ(0)",c();const e=document.querySelector(".cv-scroll-container");e&&(e.style.opacity="1",e.style.visibility="visible"),console.warn(`⚠️ CV entrance fallback (${a})`)},{didViewTransitionRun:r}=await import("./shared.js").then(a=>a.aL);if(r()){o&&(o.style.opacity="1",o.style.visibility="visible",o.style.transform="translateZ(0)");const a=document.querySelector(".cv-scroll-container");a&&(a.style.opacity="1",a.style.visibility="visible"),c(),console.log("✓ CV entrance skipped (View Transition handled it)")}else if(!a.entranceEnabled||n){o&&(o.style.opacity="1",o.style.transform="translateZ(0)");const a=document.querySelector(".cv-scroll-container");a&&(a.style.opacity="1",a.style.visibility="visible"),c(),console.log("✓ CV entrance animation skipped (disabled or reduced motion)")}else{const{orchestrateEntrance:a}=await import("./shared.js").then(a=>a.aM);await a({async waitForFonts(){try{await e()}catch(S){}},skipWallAnimation:!0,centralContent:[".cv-scroll-container"]}),c(),console.log("✓ Dramatic entrance animation orchestrated (CV)")}window.setTimeout(()=>{o&&"0"===window.getComputedStyle(o).opacity&&i("watchdog")},2500)}catch(S){const a=document.getElementById("app-frame");a&&(a.style.opacity="1",a.style.transform="translateZ(0)");const o=document.querySelector(".cv-scroll-container");o&&(o.style.opacity="1",o.style.visibility="visible"),console.warn("⚠️ CV entrance animation failed, forcing content visible",S)}let b=null;try{b=await n(),c(b);try{y({canvasSelector:".cv-wall-canvas"})}catch(S){}try{i(t())}catch(S){}try{const a=document.getElementById("grunge-video-overlay"),o=document.getElementById("bravia-balls");a&&o&&(a.addEventListener("loadstart",()=>{},{once:!0}),a.addEventListener("loadedmetadata",()=>{},{once:!0}),a.addEventListener("canplaythrough",()=>{o.classList.add("grunge-video-ready");const e=a.play();void 0!==e&&e.then(()=>{}).catch(()=>{})},{once:!0}),a.addEventListener("error",()=>{},{once:!0}))}catch(S){}window.addEventListener("resize",r,{passive:!0})}catch(S){try{i()}catch(T){}}s({contactModal:!0,cvModal:!1,portfolioModal:!0,cursorHiding:!0,modalOverlayConfig:b||{}}),l(),d();const $=t(),V=document.documentElement;if(b)m(b);else{const a=$?.frameColorLight||$?.frameColor,o=$?.frameColorDark||$?.frameColor;a&&V.style.setProperty("--frame-color-light",a),o&&V.style.setProperty("--frame-color-dark",o)}const k=$?.frameColorLight||$?.frameColor,M=$?.frameColorDark||$?.frameColor;k&&V.style.setProperty("--frame-color-light",k),M&&V.style.setProperty("--frame-color-dark",M);const x=$.isDarkMode?M:k;if(x){const a=document.querySelector('meta[name="theme-color"]');a&&(a.content=x),V.style.setProperty("--chrome-bg",x)}g?.("startup"),p(),h();try{try{await e()}catch(S){}}catch(S){}try{(()=>{function a(){const a=t.scrollTop,o=t.scrollHeight-t.clientHeight,i=o>0?a/o:0,r=Math.min(Math.floor(i*n.length),n.length-1);console.log(`[CV Scroll Debug] top:${a.toFixed(0)} max:${o.toFixed(0)} progress:${(100*i).toFixed(1)}% → img ${r+1}/${n.length}`),r!==c&&(c=r,e.src=n[c],console.log("[CV Photo] ✓ Changed to image "+(r+1)))}const o=document.querySelector(".cv-photo"),e=document.querySelector(".cv-photo__image"),t=document.querySelector(".cv-right");if(!o||!e||!t)return console.warn("[CV Photo Slideshow] Required elements not found"),null;const n=C.images.map(a=>`${C.imageFolder}${a}`);let c=0,i=0;e.src=n[0],(()=>{const a=j[i];e.style.transform=`translate(${a.x}%, ${a.y}%) rotate(${a.rotate}deg)`,i=(i+1)%j.length})(),t.addEventListener("scroll",()=>{a()},{passive:!0}),setTimeout(()=>{a()},500),o.style.cursor="pointer",o.addEventListener("click",a=>{a.preventDefault(),n.length>1&&(c=(c+1)%n.length,e.src=n[c])}),console.log(`[CV Photo Slideshow] Initialized with ${n.length} image(s) - scroll-driven`)})()}catch(S){console.warn("CV photo slideshow failed to initialize",S)}document.querySelectorAll("[data-nav-transition]").forEach(a=>{a.addEventListener("click",o=>{o.preventDefault(),f(a.href,u.INTERNAL)})}),window.addEventListener("pageshow",a=>{if(a.persisted){v();const a=document.getElementById("app-frame");a&&(a.style.opacity="1")}});const z=document.querySelector('[data-nav-transition][href*="index"]');z&&w(z,"index.html")})()});