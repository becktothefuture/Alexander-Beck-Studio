import{l as a,a as o,P as t,g as e,d as c,V as n,h as i,W as s,X as r,v as l,y as m,Y as d,G as p,E as g,D as h,Z as f,_ as u,$ as w,a0 as v}from"./shared.js";import{i as y}from"./wall-only-canvas.js";const j={imageFolder:"images/cv-images/",images:["profile-image-01.jpg","profile-image-02.jpg","profile-image-03.jpg","profile-image-04.jpg","profile-image-05.jpg","profile-image-06.jpg","profile-image-07.jpg","profile-image-08.jpg","profile-image-09.jpg","profile-image-10.jpg"]},C=[{x:-50,y:-50,rotate:0}];document.addEventListener("DOMContentLoaded",()=>{(async()=>{try{await a(),o()}catch(P){}try{await t()}catch(P){}try{const a=e(),o=document.getElementById("app-frame"),c=!!window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches,n=()=>{try{const a=document.getElementById("fade-blocking");a&&a.remove()}catch(P){}},i=a=>{if(!o)return;o.style.opacity="1",o.style.transform="translateZ(0)",n();const t=document.querySelector(".cv-scroll-container");t&&(t.style.opacity="1",t.style.visibility="visible"),console.warn(`⚠️ CV entrance fallback (${a})`)};if(!a.entranceEnabled||c){o&&(o.style.opacity="1",o.style.transform="translateZ(0)");const a=document.querySelector(".cv-scroll-container");a&&(a.style.opacity="1",a.style.visibility="visible"),n(),console.log("✓ CV entrance animation skipped (disabled or reduced motion)")}else{const{orchestrateEntrance:a}=await import("./shared.js").then(a=>a.aU);await a({async waitForFonts(){try{await t()}catch(P){}},skipWallAnimation:!0,centralContent:[".cv-scroll-container"]}),n(),console.log("✓ Dramatic entrance animation orchestrated (CV)")}window.setTimeout(()=>{o&&"0"===window.getComputedStyle(o).opacity&&i("watchdog")},2500)}catch(P){const a=document.getElementById("app-frame");a&&(a.style.opacity="1",a.style.transform="translateZ(0)");const o=document.querySelector(".cv-scroll-container");o&&(o.style.opacity="1",o.style.visibility="visible"),console.warn("⚠️ CV entrance animation failed, forcing content visible",P)}let $=null;try{$=await c(),n($);try{y({canvasSelector:".cv-wall-canvas"})}catch(P){}try{i(e())}catch(P){}window.addEventListener("resize",s,{passive:!0})}catch(P){try{i()}catch(S){}}r({contactModal:!0,cvModal:!1,portfolioModal:!0,cursorHiding:!0,modalOverlayConfig:$||{}}),l(),m();const V=e(),b=document.documentElement;if($)d($);else{const a=V?.frameColorLight||V?.frameColor,o=V?.frameColorDark||V?.frameColor;a&&b.style.setProperty("--frame-color-light",a),o&&b.style.setProperty("--frame-color-dark",o)}const k=V?.frameColorLight||V?.frameColor,M=V?.frameColorDark||V?.frameColor;k&&b.style.setProperty("--frame-color-light",k),M&&b.style.setProperty("--frame-color-dark",M);const x=V.isDarkMode?M:k;if(x){const a=document.querySelector('meta[name="theme-color"]');a&&(a.content=x),b.style.setProperty("--chrome-bg",x)}p?.("startup"),g(),h();try{try{await t()}catch(P){}}catch(P){}try{(()=>{function a(){const a=e.scrollTop,o=e.scrollHeight-e.clientHeight,i=o>0?a/o:0,s=Math.min(Math.floor(i*c.length),c.length-1);console.log(`[CV Scroll Debug] top:${a.toFixed(0)} max:${o.toFixed(0)} progress:${(100*i).toFixed(1)}% → img ${s+1}/${c.length}`),s!==n&&(n=s,t.src=c[n],console.log("[CV Photo] ✓ Changed to image "+(s+1)))}const o=document.querySelector(".cv-photo"),t=document.querySelector(".cv-photo__image"),e=document.querySelector(".cv-right");if(!o||!t||!e)return console.warn("[CV Photo Slideshow] Required elements not found"),null;const c=j.images.map(a=>`${j.imageFolder}${a}`);let n=0,i=0;t.src=c[0],(()=>{const a=C[i];t.style.transform=`translate(${a.x}%, ${a.y}%) rotate(${a.rotate}deg)`,i=(i+1)%C.length})(),e.addEventListener("scroll",()=>{a()},{passive:!0}),setTimeout(()=>{a()},500),o.style.cursor="pointer",o.addEventListener("click",a=>{a.preventDefault(),c.length>1&&(n=(n+1)%c.length,t.src=c[n])}),console.log(`[CV Photo Slideshow] Initialized with ${c.length} image(s) - scroll-driven`)})()}catch(P){console.warn("CV photo slideshow failed to initialize",P)}document.querySelectorAll("[data-nav-transition]").forEach(a=>{a.addEventListener("click",o=>{o.preventDefault(),f(a.href,u.INTERNAL)})}),window.addEventListener("pageshow",a=>{if(a.persisted){w();const a=document.getElementById("app-frame");a&&(a.style.opacity="1")}});const D=document.querySelector('[data-nav-transition][href*="index"]');D&&v(D,"index.html")})()});