import{l as a,f as e,_ as o,g as t,k as n,a6 as i,a7 as c,q as s,a8 as r,E as l,H as d,a9 as m,S as p,O as g,M as h,aa as f,ab as w,ac as u,ad as v}from"./shared.js";import{i as y}from"./wall-only-canvas.js";const j={imageFolder:"images/cv-images/",images:["profile-image-01.jpg","profile-image-02.jpg","profile-image-03.jpg","profile-image-04.jpg","profile-image-05.jpg","profile-image-06.jpg","profile-image-07.jpg","profile-image-08.jpg","profile-image-09.jpg","profile-image-10.jpg"]},C=[{x:-50,y:-50,rotate:0}];document.addEventListener("DOMContentLoaded",()=>{(async()=>{try{await a(),e()}catch(z){}try{await o()}catch(z){}try{const a=t(),e=document.getElementById("app-frame"),n=!!window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches,i=()=>{try{const a=document.getElementById("fade-blocking");a&&a.remove()}catch(z){}},c=a=>{if(!e)return;e.style.opacity="1",e.style.transform="translateZ(0)",i();const o=document.querySelector(".cv-scroll-container");o&&(o.style.opacity="1",o.style.visibility="visible"),console.warn(`⚠️ CV entrance fallback (${a})`)},{didViewTransitionRun:s}=await import("./shared.js").then(a=>a.aX);if(s()){e&&(e.style.opacity="1",e.style.visibility="visible",e.style.transform="translateZ(0)");const a=document.querySelector(".cv-scroll-container");a&&(a.style.opacity="1",a.style.visibility="visible"),i(),console.log("✓ CV entrance skipped (View Transition handled it)")}else if(!a.entranceEnabled||n){e&&(e.style.opacity="1",e.style.transform="translateZ(0)");const a=document.querySelector(".cv-scroll-container");a&&(a.style.opacity="1",a.style.visibility="visible"),i(),console.log("✓ CV entrance animation skipped (disabled or reduced motion)")}else{const{orchestrateEntrance:a}=await import("./shared.js").then(a=>a.aY);await a({async waitForFonts(){try{await o()}catch(z){}},skipWallAnimation:!0,centralContent:[".cv-scroll-container"]}),i(),console.log("✓ Dramatic entrance animation orchestrated (CV)")}window.setTimeout(()=>{e&&"0"===window.getComputedStyle(e).opacity&&c("watchdog")},2500)}catch(z){const a=document.getElementById("app-frame");a&&(a.style.opacity="1",a.style.transform="translateZ(0)");const e=document.querySelector(".cv-scroll-container");e&&(e.style.opacity="1",e.style.visibility="visible"),console.warn("⚠️ CV entrance animation failed, forcing content visible",z)}let b=null;try{b=await n(),i(b),requestAnimationFrame(()=>{c()});try{y({canvasSelector:".cv-wall-canvas"})}catch(z){}try{s(t())}catch(z){}window.addEventListener("resize",c,{passive:!0}),window.visualViewport&&window.visualViewport.addEventListener("resize",c,{passive:!0})}catch(z){try{s()}catch(F){}}r({contactModal:!0,cvModal:!1,portfolioModal:!0,cursorHiding:!0,modalOverlayConfig:b||{}}),l(),d();const V=t(),$=document.documentElement;if(b)m(b);else{const a=V?.frameColorLight||V?.frameColor,e=V?.frameColorDark||V?.frameColor;a&&$.style.setProperty("--frame-color-light",a),e&&$.style.setProperty("--frame-color-dark",e)}const k=V?.frameColorLight||V?.frameColor,M=V?.frameColorDark||V?.frameColor;k&&$.style.setProperty("--frame-color-light",k),M&&$.style.setProperty("--frame-color-dark",M);const S=V.isDarkMode?M:k;if(S){const a=document.querySelector('meta[name="theme-color"]');a&&(a.content=S),$.style.setProperty("--chrome-bg",S)}p?.("startup"),g(),h();try{try{await o()}catch(z){}}catch(z){}try{(()=>{function a(){const a=t.scrollTop,e=t.scrollHeight-t.clientHeight,c=e>0?a/e:0,s=Math.min(Math.floor(c*n.length),n.length-1);console.log(`[CV Scroll Debug] top:${a.toFixed(0)} max:${e.toFixed(0)} progress:${(100*c).toFixed(1)}% → img ${s+1}/${n.length}`),s!==i&&(i=s,o.src=n[i],console.log("[CV Photo] ✓ Changed to image "+(s+1)))}const e=document.querySelector(".cv-photo"),o=document.querySelector(".cv-photo__image"),t=document.querySelector(".cv-right");if(!e||!o||!t)return console.warn("[CV Photo Slideshow] Required elements not found"),null;const n=j.images.map(a=>`${j.imageFolder}${a}`);let i=0,c=0;o.src=n[0],(()=>{const a=C[c];o.style.transform=`translate(${a.x}%, ${a.y}%) rotate(${a.rotate}deg)`,c=(c+1)%C.length})(),t.addEventListener("scroll",()=>{a()},{passive:!0}),setTimeout(()=>{a()},500),e.style.cursor="pointer",e.addEventListener("click",a=>{a.preventDefault(),n.length>1&&(i=(i+1)%n.length,o.src=n[i])}),console.log(`[CV Photo Slideshow] Initialized with ${n.length} image(s) - scroll-driven`)})()}catch(z){console.warn("CV photo slideshow failed to initialize",z)}document.querySelectorAll("[data-nav-transition]").forEach(a=>{a.addEventListener("click",e=>{e.preventDefault(),f(a.href,w.INTERNAL)})}),window.addEventListener("pageshow",a=>{if(a.persisted){u();const a=document.getElementById("app-frame");a&&(a.style.opacity="1")}});const x=document.querySelector('[data-nav-transition][href*="index"]');x&&v(x,"index.html")})()});