import{l as a,a as o,R as e,g as t,d as n,X as c,h as i,Y as s,Z as r,x as l,A as d,_ as m,I as p,G as g,F as h,$ as f,a0 as u,a1 as w,a2 as v}from"./shared.js";import{i as y}from"./wall-only-canvas.js";const j={imageFolder:"images/cv-images/",images:["profile-image-01.jpg","profile-image-02.jpg","profile-image-03.jpg","profile-image-04.jpg","profile-image-05.jpg","profile-image-06.jpg","profile-image-07.jpg","profile-image-08.jpg","profile-image-09.jpg","profile-image-10.jpg"]},C=[{x:-50,y:-50,rotate:0}];document.addEventListener("DOMContentLoaded",()=>{(async()=>{try{await a(),o()}catch(F){}try{await e()}catch(F){}try{const a=t(),o=document.getElementById("app-frame"),n=!!window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches,c=()=>{try{const a=document.getElementById("fade-blocking");a&&a.remove()}catch(F){}},i=a=>{if(!o)return;o.style.opacity="1",o.style.transform="translateZ(0)",c();const e=document.querySelector(".cv-scroll-container");e&&(e.style.opacity="1",e.style.visibility="visible"),console.warn(`⚠️ CV entrance fallback (${a})`)},{didViewTransitionRun:s}=await import("./shared.js").then(a=>a.aO);if(s()){o&&(o.style.opacity="1",o.style.visibility="visible",o.style.transform="translateZ(0)");const a=document.querySelector(".cv-scroll-container");a&&(a.style.opacity="1",a.style.visibility="visible"),c(),console.log("✓ CV entrance skipped (View Transition handled it)")}else if(!a.entranceEnabled||n){o&&(o.style.opacity="1",o.style.transform="translateZ(0)");const a=document.querySelector(".cv-scroll-container");a&&(a.style.opacity="1",a.style.visibility="visible"),c(),console.log("✓ CV entrance animation skipped (disabled or reduced motion)")}else{const{orchestrateEntrance:a}=await import("./shared.js").then(a=>a.aP);await a({async waitForFonts(){try{await e()}catch(F){}},skipWallAnimation:!0,centralContent:[".cv-scroll-container"]}),c(),console.log("✓ Dramatic entrance animation orchestrated (CV)")}window.setTimeout(()=>{o&&"0"===window.getComputedStyle(o).opacity&&i("watchdog")},2500)}catch(F){const a=document.getElementById("app-frame");a&&(a.style.opacity="1",a.style.transform="translateZ(0)");const o=document.querySelector(".cv-scroll-container");o&&(o.style.opacity="1",o.style.visibility="visible"),console.warn("⚠️ CV entrance animation failed, forcing content visible",F)}let $=null;try{$=await n(),c($);try{y({canvasSelector:".cv-wall-canvas"})}catch(F){}try{i(t())}catch(F){}window.addEventListener("resize",s,{passive:!0})}catch(F){try{i()}catch(S){}}r({contactModal:!0,cvModal:!1,portfolioModal:!0,cursorHiding:!0,modalOverlayConfig:$||{}}),l(),d();const V=t(),b=document.documentElement;if($)m($);else{const a=V?.frameColorLight||V?.frameColor,o=V?.frameColorDark||V?.frameColor;a&&b.style.setProperty("--frame-color-light",a),o&&b.style.setProperty("--frame-color-dark",o)}const k=V?.frameColorLight||V?.frameColor,M=V?.frameColorDark||V?.frameColor;k&&b.style.setProperty("--frame-color-light",k),M&&b.style.setProperty("--frame-color-dark",M);const x=V.isDarkMode?M:k;if(x){const a=document.querySelector('meta[name="theme-color"]');a&&(a.content=x),b.style.setProperty("--chrome-bg",x)}p?.("startup"),g(),h();try{try{await e()}catch(F){}}catch(F){}try{(()=>{function a(){const a=t.scrollTop,o=t.scrollHeight-t.clientHeight,i=o>0?a/o:0,s=Math.min(Math.floor(i*n.length),n.length-1);console.log(`[CV Scroll Debug] top:${a.toFixed(0)} max:${o.toFixed(0)} progress:${(100*i).toFixed(1)}% → img ${s+1}/${n.length}`),s!==c&&(c=s,e.src=n[c],console.log("[CV Photo] ✓ Changed to image "+(s+1)))}const o=document.querySelector(".cv-photo"),e=document.querySelector(".cv-photo__image"),t=document.querySelector(".cv-right");if(!o||!e||!t)return console.warn("[CV Photo Slideshow] Required elements not found"),null;const n=j.images.map(a=>`${j.imageFolder}${a}`);let c=0,i=0;e.src=n[0],(()=>{const a=C[i];e.style.transform=`translate(${a.x}%, ${a.y}%) rotate(${a.rotate}deg)`,i=(i+1)%C.length})(),t.addEventListener("scroll",()=>{a()},{passive:!0}),setTimeout(()=>{a()},500),o.style.cursor="pointer",o.addEventListener("click",a=>{a.preventDefault(),n.length>1&&(c=(c+1)%n.length,e.src=n[c])}),console.log(`[CV Photo Slideshow] Initialized with ${n.length} image(s) - scroll-driven`)})()}catch(F){console.warn("CV photo slideshow failed to initialize",F)}document.querySelectorAll("[data-nav-transition]").forEach(a=>{a.addEventListener("click",o=>{o.preventDefault(),f(a.href,u.INTERNAL)})}),window.addEventListener("pageshow",a=>{if(a.persisted){w();const a=document.getElementById("app-frame");a&&(a.style.opacity="1")}});const Z=document.querySelector('[data-nav-transition][href*="index"]');Z&&v(Z,"index.html")})()});