/* ╔══════════════════════════════════════════════════════════════════════════════╗
   ║                    PORTFOLIO PAGE - CAROUSEL STYLES                          ║
   ║     Extends main.css (wall, chrome, typography inherited from index)         ║
   ╚══════════════════════════════════════════════════════════════════════════════╝ */

/* ═══════════════════════════════════════════════════════════════════════════════
   PORTFOLIO-SPECIFIC TOKENS
   Only override what differs from index - wall/chrome inherited from main.css
   ═══════════════════════════════════════════════════════════════════════════════ */
:root {
  /* --- Wheel Layout --- */
  --slider-max-height: 100dvh;
  --wheel-radius-x: 36vw;
  --wheel-radius-y: 14vh;
  --wheel-spacing-ratio: 0.22;
  --wheel-spacing: max(calc(var(--card-width) * var(--wheel-spacing-ratio)), 7vw);
  --wheel-center-x: 0vw;
  --wheel-center-y: -6vh;
  --wheel-rotate: 12deg;
  --wheel-tilt: 60deg;
  --wheel-depth: 1;
  --wheel-active-lift: 2.5vh;
  --wheel-scale-min: 0.82;
  --wheel-scale-max: 1;
  --wheel-blur-max: 1.6vmin;
  --wheel-opacity-min: 0.2;
  --wheel-opacity-max: 1;
  --wheel-opacity-curve: 1.15;
  --wheel-scroll-speed: 0.65;
  --wheel-drag-speed: 0.9;
  --wheel-friction: 3;
  --wheel-snap-speed: 0.14;
  --wheel-snap-strength: 4;
  --wheel-bounce-strength: 16;
  --wheel-bounce-damping: 10;
  --wheel-bounce-impulse: 2.6vmin;

  /* --- Mouse Tilt --- */
  --mouse-tilt-pivot-z: 0vmin;

  /* --- Card Dimensions --- */
  --card-aspect-w: 5;
  --card-aspect-h: 4;
  --card-height-floor: 216px;
  --card-height-min: 27vh;
  --card-height-ideal: 45vh;
  --card-height-max: 55vh;
  --card-height: max(var(--card-height-floor), clamp(var(--card-height-min), var(--card-height-ideal), var(--card-height-max)));
  --card-width: calc(var(--card-height) * var(--card-aspect-w) / var(--card-aspect-h));
  --corner-radius: 1.9vmin;
  --border-width: 0.6vmin;
  --card-content-inset: clamp(6px, 1vw, 12px);

  /* --- Card Appearance --- */
  --active-shadow-intensity: 0.2;
  --img-saturation: 100%;
  --border-color: rgba(var(--abs-rgb-black), 0.2);
  --border-color-hover: rgba(var(--abs-rgb-black), 0.7);
  --card-hover-scale: 1.025;
  --card-hover-lift: 0.6vmin;
  --card-press-lift: -0.6vmin;
  --card-hover-shadow-intensity: 0.28;
  --cursor-color-card-hover: rgba(var(--abs-rgb-white), 0.4);

  /* --- Typography --- */
  --text-client-size: 1.1vw;
  --text-title-size: 4.2vw;
  --text-tags-size: 0.9vw;
  --text-client-min: 12px;
  --text-client-max: 18px;
  --text-title-min: 36px;
  --text-title-max: 72px;
  --text-tags-min: 14px;
  --text-tags-max: 18px;
  --content-offset: 8vh;
  --meta-lift: 0vh;
  --meta-padding-y: clamp(60px, 8vh, 100px);
  --meta-gap: clamp(20px, 2.7vmin, 24px);
  --meta-title-max-width: 25ch;
  --meta-summary-max-width: 45ch;
  --text-align: center;
  --meta-transition-speed: 360ms;

  /* --- Motion --- */
  --transition-speed: 600ms;
  --transition-ease: var(--ease-organic);
  --perspective: 1000px;
  --detail-max-width: 720px;
  --detail-transition-ms: 700ms;
  --detail-transition-fade-ms: 240ms;
  --detail-transition-fade-delay: 60ms;
  --detail-transition-blur: 8px;
  --detail-transition-cross-blur: 0.9vmin;
  --detail-transition-ease: var(--ease-gate);
  --detail-transition-ease-in: var(--ease-hesitant);
  --detail-transition-ease-out: var(--ease-gate);
  --detail-transition-shadow-opacity: 0.18;
  --detail-surface: #ffffff;
  --detail-content-pop-duration: 360ms;
  --detail-content-pop-delay: 80ms;
  --detail-content-pop-delay-hero: 60ms;
  --detail-content-pop-delay-body: 90ms;
  --detail-content-pop-start-scale: 0.96;
  --detail-content-pop-overshoot-scale: 1;
  --detail-content-pop-ease: var(--ease-bounce);
  --detail-overlay-start-scale: 0.98;
  --detail-hero-height: 75vh;
  --detail-hero-width: 100%;
  --detail-hero-offset: 0%;
  --detail-hero-top-pad: 0px;
  --close-button-top: 0px;
  --close-button-left: 0px;
  --close-button-width: 100%;
  --close-button-height: 60px;
  --close-button-font-size: 14px;
  --close-button-icon-size: clamp(14px, 1.5vw, 16px);
}

/* ═══════════════════════════════════════════════════════════════════════════════
   PORTFOLIO PAGE BODY
   Inherits wall styling from main.css - only add portfolio-specific overrides
   ═══════════════════════════════════════════════════════════════════════════════ */
body.portfolio-page {
  cursor: none;
  -webkit-user-select: none;
  user-select: none;
}

body.portfolio-page * {
  cursor: none;
}

/* Dark mode card border overrides */
body.portfolio-page.dark-mode {
  --border-color: rgba(var(--abs-rgb-white), 0.3);
  --border-color-hover: rgba(var(--abs-rgb-white), 1);
  --cursor-color-card-hover: rgba(var(--abs-rgb-white), 0.35);
}

/* Portfolio-specific: hide logo completely (not visible on this page) */
body.portfolio-page #brand-logo {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  /* Logo is not part of portfolio design - hide completely to prevent
     entrance animation from wasting time animating an invisible element */
}

/* Edge labels: slightly different opacity for portfolio */
body.portfolio-page .edge-chapter__text,
body.portfolio-page .edge-copyright__text {
  opacity: 0.8;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   PORTFOLIO SIMULATION CONTAINER
   Uses same #bravia-balls ID with .portfolio-simulation class
   ═══════════════════════════════════════════════════════════════════════════════ */
#bravia-balls.portfolio-simulation {
  /* Inherits position, inset, background from main.css #bravia-balls */
  /* Index wall master: no rounded container corners */
  border-radius: 0;
  /* main.css already sets overflow:hidden on #bravia-balls; keep no extra layering here */
  touch-action: none;
}

/* Wall-only canvas overlays the carousel so the wall is visible (matches index wall ring).
   Critical: pointer-events must stay NONE so dragging the carousel still works. */
#bravia-balls.portfolio-simulation .portfolio-wall-canvas {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 15; /* Above stage (5) and viewport (1), below UI layers */
  pointer-events: none;
  display: block;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   PORTFOLIO STAGE & CAROUSEL
   ═══════════════════════════════════════════════════════════════════════════════ */
.portfolio-stage {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  width: 100%;
  z-index: 5;
  /* Initial visibility controlled by inline style (opacity:0; visibility:hidden) 
     cleared by entrance-animation.js */
  /* Modal dimming: fade carousel when modals are active */
  opacity: 1;
  transition: opacity var(--modal-depth-duration, 850ms) var(--ease-gate);
}

/* Dim portfolio stage when any modal is active */
html.modal-active .portfolio-stage,
#abs-scene.gate-depth-active .portfolio-stage {
  opacity: 0.2;
}

.portfolio-viewport {
  position: relative;
  width: 100%;
  height: 100%;
  max-height: var(--slider-max-height, 100dvh);
  padding-bottom: clamp(96px, 12vh, 160px);
  display: flex;
  align-items: center;
  perspective: var(--perspective);
  background-color: transparent;
  border-radius: var(--container-radius);
  overflow: hidden;
  z-index: 1;
  cursor: grab;
  touch-action: none;
  overscroll-behavior: none;
  pointer-events: auto;
}

.portfolio-viewport.is-dragging {
  cursor: grabbing;
  -webkit-user-select: none;
  user-select: none;
}

.slider-track {
  position: relative;
  width: 100%;
  height: 100%;
  will-change: transform;
  transform-style: preserve-3d;
}

.slider-rig {
  position: absolute;
  left: 50%;
  top: 50%;
  width: 1px;
  height: 1px;
  overflow: visible;
  transform-style: preserve-3d;
  will-change: transform;
}

/* Cylinder dots container */
.cylinder-dots-container {
  position: absolute;
  left: 50%;
  top: 50%;
  width: 1px;
  height: 1px;
  overflow: visible;
  transform-style: preserve-3d;
  pointer-events: none;
}

.cylinder-dot {
  position: absolute;
  left: 0;
  top: 0;
  transform-style: preserve-3d;
  backface-visibility: hidden;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   SLIDES
   ═══════════════════════════════════════════════════════════════════════════════ */
.slide {
  --slide-x: 0vw;
  --slide-y: 0vh;
  --slide-z: 0vmin;
  --slide-scale: 1;
  --slide-rotate: 0deg;
  --slide-blur: 0vmin;
  --slide-opacity: 1;
  position: absolute;
  left: 0;
  top: 0;
  width: var(--card-width);
  height: var(--card-height);
  aspect-ratio: var(--card-aspect-w) / var(--card-aspect-h);
  cursor: pointer;
  transform-origin: center;
  opacity: var(--slide-opacity);
  transform:
    translate3d(var(--slide-x), var(--slide-y), var(--slide-z))
    translate(-50%, -50%)
    rotate(var(--slide-rotate))
    scale(var(--slide-scale));
  filter: blur(var(--slide-blur));
  will-change: transform, filter, opacity;
  transition: transform 0.3s var(--ease-organic);
}

.slide:not(:active) {
  transition: transform var(--link-impact-duration) var(--ease-organic),
              filter var(--link-impact-duration) var(--ease-organic);
}

.slide:active {
  transform: 
    translate3d(var(--slide-x), var(--slide-y), calc(var(--slide-z) + var(--card-press-lift, -0.6vmin)))
    translate(-50%, -50%)
    rotate(var(--slide-rotate))
    scale(calc(var(--slide-scale) * var(--link-impact-scale)));
  filter: blur(var(--link-impact-blur));
  transition: transform var(--link-impact-duration) var(--ease-organic),
              filter var(--link-impact-duration) var(--ease-organic);
}

.slide:focus-visible {
  outline: 0.3vmin solid var(--text-primary);
  outline-offset: 0.6vmin;
}

.slide.active {
  z-index: 10;
}

.slide.is-expanding {
  z-index: 11;
  pointer-events: auto;
  transition:
    transform var(--detail-transition-ms) var(--detail-transition-ease),
    opacity var(--detail-transition-ms) var(--detail-transition-ease),
    filter var(--detail-transition-ms) var(--detail-transition-ease);
}

.slide.is-collapsing {
  z-index: 11;
  transition:
    transform var(--detail-transition-ms) var(--detail-transition-ease),
    opacity var(--detail-transition-ms) var(--detail-transition-ease),
    filter var(--detail-transition-ms) var(--detail-transition-ease);
}

.slide-image-container {
  box-sizing: border-box;
  padding: 0;
  width: 100%;
  height: 100%;
  border-radius: var(--corner-radius);
  border: var(--border-width) solid var(--border-color);
  overflow: hidden;
  position: relative;
  background: var(--bg-light);
  box-shadow: none;
  transition: 
    border-width var(--transition-speed) var(--transition-ease), 
    border-color 0.35s var(--ease-organic), 
    border-radius 0.3s var(--ease-organic), 
    opacity 140ms var(--ease-settle);
  opacity: 1;
  transform-origin: center;
  will-change: transform, opacity, filter;
  isolation: isolate;
}

body.portfolio-page.dark-mode .slide-image-container {
  background: var(--bg-dark);
}

/* Glowing border on hover */
.slide-image-container::before {
  content: '';
  position: absolute;
  inset: calc(-1 * var(--border-width));
  border-radius: var(--corner-radius);
  background: var(--border-color-hover);
  opacity: 0;
  z-index: 0;
  transition: opacity 0.35s var(--ease-organic);
  pointer-events: none;
  box-shadow: 0 0 0 var(--border-width) var(--border-color-hover), 0 0 calc(var(--border-width) * 2) var(--border-color-hover);
}

.slide-image-container .slide-image {
  position: relative;
  z-index: 1;
}

.slide:hover .slide-image-container::before {
  opacity: 1;
}

.slide:hover {
  z-index: 12;
  --slide-blur: 0vmin;
  filter: blur(0);
}

.slide:hover .slide-image-container {
  border-color: var(--border-color-hover);
  box-shadow: none;
}

.slide:hover .slide-image {
  filter: saturate(calc(var(--img-saturation) * 1.08));
}

.slide-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  transition: filter var(--transition-speed) var(--transition-ease);
  filter: saturate(var(--img-saturation));
}

/* ═══════════════════════════════════════════════════════════════════════════════
   PORTFOLIO META (Project title/description below carousel)
   ═══════════════════════════════════════════════════════════════════════════════ */
.portfolio-meta {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 80px;
  --meta-shift: 0vh;
  /* Center using margin instead of transform to avoid entrance animation conflicts */
  width: 100%;
  max-width: clamp(280px, 82vw, 600px);
  margin: 0 auto;
  transform: translateY(var(--meta-shift));
  text-align: var(--text-align);
  /* Initial visibility controlled by inline style (opacity:0; visibility:hidden) 
     cleared by entrance-animation.js. Opacity also used for slide transitions. */
  filter: blur(0);
  /* Disable all transitions during entrance to prevent drift */
  transition: none;
  pointer-events: none;
  z-index: 15;
}

/* Enable smooth layout transitions only after entrance completes */
html.entrance-complete .portfolio-meta {
  transition: 
    bottom var(--duration-resize) var(--ease-organic),
    max-width var(--duration-resize) var(--ease-organic),
    opacity var(--meta-transition-speed) var(--transition-ease),
    filter var(--meta-transition-speed) var(--transition-ease);
}

.portfolio-meta__inner {
  display: flex;
  flex-direction: column;
  gap: var(--meta-gap);
  padding-top: var(--meta-padding-y);
  padding-bottom: var(--meta-padding-y);
  justify-content: center;
  align-items: center;
}

/* Only transition transform during slide switching (not during entrance) */
.portfolio-meta.is-switching {
  opacity: 0;
  --meta-shift: 2vh;
  filter: blur(1.2vmin);
  transition: 
    opacity var(--meta-transition-speed) var(--transition-ease),
    transform var(--meta-transition-speed) var(--transition-ease),
    filter var(--meta-transition-speed) var(--transition-ease);
}

.meta-client {
  display: block;
  font-family: 'Geist', sans-serif;
  font-weight: 500;
  font-size: 13px;
  text-transform: uppercase;
  letter-spacing: var(--letter-spacing-loose);
  color: var(--text-muted);
}

.meta-title {
  display: block;
  width: 100%;
  font-family: 'Geist', sans-serif;
  font-weight: 400;
  font-size: clamp(var(--text-title-min), var(--text-title-size), var(--text-title-max));
  line-height: var(--line-height-title);
  letter-spacing: var(--letter-spacing-tight);
  text-transform: none;
  color: var(--text-primary);
  max-width: var(--meta-title-max-width);
}

.meta-summary {
  display: block;
  width: 100%;
  font-family: 'Geist', sans-serif;
  font-size: clamp(var(--text-tags-min), var(--text-tags-size), var(--text-tags-max));
  line-height: var(--line-height-summary);
  letter-spacing: var(--letter-spacing-normal);
  opacity: 0.9;
  color: var(--text-muted);
  max-width: var(--meta-summary-max-width);
}

/* ═══════════════════════════════════════════════════════════════════════════════
   PROJECT DETAIL OVERLAY
   ═══════════════════════════════════════════════════════════════════════════════ */
.project-detail {
  position: absolute;
  inset: 0;
  z-index: 50;
  opacity: 0;
  pointer-events: none;
  background: var(--bg-light);
  will-change: opacity, transform;
  transform: scale(var(--detail-overlay-start-scale));
  transition:
    opacity var(--detail-transition-ms) var(--detail-transition-ease),
    transform var(--detail-transition-ms) var(--detail-transition-ease);
}

body.portfolio-page.dark-mode .project-detail {
  background: var(--bg-dark);
}

.project-detail.is-open {
  opacity: 1;
  transform: scale(1);
  pointer-events: auto;
}

.project-detail__card {
  position: absolute;
  inset: 0;
  background: transparent;
  border-radius: 0;
  box-shadow: none;
  overflow: hidden;
}

/* Project detail close button - inherits from .gate-back and .abs-icon-btn */
.project-detail__close {
  position: fixed;
  top: clamp(16px, 2vw, 24px);
  left: 50%;
  transform: translateX(-50%);
  z-index: 15;
  display: none;
  /* Blurry background when idle (only difference from standard .gate-back) */
  background: rgba(var(--abs-rgb-white), 0.1);
  -webkit-backdrop-filter: blur(20px);
  backdrop-filter: blur(20px);
}

/* Dark mode blur background */
body.portfolio-page.dark-mode .project-detail__close {
  background: rgba(var(--abs-rgb-black), 0.15);
}

/* Show close button when detail is open */
.project-detail.is-open .project-detail__close {
  display: inline-flex;
}

/* Active state: maintain centered position while scaling */
body.portfolio-page .project-detail__close:active {
  transform: translateX(-50%) scale(var(--link-impact-scale));
}

.project-detail__scroller {
  height: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  touch-action: pan-y;
}

.project-detail__inner {
  width: 100%;
  padding: 0 0 120px;
  display: flex;
  flex-direction: column;
  gap: 32px;
  transform-origin: center top;
  will-change: transform, opacity;
  opacity: 0;
  transform: scale(var(--detail-content-pop-start-scale));
  transition:
    opacity var(--detail-content-pop-duration) var(--detail-content-pop-ease) var(--detail-content-pop-delay),
    transform var(--detail-content-pop-duration) var(--detail-content-pop-ease) var(--detail-content-pop-delay);
}

.project-detail.is-open .project-detail__inner {
  opacity: 1;
  transform: scale(1);
}

.project-detail__content {
  width: 100%;
  max-width: var(--detail-max-width);
  margin: 0 auto;
  padding: 0 24px;
  display: flex;
  flex-direction: column;
  gap: 32px;
}

.project-detail__content--hero {
  padding-top: 0;
  max-width: min(92vw, 1100px);
}

.project-detail__content--body {
  padding-top: 24px;
}

.project-detail__hero {
  display: grid;
  gap: clamp(20px, 4vw, 36px);
  padding-top: var(--detail-hero-top-pad);
  opacity: 1;
  transform: none;
}

.project-detail__media {
  width: var(--detail-hero-width);
  margin-left: var(--detail-hero-offset);
  max-width: none;
  border-radius: 0;
  border: none;
  overflow: hidden;
  background: transparent;
  position: relative;
  height: var(--detail-hero-height);
  box-shadow: none;
}

.project-detail__image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  display: block;
  filter: saturate(var(--img-saturation));
}

.project-detail__media video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.project-detail__intro {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding-top: 40px;
  padding-bottom: 40px;
}

.project-detail__eyebrow {
  font-size: clamp(11px, 1vw, 13px);
  letter-spacing: var(--letter-spacing-loose);
  text-transform: uppercase;
  opacity: 1;
  color: var(--text-primary);
  text-align: center;
}

.project-detail__title {
  font-size: 80px;
  line-height: var(--line-height-display);
  font-weight: 400;
  letter-spacing: var(--letter-spacing-tight);
  vertical-align: middle;
  text-align: center;
  color: var(--text-primary);
}

.project-detail__summary {
  font-size: clamp(16px, 1.7vw, 20px);
  line-height: var(--line-height-body-relaxed);
  opacity: 0.75;
  max-width: 62ch;
  color: var(--text-primary);
}

.project-detail__meta {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 16px;
  margin-top: 6px;
  text-align: center;
}

.project-detail__meta-item dt {
  font-size: 10px;
  letter-spacing: var(--letter-spacing-loose);
  text-transform: uppercase;
  opacity: 1;
  color: var(--text-muted);
  font-weight: 500;
  margin-bottom: 6px;
}

.project-detail__meta-item dd {
  font-size: 14px;
  font-weight: 400;
  color: var(--text-primary);
}

.project-detail__body {
  opacity: 1;
  transform: none;
}

.project-detail__overview h2,
.project-detail__takeaways h2 {
  font-size: 18px;
  text-transform: uppercase;
  letter-spacing: var(--letter-spacing-loose);
  margin-bottom: 12px;
  color: var(--text-primary);
}

.project-detail__overview p {
  font-size: 16px;
  line-height: var(--line-height-body-relaxed);
  opacity: 0.8;
  color: var(--text-primary);
}

.project-detail__links {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
}

.project-detail__links a {
  padding: 8px 16px;
  border-radius: var(--ui-icon-corner-radius);
  border: 1px solid rgba(var(--abs-rgb-black), 0.1);
  text-decoration: none;
  color: var(--text-primary);
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: var(--letter-spacing-loose);
  background: rgba(var(--abs-rgb-white), 0.8);
}

.project-detail__stack {
  display: grid;
  gap: 28px;
}

.project-detail__block {
  margin: 0;
  display: grid;
  gap: 10px;
}

.project-detail__media-block,
.project-detail__video {
  width: 100%;
  border-radius: 22px;
  display: block;
  background: transparent;
  box-shadow: none;
}

.project-detail__caption {
  font-size: 13px;
  opacity: 0.6;
  color: var(--text-muted);
}

.project-detail__takeaways ul {
  list-style: disc;
  padding-left: 20px;
  display: grid;
  gap: 10px;
  font-size: 16px;
  line-height: var(--line-height-body);
  opacity: 0.8;
  color: var(--text-primary);
}

/* Detail noise layers */
.project-detail__noise {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 1;
}

.project-detail__noise--back {
  z-index: 1;
  opacity: calc(var(--noise-back-opacity-light) * var(--abs-noise-enabled) * var(--detail-noise-opacity, 1));
}

body.portfolio-page.dark-mode .project-detail__noise--back {
  opacity: calc(var(--noise-back-opacity-dark) * var(--abs-noise-enabled) * var(--detail-noise-opacity, 1));
}

.project-detail__noise::before {
  content: '';
  position: absolute;
  inset: var(--abs-noise-overscan);
  background-image: var(--abs-noise-texture);
  background-repeat: repeat;
  background-attachment: scroll;
  pointer-events: none;
  will-change: transform, opacity;
  transform: translate3d(0, 0, 0);
  filter: var(--abs-noise-filter);
  animation-name: var(--abs-noise-keyframes), abs-noise-flicker;
  animation-duration: var(--abs-noise-speed-back), var(--abs-noise-flicker-speed);
  animation-timing-function: var(--abs-noise-timing), steps(1, end);
  animation-iteration-count: infinite, infinite;
}

.project-detail__noise--back::before {
  background-size: calc(var(--noise-size-base) * var(--noise-size-scale)) calc(var(--noise-size-base) * var(--noise-size-scale));
  animation-duration: var(--abs-noise-speed-back), var(--abs-noise-flicker-speed);
}

/* Keep index-style chrome visible while project detail is open */
body.detail-open .ui-top,
body.detail-open .portfolio-footer {
  opacity: 1;
  pointer-events: auto;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   PORTFOLIO CHROME OVERRIDES
   Most chrome inherited from main.css - only portfolio-specific tweaks here
   ═══════════════════════════════════════════════════════════════════════════════ */
body.portfolio-page .ui-top-left {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 0;
}

body.portfolio-page .ui-top-right {
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  gap: var(--gap-md);
}

.portfolio-blurb-wrapper {
  max-width: 420px;
  text-align: left;
}

#portfolio-blurb {
  padding-top: 0;
  padding-bottom: 0;
}

.portfolio-sound-slot {
  display: inline-flex;
  align-items: center;
}

/* Bio/CV link styling - inherits from main.css, no overrides needed */
/* Main.css line 2937 sets correct padding to match arrow button height */

/* Gate back button - inherits from main.css (same as CV page) */

@keyframes braviaDotBounceIn {
  0% { transform: translate3d(-50%, 0, 0) scaleY(0); }
  60% { transform: translate3d(-50%, 0, 0) scaleY(1.2); }
  100% { transform: translate3d(-50%, 0, 0) scaleY(1); }
}

/* ═══════════════════════════════════════════════════════════════════════════════
   PORTFOLIO CURSOR
   ═══════════════════════════════════════════════════════════════════════════════ */
body.portfolio-page #custom-cursor {
  position: fixed;
  pointer-events: none;
  z-index: 30000;
  border: none;
  background: var(--cursor-color);
  transform-origin: center center;
  transform:
    translate(-50%, -50%)
    translate(var(--cursor-jitter-x, 0px), var(--cursor-jitter-y, 0px))
    scale(var(--cursor-scale, 1))
    scaleX(var(--cursor-stretch-x, 1))
    scaleY(var(--cursor-stretch-y, 1));
  opacity: 0.85;
  transition: transform 0.35s var(--ease-hesitant),
              opacity 0.35s var(--ease-hesitant),
              width 0.35s var(--ease-hesitant),
              height 0.35s var(--ease-hesitant),
              background 0.35s var(--ease-hesitant);
  will-change: transform, opacity, width, height, background;
  width: 20px;
  height: 20px;
  border-radius: 50%;
}

/* Rapid cursor hiding on link hover for portfolio page */
body.portfolio-page.abs-link-hovering #custom-cursor {
  display: none !important;
  opacity: 0;
  transition: none;
}

body.portfolio-page #custom-cursor.gate-active {
  display: block;
  width: 48px;
  height: 48px;
  background: rgba(var(--abs-rgb-white), 0.5);
  border: 1.5px solid rgba(var(--abs-rgb-white), 0.8);
  transform:
    translate(-50%, -50%)
    translate(var(--cursor-jitter-x, 0px), var(--cursor-jitter-y, 0px))
    scale(var(--cursor-scale, 1))
    scaleX(var(--cursor-stretch-x, 1))
    scaleY(var(--cursor-stretch-y, 1));
  opacity: 1;
}

body.portfolio-page.portfolio-card-hovering #custom-cursor {
  background: var(--cursor-color-card-hover);
  width: 24px;
  height: 24px;
  opacity: 0.6;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   MOBILE RESPONSIVE
   ═══════════════════════════════════════════════════════════════════════════════ */
@media (max-width: 768px) {
  :root {
    --card-height-floor: 180px;
    --card-height-min: 28vh;
    --card-height-ideal: 38vh;
    --card-height-max: 45vh;
    --wheel-radius-x: 44vw;
    --wheel-radius-y: 16vh;
    --wheel-spacing-ratio: 0.18;
    --wheel-center-y: -3vh;
    --wheel-tilt: 52deg;
    --detail-hero-width: 100%;
    --detail-hero-offset: 0%;
    --detail-hero-top-pad: 0px;
    /* Meta responsive adjustments */
    --text-title-size: 5vw;
    --text-title-min: 28px;
    --text-title-max: 48px;
    --meta-padding-y: clamp(40px, 6vh, 60px);
    --meta-gap: clamp(16px, 2vmin, 20px);
    --meta-title-max-width: 22ch;
    --meta-summary-max-width: 40ch;
  }

  .portfolio-viewport {
    padding-bottom: clamp(60px, 10vh, 120px);
  }

  .portfolio-meta {
    bottom: clamp(40px, 8vh, 60px);
    max-width: clamp(280px, 90vw, 600px);
    padding-left: clamp(16px, 4vw, 24px);
    padding-right: clamp(16px, 4vw, 24px);
  }

  .project-detail__inner {
    padding: 0 0 100px;
  }

  .project-detail__content {
    padding: 0 18px;
  }

  .project-detail__content--hero {
    padding-top: 0;
  }

  .project-detail__content--body {
    padding-top: 18px;
  }

  .project-detail__meta {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 480px) {
  :root {
    --card-height-floor: 150px;
    --card-height-min: 24vh;
    --card-height-ideal: 32vh;
    --card-height-max: 38vh;
    --wheel-radius-x: 40vw;
    --wheel-radius-y: 14vh;
    --wheel-tilt: 48deg;
    --wheel-center-y: -2vh;
    /* Meta mobile adjustments */
    --text-title-size: 6vw;
    --text-title-min: 24px;
    --text-title-max: 40px;
    --meta-padding-y: clamp(32px, 5vh, 48px);
    --meta-gap: clamp(12px, 1.8vmin, 18px);
    --meta-title-max-width: 20ch;
    --meta-summary-max-width: 35ch;
  }

  .portfolio-viewport {
    padding-bottom: clamp(48px, 8vh, 96px);
  }

  .portfolio-meta {
    bottom: clamp(32px, 6vh, 48px);
    max-width: clamp(280px, 92vw, 600px);
    padding-left: clamp(16px, 5vw, 20px);
    padding-right: clamp(16px, 5vw, 20px);
  }

  body.portfolio-page .decorative-script {
    display: none;
  }
}

@media (prefers-reduced-motion: reduce) {
  .slide,
  .portfolio-meta,
  .project-detail,
  body.detail-transitioning .project-detail__card,
  body.detail-transitioning .project-detail__inner,
  body.detail-transitioning .project-detail__hero,
  body.detail-transitioning .project-detail__body,
  body.detail-transitioning .project-transition,
  body.detail-transitioning .slide-image-container {
    transition: none;
  }

  body.detail-transitioning .project-detail__hero,
  body.detail-transitioning .project-detail__body,
  body.detail-transitioning .project-detail__inner {
    animation: none;
  }
}
