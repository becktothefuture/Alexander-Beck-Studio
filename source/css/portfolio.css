/* Portfolio carousel styles (shared chrome with index) */
:root {
  /* --- Studio Wall / Frame (index-parity) ---
     IMPORTANT: `source/portfolio.html` loads `css/main.css` first in dev.
     We do NOT override shared chrome tokens here, otherwise sizes drift vs index. */

  /* --- Wheel Layout --- */
  --slider-max-height: 100dvh;
  --wheel-radius-x: 36vw;
  --wheel-radius-y: 14vh;
  /* Card spacing as ratio of card width (prevents overlap on small screens) */
  --wheel-spacing-ratio: 0.22;
  --wheel-spacing: max(calc(var(--card-width) * var(--wheel-spacing-ratio)), 7vw);
  --wheel-center-x: 0vw;
  --wheel-center-y: -6vh;
  --wheel-rotate: 12deg;
  --wheel-tilt: 60deg;
  --wheel-depth: 1;
  --wheel-active-lift: 2.5vh;
  --wheel-scale-min: 0.82;
  --wheel-scale-max: 1;
  --wheel-blur-max: 1.6vmin;
  --wheel-opacity-min: 0.2;
  --wheel-opacity-max: 1;
  --wheel-opacity-curve: 1.15;
  --wheel-scroll-speed: 0.65;
  --wheel-drag-speed: 0.9;
  --wheel-friction: 3;
  --wheel-snap-speed: 0.14;
  --wheel-snap-strength: 4;
  --wheel-bounce-strength: 16;
  --wheel-bounce-damping: 10;
  --wheel-bounce-impulse: 2.6vmin;

  /* --- Mouse Tilt --- */
  --mouse-tilt-pivot-z: 0vmin;

  /* --- Card Dimensions --- */
  /* Card width is derived from height + a locked aspect ratio (no vw-based resizing). */
  --card-aspect-w: 5;
  --card-aspect-h: 4;
  /* Absolute floor so cards never get too small (keeps carousel spacing/readability). */
  --card-height-floor: 240px;
  --card-height-min: 30vh;
  --card-height-ideal: 44vh;
  --card-height-max: 60vh;
  --card-height: max(var(--card-height-floor), clamp(var(--card-height-min), var(--card-height-ideal), var(--card-height-max)));
  --card-width: calc(var(--card-height) * var(--card-aspect-w) / var(--card-aspect-h));
  --corner-radius: 3vmin;
  --border-width: 0.6vmin;
  --card-content-inset: clamp(6px, 1vw, 12px);

  /* --- Appearance --- */
  --active-shadow-intensity: 0.2;
  --img-saturation: 100%;
  --border-color: #ffffff;
  /* Map legacy background token to studio background for a matching inner surface. */
  --bg-color: var(--bg-light);
  --accent-color: #000000;
  --cursor-color: var(--accent-color);

  /* --- Typography --- */
  --text-client-size: 1.1vw;
  --text-title-size: 2.5vw;
  --text-tags-size: 0.9vw;
  --text-client-min: 12px;
  --text-client-max: 18px;
  --text-title-min: 22px;
  --text-title-max: 56px;
  --text-tags-min: 14px;
  --text-tags-max: 18px;
  --content-offset: 12vh;
  --text-align: center;
  --meta-transition-speed: 360ms;

  /* --- Motion --- */
  --transition-speed: 600ms;
  --transition-ease: cubic-bezier(0.25, 0.1, 0.25, 1.0); /* Ease-in-outish */
  --perspective: 1000px;
  --detail-max-width: 720px;
  --detail-transition-ms: 700ms;
  --detail-transition-fade-ms: 240ms;
  --detail-transition-fade-delay: 60ms;
  --detail-transition-blur: 8px;
  --detail-transition-cross-blur: 0.9vmin;
  --detail-transition-ease: cubic-bezier(0.34, 1.56, 0.64, 1); /* Beautiful ease-out-back for expansion */
  --detail-transition-ease-in: cubic-bezier(0.55, 0.055, 0.675, 0.19); /* Smooth ease-in */
  --detail-transition-ease-out: cubic-bezier(0.215, 0.61, 0.355, 1); /* Smooth ease-out */
  --detail-transition-shadow-opacity: 0.18;
  --detail-surface: #ffffff;
  /* Detail content "pop" motion (scales up with a subtle bounce for continuity with card expansion). */
  --detail-content-pop-duration: 420ms;
  --detail-content-pop-delay-hero: 120ms;
  --detail-content-pop-delay-body: 160ms;
  --detail-content-pop-start-scale: 0.985;
  --detail-content-pop-overshoot-scale: 1.015;
  --detail-content-pop-ease: cubic-bezier(0.34, 1.56, 0.64, 1);
  --detail-hero-width: 100%;
  --detail-hero-offset: 0%;
  --detail-hero-top-pad: 52px;
  --close-button-top: 0px;
  --close-button-left: 0px;
  --close-button-width: 100%;
  --close-button-height: 60px;
  --close-button-font-size: 14px;
  --close-button-icon-size: clamp(14px, 1.5vw, 16px);
}

/* Icons + base UI chrome are inherited from `css/main.css` (index parity). */

@keyframes braviaDotBounceIn {
  0% { transform: translate3d(-50%, 0, 0) scaleY(0); }
  60% { transform: translate3d(-50%, 0, 0) scaleY(1.2); }
  100% { transform: translate3d(-50%, 0, 0) scaleY(1); }
}

*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

html {
  width: 100%;
  height: 100%;
  overflow: hidden;
  background-color: var(--wall-color);
}

body {
  width: 100%;
  height: 100%;
  overflow: hidden;
  margin: 0;
  box-sizing: border-box;
  position: relative;
  background: transparent;
  font-family: 'Geist', sans-serif;
  color: var(--accent-color);
  transition: background-color 0.3s ease;
  cursor: none;
  user-select: none;
}

body.dark-mode {
  --bg-color: var(--bg-dark);
  --accent-color: #f5f5f5;
  --border-color: rgba(255, 255, 255, 0.85);
  --text-color-light-muted: var(--text-color-dark-muted);
  --text-color-light-base: var(--text-color-dark);
}

/* ═══════════════════════════════════════════════════════════════════════════════
   TOP NAVIGATION BAR
   Alexander Beck branding header with social icons, CV link, and title
   ═══════════════════════════════════════════════════════════════════════════════ */

.top-nav {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 9000;
  background: transparent;
  padding: clamp(14px, 2.4vmin, 28px) clamp(18px, 3.6vmin, 36px);
  display: flex;
  align-items: center;
  justify-content: space-between;
  column-gap: clamp(18px, 3.2vw, 36px);
  pointer-events: none;
}

.top-nav * {
  pointer-events: auto;
}

.top-nav__left {
  display: flex;
  align-items: center;
  gap: clamp(8px, 1.5vw, 16px);
}

.top-nav__link {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: clamp(32px, 5vw, 44px);
  height: clamp(32px, 5vw, 44px);
  color: var(--accent-color);
  opacity: 0.7;
  transition: opacity 0.2s ease, transform 0.2s ease;
  text-decoration: none;
}

.top-nav__link:hover {
  opacity: 1;
  transform: scale(1.05);
}

.top-nav__icon {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.top-nav__icon svg {
  width: 60%;
  height: 60%;
}

.top-nav__cv {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: clamp(8px, 1.5vw, 12px) clamp(16px, 3vw, 24px);
  font-family: 'Geist', sans-serif;
  font-size: clamp(13px, 1.8vw, 15px);
  font-weight: 600;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  color: var(--accent-color);
  text-decoration: none;
  border: 1.5px solid rgba(0, 0, 0, 0.15);
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.5);
  backdrop-filter: blur(20px);
  opacity: 0.85;
  transition: opacity 0.2s ease, transform 0.2s ease, background-color 0.2s ease;
}

.top-nav__cv:hover {
  opacity: 1;
  transform: scale(1.02);
  background: rgba(255, 255, 255, 0.75);
}

body.dark-mode .top-nav__cv {
  border-color: rgba(255, 255, 255, 0.25);
  background: rgba(255, 255, 255, 0.12);
}

body.dark-mode .top-nav__cv:hover {
  background: rgba(255, 255, 255, 0.18);
}

/* ═══════════════════════════════════════════════════════════════════════════════
   HEADING WRAPPER (Alexander Beck logo/title)
   Max 250px desktop, clamps down to 120px mobile, clickable to return to index
   ═══════════════════════════════════════════════════════════════════════════════ */

.heading-wrapper {
  display: none !important;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   TEXT ANIMATIONS (40% faster with light overshoot)
   Original: 600-700ms → New: 360-420ms with overshoot easing
   ═══════════════════════════════════════════════════════════════════════════════ */

@keyframes heading-pop-in {
  0% {
    opacity: 0;
    transform: translateY(-8px) scale(0.96);
  }
  60% {
    opacity: 1;
    transform: translateY(0) scale(1.03);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes divider-grow {
  0% {
    opacity: 0;
    transform: scaleX(0);
  }
  60% {
    opacity: 1;
    transform: scaleX(1.06);
  }
  100% {
    opacity: 1;
    transform: scaleX(1);
  }
}

body * {
  cursor: none !important;
  user-select: none;
}

.screen-reader {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Frame container that mimics the index page wall inset. */
.wall-frame {
  position: fixed;
  top: var(--container-border-y, var(--container-border));
  left: var(--container-border-x, var(--container-border));
  right: var(--container-border-x, var(--container-border));
  bottom: var(--container-border-y, var(--container-border));
  border-radius: var(--container-radius);
  background-color: var(--bg-color);
  overflow: hidden;
  box-sizing: border-box;
  z-index: 0;
  isolation: isolate;
  touch-action: none;
}

body.detail-open .wall-frame {
  touch-action: pan-y;
}

.portfolio-noise {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  border-radius: inherit;
  background-image: url(../../images/realistic_noise.gif);
  background-repeat: repeat;
  background-attachment: scroll;
  background-size: calc(var(--noise-size-base) * var(--noise-size-scale)) calc(var(--noise-size-base) * var(--noise-size-scale));
  mix-blend-mode: multiply;
  pointer-events: none;
}

.portfolio-noise--back {
  z-index: 1;
  opacity: var(--noise-back-opacity-light);
}

body.dark-mode .portfolio-noise--back {
  opacity: var(--noise-back-opacity-dark);
}

/* --- Slider Stage --- */
.portfolio-stage {
  position: absolute;
  /* Match index: fill the padded interior of #fade-content */
  inset: 0;
  padding: 0;
  top: 50%;
  transform: translateY(-50%);
  height: min(100%, var(--slider-max-height));
  width: 100%;
  z-index: 2;
}

/* --- Viewport & Track --- */
.portfolio-viewport {
  /* Fill the wall-frame interior; not dependent on content padding */
  position: absolute !important;
  inset: 0 !important;
  width: 100% !important;
  height: 100% !important;
  display: flex;
  align-items: center;
  perspective: var(--perspective);
  background-color: transparent;
  border-radius: var(--container-radius); /* clip to wall shape so walls sit in front */
  overflow: hidden !important; /* keep carousel behind the wall edges */
  z-index: 1;
  cursor: grab;
  touch-action: none;
  overscroll-behavior: none;
  pointer-events: auto;
}

.portfolio-viewport.is-dragging {
  cursor: grabbing;
  user-select: none;
}


.slider-track {
  position: relative;
  width: 100%;
  height: 100%;
  will-change: transform;
  transform-style: preserve-3d;
}

/* Centered 3D rig: this is the actual carousel "object" that we tilt. */
.slider-rig {
  position: absolute;
  left: 50%;
  top: 50%;
  width: 1px;
  height: 1px;
  overflow: visible;
  transform-style: preserve-3d;
  will-change: transform;
}

/* --- Slides --- */
.slide {
  --slide-x: 0vw;
  --slide-y: 0vh;
  --slide-z: 0vmin;
  --slide-scale: 1;
  --slide-rotate: 0deg;
  --slide-blur: 0vmin;
  --slide-opacity: 1;
  position: absolute;
  left: 0;
  top: 0;
  width: var(--card-width);
  height: var(--card-height);
  aspect-ratio: var(--card-aspect-w) / var(--card-aspect-h);
  cursor: pointer;
  transform-origin: center;
  opacity: var(--slide-opacity);
  transform:
    translate3d(var(--slide-x), var(--slide-y), var(--slide-z))
    translate(-50%, -50%)
    rotate(var(--slide-rotate))
    scale(var(--slide-scale));
  filter: blur(var(--slide-blur));
  will-change: transform, filter, opacity;
}

.slide:focus-visible {
  outline: 0.3vmin solid var(--accent-color);
  outline-offset: 0.6vmin;
}

.slide.active {
  z-index: 10;
}

/* Slide scales up when clicked (before detail overlay fully covers it) */
.slide.is-expanding {
  z-index: 11;
  transition:
    transform var(--detail-transition-ms) var(--detail-transition-ease),
    opacity var(--detail-transition-ms) var(--detail-transition-ease),
    filter var(--detail-transition-ms) var(--detail-transition-ease);
}

.slide.is-collapsing {
  z-index: 11;
  transition:
    transform var(--detail-transition-ms) var(--detail-transition-ease),
    opacity var(--detail-transition-ms) var(--detail-transition-ease),
    filter var(--detail-transition-ms) var(--detail-transition-ease);
}

.slide-image-container {
  box-sizing: border-box;
  padding: 0;
  width: 100%;
  height: 100%;
  border-radius: var(--corner-radius);
  border: var(--border-width) solid var(--border-color);
  overflow: hidden;
  position: relative;
  background: transparent;
  box-shadow: 0 3vmin 6vmin rgba(0, 0, 0, var(--active-shadow-intensity));
  transition: border-width var(--transition-speed) var(--transition-ease), border-color 0.3s ease, border-radius 0.3s ease, opacity 140ms ease;
  opacity: 1;
}

.slide-image-container::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image: url(../../images/realistic_noise.gif);
  background-repeat: repeat;
  background-attachment: scroll;
  background-size: calc(var(--noise-size-top) * var(--noise-size-scale)) calc(var(--noise-size-top) * var(--noise-size-scale));
  opacity: var(--noise-front-opacity-light);
  mix-blend-mode: multiply;
  pointer-events: none;
}

body.dark-mode .slide-image-container::after {
  opacity: var(--noise-front-opacity-dark);
}

.slide-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  transition: filter var(--transition-speed) var(--transition-ease);
  filter: saturate(var(--img-saturation));
}

/* --- Fixed Metadata --- */
.portfolio-meta {
  position: absolute;
  left: 50%;
  bottom: var(--content-offset);
  --meta-shift: 0vh;
  transform: translateX(-50%) translateY(var(--meta-shift));
  width: min(82vw, 70vmin);
  text-align: var(--text-align);
  opacity: 1;
  filter: blur(0);
  transition: opacity var(--meta-transition-speed) var(--transition-ease),
    transform var(--meta-transition-speed) var(--transition-ease),
    filter var(--meta-transition-speed) var(--transition-ease);
  pointer-events: none;
  z-index: 3;
}

.portfolio-meta__inner {
  display: grid;
  gap: 12px;
}

.portfolio-meta.is-switching {
  opacity: 0;
  --meta-shift: 2vh;
  filter: blur(1.2vmin);
}

.meta-client {
  display: block;
  font-family: 'Geist', sans-serif;
  font-weight: 400;
  font-size: clamp(var(--text-client-min), var(--text-client-size), var(--text-client-max));
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

.meta-title {
  display: block;
  font-family: 'Geist', sans-serif;
  font-weight: 700;
  font-size: clamp(var(--text-title-min), var(--text-title-size), var(--text-title-max));
  line-height: 1.1;
  text-transform: uppercase;
}

.meta-summary {
  display: block;
  font-family: 'Geist', sans-serif;
  font-size: clamp(var(--text-tags-min), var(--text-tags-size), var(--text-tags-max));
  line-height: 1.6;
  opacity: 0.7;
}

/* --- Project Detail --- */
.project-detail {
  position: absolute;
  inset: 0;
  z-index: 50; /* Force above everything including 3D carousel */
  opacity: 0;
  pointer-events: none;
  background: var(--detail-surface);
  will-change: opacity;
  transform: translateZ(0); /* Force stacking context */
}

.project-detail.is-open {
  opacity: 1;
  pointer-events: auto;
}

/* EXPANDING: Fade in only */
.project-detail.is-expanding {
  pointer-events: none;
  transition: opacity var(--detail-transition-ms) var(--detail-transition-ease);
}

/* COLLAPSING: Fade out only */
.project-detail.is-collapsing {
  pointer-events: none;
  transition: opacity var(--detail-transition-ms) var(--detail-transition-ease);
}

/* Cross-blur the hero media during the crossfade (filter values are applied inline in JS). */
.project-detail.is-expanding .project-detail__media,
.project-detail.is-collapsing .project-detail__media {
  transition: filter var(--detail-transition-ms) var(--detail-transition-ease);
  will-change: filter;
}

.project-detail__card {
  position: absolute;
  inset: 0;
  background: var(--detail-surface);
  border-radius: 0;
  box-shadow: none;
  overflow: hidden;
}

.project-detail__close {
  position: fixed;
  top: var(--close-button-top);
  left: var(--close-button-left);
  width: var(--close-button-width);
  height: var(--close-button-height);
  z-index: 15;
  background: transparent;
  border: none;
  color: var(--accent-color);
  padding: 0;
  font-size: var(--close-button-font-size);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  cursor: pointer;
  display: none;
  align-items: center;
  justify-content: center;
  gap: 0.4em;
  transition: opacity 200ms ease;
}

.close-icon {
  font-size: var(--close-button-icon-size);
  width: 1em;
  height: 1em;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.15s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.15s ease-out;
  will-change: transform, opacity;
}

.project-detail.is-open .project-detail__close {
  display: flex;
}

.project-detail__close:hover {
  opacity: 0.8;
}

.project-detail.is-animating .project-detail__close {
  opacity: 0;
  pointer-events: none;
  transition: none;
}

.close-letter {
  display: inline-block;
  transition: transform 0.1s ease-out, opacity 0.1s ease-out;
  will-change: transform, opacity;
}

.project-detail.is-open .close-letter {
  transition: transform 0.15s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.15s ease-out;
}

.project-detail__scroller {
  height: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  touch-action: pan-y;
}

.project-detail__inner {
  width: 100%;
  padding: 0 0 120px;
  display: flex;
  flex-direction: column;
  gap: 32px;
}

.project-detail__content {
  width: 100%;
  max-width: var(--detail-max-width);
  margin: 0 auto;
  padding: 0 24px;
  display: flex;
  flex-direction: column;
  gap: 32px;
}

.project-detail__content--hero {
  padding-top: 0;
}

.project-detail__content--body {
  padding-top: 24px;
}

.project-detail__hero {
  display: grid;
  gap: 24px;
  padding-top: var(--detail-hero-top-pad);
  opacity: 0;
  transform: scale(var(--detail-content-pop-start-scale));
  transform-origin: center top;
  transition: none;
}

.project-detail__media {
  width: var(--detail-hero-width);
  margin-left: var(--detail-hero-offset);
  max-width: none;
  border-radius: var(--corner-radius);
  border: none;
  overflow: hidden;
  background: transparent;
  position: relative;
  aspect-ratio: 16 / 9;
  box-shadow: none;
}

.project-detail__media::after {
  /* Match slide/transition noise treatment to avoid a perceptual "brightening pulse"
     when the transition layer fades out and the detail hero becomes visible. */
  content: '';
  position: absolute;
  inset: 0;
  background-image: url(../../images/realistic_noise.gif);
  background-repeat: repeat;
  background-attachment: scroll;
  background-size: calc(var(--noise-size-top) * var(--noise-size-scale)) calc(var(--noise-size-top) * var(--noise-size-scale));
  opacity: var(--noise-front-opacity-light);
  mix-blend-mode: multiply;
  pointer-events: none;
}

body.dark-mode .project-detail__media::after {
  opacity: var(--noise-front-opacity-dark);
}

.project-detail__image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  display: block;
  filter: saturate(var(--img-saturation));
}

.project-detail__intro {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.project-detail__eyebrow {
  font-size: 12px;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  opacity: 0.6;
}

.project-detail__title {
  font-size: clamp(32px, 5vw, 56px);
  line-height: 1.05;
  font-weight: 700;
}

.project-detail__summary {
  font-size: 17px;
  line-height: 1.6;
  opacity: 0.75;
}

.project-detail__meta {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 16px;
  margin-top: 6px;
}

.project-detail__meta-item dt {
  font-size: 10px;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  opacity: 0.5;
  margin-bottom: 6px;
}

.project-detail__meta-item dd {
  font-size: 14px;
  font-weight: 600;
}

.project-detail__body {
  opacity: 0;
  transform: scale(var(--detail-content-pop-start-scale));
  transform-origin: center top;
  transition: none;
}

.project-detail.is-open .project-detail__hero,
.project-detail.is-open .project-detail__body {
  opacity: 1;
  transform: scale(1);
}

@keyframes project-detail-content-pop {
  0% {
    opacity: 0;
    transform: scale(var(--detail-content-pop-start-scale));
  }
  60% {
    opacity: 1;
    transform: scale(var(--detail-content-pop-overshoot-scale));
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

/* Content should feel continuous with a gentle scale-in: soft and organic. */
.project-detail.is-expanding .project-detail__hero {
  animation: project-detail-content-pop var(--detail-content-pop-duration) cubic-bezier(0.34, 1.56, 0.64, 1) var(--detail-content-pop-delay-hero) both;
}

.project-detail.is-expanding .project-detail__body {
  animation: project-detail-content-pop var(--detail-content-pop-duration) cubic-bezier(0.34, 1.56, 0.64, 1) var(--detail-content-pop-delay-body) both;
}

/* User requested content be visible immediately during transition ("animated in already").
   Removed the .is-animating rule that hid content. */


.project-detail__overview h2,
.project-detail__takeaways h2 {
  font-size: 18px;
  text-transform: uppercase;
  letter-spacing: 0.18em;
  margin-bottom: 12px;
}

.project-detail__overview p {
  font-size: 16px;
  line-height: 1.7;
  opacity: 0.8;
}

.project-detail__links {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
}

.project-detail__links a {
  padding: 8px 16px;
  border-radius: 999px;
  border: 1px solid rgba(0, 0, 0, 0.1);
  text-decoration: none;
  color: var(--accent-color);
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  background: rgba(255, 255, 255, 0.8);
}

.project-detail__stack {
  display: grid;
  gap: 28px;
}

.project-detail__block {
  margin: 0;
  display: grid;
  gap: 10px;
}

.project-detail__media-block,
.project-detail__video {
  width: 100%;
  border-radius: 22px;
  display: block;
  background: transparent;
  box-shadow: 0 18px 40px rgba(0, 0, 0, 0.12);
}

.project-detail__caption {
  font-size: 13px;
  opacity: 0.6;
}

.project-detail__takeaways ul {
  list-style: disc;
  padding-left: 20px;
  display: grid;
  gap: 10px;
  font-size: 16px;
  line-height: 1.6;
  opacity: 0.8;
}

/* Keep index-style chrome visible while a project detail is open.
   (Index never hides header/footer; portfolio should match that UX.) */
body.detail-open .portfolio-header,
body.detail-open .portfolio-footer {
  opacity: 1;
  pointer-events: auto;
}

/* --- Header --- */

.portfolio-header {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  padding: clamp(16px, 2.5vmin, 28px);
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 6;
  pointer-events: none;
}

.portfolio-header__actions {
  display: inline-flex;
  align-items: center;
  gap: var(--gap-lg);
  pointer-events: auto;
}

.portfolio-sound-slot {
  display: inline-flex;
  align-items: center;
}

/* ─────────────────────────────────────────────────────────────────────────────
   INDEX CHROME PARITY (PORTFOLIO TOP OVERRIDES)
   Goal: match index sizing/spacing exactly while keeping portfolio-specific top content:
   - No center logo
   - Left: blurb (constrained)
   - Right: Bio/CV + sound
   ───────────────────────────────────────────────────────────────────────────── */

body.portfolio-page .ui-top-main {
  align-items: flex-start !important;
}

/* Prevent the left column from becoming a full-width block (which pushes actions away). */
body.portfolio-page .ui-top-left {
  width: auto !important;
  flex: 0 1 auto !important;
  min-width: 0 !important;
}

/* Constrain blurb exactly like index (same max-width token). */
body.portfolio-page .ui-top-left .decorative-script {
  max-width: var(--decorative-script-max-width) !important;
}

/* Actions should sit in the top-right corner, not occupy the entire row width. */
body.portfolio-page .ui-top-right {
  width: auto !important;
  max-width: none !important;
  flex: 0 0 auto !important;
  justify-content: flex-end !important;
}

@media (max-width: 600px) {
  body.portfolio-page .ui-top-right {
    justify-content: flex-end !important;
  }
}

/* Bio/CV link next to sound icon (portfolio header) */
.portfolio-cv-link {
  position: relative;
  display: inline-block;
  padding-block: var(--hit-area-lg);
  padding-inline: var(--hit-area-lg);
  margin-block: calc(var(--hit-area-lg) * -1);
  margin-inline: calc(var(--hit-area-lg) * -1);
  margin: 0;
  font-family: 'Geist', sans-serif;
  font-size: var(--footer-links-font-size);
  font-weight: 400;
  letter-spacing: var(--footer-links-letter-spacing);
  text-decoration: none;
  color: var(--text-color-light-muted);
  opacity: var(--text-opacity-base);
  pointer-events: auto;
  cursor: none;
  transition: color var(--duration-link-hover) ease;
}

.gate-back {
  appearance: none;
  border: 0;
  background: transparent;
  padding: var(--hit-area-sm);
  margin: 0;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  user-select: none;
  color: var(--text-color-light-muted);
  pointer-events: auto;
}

.gate-back span {
  display: none;
}

.gate-back i.ti {
  font-weight: 500;
  font-size: var(--icon-size-base);
}

.gate-back:hover {
  color: var(--link-hover-color);
}

.gate-back:focus-visible {
  outline: 0.2vmin solid rgba(0, 0, 0, 0.35);
  outline-offset: 0.4vmin;
  border-radius: 0.6vmin;
}

body.dark-mode .gate-back {
  color: rgba(255, 255, 255, 0.72);
}

body.dark-mode .gate-back:hover {
  color: var(--link-hover-color);
}

.footer_link {
  position: relative;
  transform: none;
  padding-block: var(--hit-area-lg);
  padding-inline: var(--hit-area-lg);
  margin-block: calc(var(--hit-area-lg) * -1);
  margin-inline: calc(var(--hit-area-lg) * -1);
  display: inline-block;
  color: var(--text-color-light-muted);
  font-size: var(--footer-links-font-size);
  font-weight: 400;
  letter-spacing: var(--footer-links-letter-spacing);
  text-decoration: none;
  opacity: var(--text-opacity-base);
  transition: color var(--duration-link-hover) ease;
  cursor: none;
  pointer-events: auto;
}

.footer_link::after {
  content: '';
  position: absolute;
  bottom: var(--footer-link-dot-offset);
  left: 50%;
  transform: translate3d(-50%, 0, 0) scaleY(0);
  transform-origin: 50% 50%;
  width: var(--footer-link-dot-size);
  height: var(--footer-link-dot-size);
  border-radius: 50%;
  background: var(--link-hover-color);
  opacity: 0;
  will-change: transform, opacity;
}

.footer_link:hover {
  color: var(--link-hover-color);
  opacity: 1;
}

.footer_link:hover::after {
  opacity: 1;
  animation: braviaDotBounceIn var(--dot-bounce-duration) ease-out both;
}

body.dark-mode .footer_link {
  color: var(--text-color-dark-muted);
}

body.dark-mode .footer_link:hover {
  color: var(--link-hover-color);
}

.sound-toggle {
  position: relative;
  top: auto;
  left: auto;
  transform: none;
  margin: 0;
  padding: var(--hit-area-sm);
  color: var(--text-color-light-muted);
  font-family: 'Geist', sans-serif;
  cursor: none;
  background: none;
  border: none;
  pointer-events: auto;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: var(--icon-size-base);
}

.sound-toggle::after {
  content: none;
}

.sound-toggle[data-enabled="true"] {
  color: var(--link-hover-color);
}

body.dark-mode .sound-toggle {
  color: rgba(255, 255, 255, 0.72);
}

body.dark-mode .sound-toggle[data-enabled="true"] {
  color: var(--link-hover-color);
}

/* Footer chrome is inherited from `css/main.css` (index parity).
   Keep only the portfolio-specific hide behavior when detail is open. */

.pill-nav {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,0.05);
  padding: 5px;
  border-radius: 100px;
  display: flex;
  gap: 5px;
  pointer-events: auto;
  backdrop-filter: blur(5px);
}

.pill-link {
  padding: 8px 24px;
  border-radius: 100px;
  text-decoration: none;
  font-size: 14px;
  font-weight: 600;
  color: var(--accent-color);
  opacity: 0.5;
  transition: all 0.2s ease;
}

.pill-link.active {
  background: #fff;
  opacity: 1;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  :root {
    /* Mobile: allow smaller floor so cards still fit vertically. */
    --card-height-floor: 180px;
    --text-title-max: 42px;
    --card-height-min: 34vh;
    --card-height-ideal: 50vh;
    --card-height-max: 68vh;
    --wheel-radius-x: 46vw;
    --wheel-radius-y: 18vh;
    /* Mobile: tighter spacing ratio to prevent overlap on small screens */
    --wheel-spacing-ratio: 0.16;
    --wheel-spacing: max(calc(var(--card-width) * var(--wheel-spacing-ratio)), 6vw);
    --wheel-center-y: -4vh;
    --wheel-tilt: 55deg;
    --wheel-active-lift: 2vh;
    --text-client-size: 3vw;
    --text-title-size: 6vw;
    --text-tags-size: 2.5vw;
    --content-offset: 10vh;
    --detail-hero-width: 100%;
    --detail-hero-offset: 0%;
    --detail-hero-top-pad: 6vh;
  }

  .project-detail__inner {
    padding: 0 0 100px;
  }

  .project-detail__content {
    padding: 0 18px;
  }

  .project-detail__content--hero {
    padding-top: 0;
  }

  .project-detail__content--body {
    padding-top: 18px;
  }

  .project-detail__meta {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .project-detail__close {
    /* Mobile uses same CSS variables, no override needed */
  }
}

@media (prefers-reduced-motion: reduce) {
  .slide,
.portfolio-meta,
.project-detail,
.project-detail__card,
.project-detail__hero,
.project-detail__body,
.project-transition,
.slide-image-container {
  transition: none !important;
}

.project-detail__hero,
.project-detail__body {
  animation: none !important;
}
}

/* Custom Cursor (portfolio uses dialog cursor from index) */
#custom-cursor {
  position: fixed;
  pointer-events: none;
  z-index: 30000;
  border: none;
  background: var(--cursor-color);
  transform-origin: center center;
  transform:
    translate(-50%, -50%)
    translate(var(--cursor-jitter-x, 0px), var(--cursor-jitter-y, 0px))
    scale(var(--cursor-scale, 1))
    scaleX(var(--cursor-stretch-x, 1))
    scaleY(var(--cursor-stretch-y, 1));
  opacity: 0.85;
  transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1),
              opacity 0.35s cubic-bezier(0.4, 0, 0.2, 1),
              width 0.35s cubic-bezier(0.4, 0, 0.2, 1),
              height 0.35s cubic-bezier(0.4, 0, 0.2, 1),
              background 0.35s cubic-bezier(0.4, 0, 0.2, 1);
  will-change: transform, opacity, width, height, background;
  width: 20px;
  height: 20px;
  border-radius: 50%;
}

#custom-cursor.gate-active {
  display: block !important;
  width: 48px !important;
  height: 48px !important;
  background: rgba(255, 255, 255, 0.5) !important;
  border: 1.5px solid rgba(255, 255, 255, 0.8) !important;
  transform:
    translate(-50%, -50%)
    translate(var(--cursor-jitter-x, 0px), var(--cursor-jitter-y, 0px))
    scale(var(--cursor-scale, 1))
    scaleX(var(--cursor-stretch-x, 1))
    scaleY(var(--cursor-stretch-y, 1)) !important;
  opacity: 1 !important;
}
