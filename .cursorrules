# Alexander Beck Studio Website - Project Rules

## Documentation as Source of Truth

**CRITICAL PRINCIPLE:** Documentation represents the **intended design**. Before any changes:
1. Read relevant documentation FIRST
2. Align with documented design philosophy (README.md)
3. Match specifications (docs/reference/MODES.md)
4. Follow architecture patterns (docs/development/ARCHITECTURE.md)
5. If code conflicts with docs, fix code to match (or update docs with justification)

## Critical Constraints

1. **Documentation is authoritative** - Code must match documented design
2. **60 FPS minimum** - Revert changes that drop performance
3. **4 modes (not 3)** - Ball Pit, Flies, Zero-G, Pulse Grid (keyboard: 1,2,3,4)
4. **Edit source/ only** - Never edit public/ directly
5. **Scoped styles** - Everything in #bravia-balls container
6. **Privacy-first** - No external calls, localStorage for settings only
7. **O(1) hot paths** - Constant time per entity in loops
8. **Mobile support** - Test on device emulation, 60% ball scaling
9. **Accessibility** - ARIA labels, keyboard nav, prefers-reduced-motion

## Files

**EDIT:** source/balls-source.html, source/current-config.json  
**NEVER EDIT:** public/ (generated)  
**BUILD:** npm run build â†’ public/js/bouncy-balls-embed.js

## Documentation Updates Required When:
- Adding/removing modes
- Changing keyboard shortcuts
- Modifying build process
- Changing file structure
- Adding config options
- Changing physics behavior

## Testing Checklist
- [ ] All 4 modes work (1,2,3,4)
- [ ] 60 FPS stable
- [ ] Mouse/touch works
- [ ] Panel functional (/)
- [ ] Mobile responsive
- [ ] No console errors

See AI-AGENT-GUIDE.md and docs/ for complete rules.
